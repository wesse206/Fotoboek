"use strict";(self.webpackChunkjaarboek=self.webpackChunkjaarboek||[]).push([[179],{804:(Se,ne,S)=>{function C(e){return"function"==typeof e}function m(e){const t=e(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const M=m(e=>function(t){e(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,o)=>`${o+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function O(e,n){if(e){const t=e.indexOf(n);0<=t&&e.splice(t,1)}}class L{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const i of t)i.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(C(r))try{r()}catch(i){n=i instanceof M?i.errors:[i]}const{_finalizers:o}=this;if(o){this._finalizers=null;for(const i of o)try{y(i)}catch(s){n=n??[],s instanceof M?n=[...n,...s.errors]:n.push(s)}}if(n)throw new M(n)}}add(n){var t;if(n&&n!==this)if(this.closed)y(n);else{if(n instanceof L){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(n)}}_hasParent(n){const{_parentage:t}=this;return t===n||Array.isArray(t)&&t.includes(n)}_addParent(n){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(n),t):t?[t,n]:n}_removeParent(n){const{_parentage:t}=this;t===n?this._parentage=null:Array.isArray(t)&&O(t,n)}remove(n){const{_finalizers:t}=this;t&&O(t,n),n instanceof L&&n._removeParent(this)}}L.EMPTY=(()=>{const e=new L;return e.closed=!0,e})();const H=L.EMPTY;function F(e){return e instanceof L||e&&"closed"in e&&C(e.remove)&&C(e.add)&&C(e.unsubscribe)}function y(e){C(e)?e():e.unsubscribe()}const I={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},P={setTimeout(e,n,...t){const{delegate:r}=P;return r?.setTimeout?r.setTimeout(e,n,...t):setTimeout(e,n,...t)},clearTimeout(e){const{delegate:n}=P;return(n?.clearTimeout||clearTimeout)(e)},delegate:void 0};function B(e){P.setTimeout(()=>{const{onUnhandledError:n}=I;if(!n)throw e;n(e)})}function te(){}const T=J("C",void 0,void 0);function J(e,n,t){return{kind:e,value:n,error:t}}let A=null;function re(e){if(I.useDeprecatedSynchronousErrorHandling){const n=!A;if(n&&(A={errorThrown:!1,error:null}),e(),n){const{errorThrown:t,error:r}=A;if(A=null,t)throw r}}else e()}class Ue extends L{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,F(n)&&n.add(this)):this.destination=ie}static create(n,t,r){return new ce(n,t,r)}next(n){this.isStopped?X(function z(e){return J("N",e,void 0)}(n),this):this._next(n)}error(n){this.isStopped?X(function b(e){return J("E",void 0,e)}(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?X(T,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const De=Function.prototype.bind;function se(e,n){return De.call(e,n)}class we{constructor(n){this.partialObserver=n}next(n){const{partialObserver:t}=this;if(t.next)try{t.next(n)}catch(r){W(r)}}error(n){const{partialObserver:t}=this;if(t.error)try{t.error(n)}catch(r){W(r)}else W(n)}complete(){const{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(t){W(t)}}}class ce extends Ue{constructor(n,t,r){let o;if(super(),C(n)||!n)o={next:n??void 0,error:t??void 0,complete:r??void 0};else{let i;this&&I.useDeprecatedNextContext?(i=Object.create(n),i.unsubscribe=()=>this.unsubscribe(),o={next:n.next&&se(n.next,i),error:n.error&&se(n.error,i),complete:n.complete&&se(n.complete,i)}):o=n}this.destination=new we(o)}}function W(e){I.useDeprecatedSynchronousErrorHandling?function Y(e){I.useDeprecatedSynchronousErrorHandling&&A&&(A.errorThrown=!0,A.error=e)}(e):B(e)}function X(e,n){const{onStoppedNotification:t}=I;t&&P.setTimeout(()=>t(e,n))}const ie={closed:!0,next:te,error:function j(e){throw e},complete:te},Ce="function"==typeof Symbol&&Symbol.observable||"@@observable";function ve(e){return e}function ke(e){return 0===e.length?ve:1===e.length?e[0]:function(t){return e.reduce((r,o)=>o(r),t)}}let Ee=(()=>{class e{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new e;return r.source=this,r.operator=t,r}subscribe(t,r,o){const i=function bt(e){return e&&e instanceof Ue||function ut(e){return e&&C(e.next)&&C(e.error)&&C(e.complete)}(e)&&F(e)}(t)?t:new ce(t,r,o);return re(()=>{const{operator:s,source:l}=this;i.add(s?s.call(i,l):l?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=Ye(r))((o,i)=>{const s=new ce({next:l=>{try{t(l)}catch(u){i(u),s.unsubscribe()}},error:i,complete:o});this.subscribe(s)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[Ce](){return this}pipe(...t){return ke(t)(this)}toPromise(t){return new(t=Ye(t))((r,o)=>{let i;this.subscribe(s=>i=s,s=>o(s),()=>r(i))})}}return e.create=n=>new e(n),e})();function Ye(e){var n;return null!==(n=e??I.Promise)&&void 0!==n?n:Promise}const gn=m(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let at=(()=>{class e extends Ee{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new tn(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new gn}next(t){re(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){re(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){re(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:o,observers:i}=this;return r||o?H:(this.currentObservers=null,i.push(t),new L(()=>{this.currentObservers=null,O(i,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:o,isStopped:i}=this;r?t.error(o):i&&t.complete()}asObservable(){const t=new Ee;return t.source=this,t}}return e.create=(n,t)=>new tn(n,t),e})();class tn extends at{constructor(n,t){super(),this.destination=n,this.source=t}next(n){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,n)}error(n){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,n)}complete(){var n,t;null===(t=null===(n=this.destination)||void 0===n?void 0:n.complete)||void 0===t||t.call(n)}_subscribe(n){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(n))&&void 0!==r?r:H}}function wt(e){return C(e?.lift)}function He(e){return n=>{if(wt(n))return n.lift(function(t){try{return e(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ge(e,n,t,r,o){return new pe(e,n,t,r,o)}class pe extends Ue{constructor(n,t,r,o,i,s){super(n),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=t?function(l){try{t(l)}catch(u){n.error(u)}}:super._next,this._error=o?function(l){try{o(l)}catch(u){n.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(l){n.error(l)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(n=this.onFinalize)||void 0===n||n.call(this))}}}function R(e,n){return He((t,r)=>{let o=0;t.subscribe(Ge(r,i=>{r.next(e.call(n,i,o++))}))})}function xt(e){return this instanceof xt?(this.v=e,this):new xt(e)}function Ka(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=function ts(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=e[i]&&function(s){return new Promise(function(l,u){!function o(i,s,l,u){Promise.resolve(u).then(function(h){i({value:h,done:l})},s)}(l,u,(s=e[i](s)).done,s.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const Go=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function Ya(e){return C(e?.then)}function Qa(e){return C(e[Ce])}function zo(e){return Symbol.asyncIterator&&C(e?.[Symbol.asyncIterator])}function yr(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Ko=function Ja(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Xa(e){return C(e?.[Ko])}function rs(e){return function Br(e,n,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,r=t.apply(e,n||[]),i=[];return o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o;function s(E){r[E]&&(o[E]=function(D){return new Promise(function(x,U){i.push([E,D,x,U])>1||l(E,D)})})}function l(E,D){try{!function u(E){E.value instanceof xt?Promise.resolve(E.value.v).then(h,p):v(i[0][2],E)}(r[E](D))}catch(x){v(i[0][3],x)}}function h(E){l("next",E)}function p(E){l("throw",E)}function v(E,D){E(D),i.shift(),i.length&&l(i[0][0],i[0][1])}}(this,arguments,function*(){const t=e.getReader();try{for(;;){const{value:r,done:o}=yield xt(t.read());if(o)return yield xt(void 0);yield yield xt(r)}}finally{t.releaseLock()}})}function ec(e){return C(e?.getReader)}function jt(e){if(e instanceof Ee)return e;if(null!=e){if(Qa(e))return function xu(e){return new Ee(n=>{const t=e[Ce]();if(C(t.subscribe))return t.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(Go(e))return function Fu(e){return new Ee(n=>{for(let t=0;t<e.length&&!n.closed;t++)n.next(e[t]);n.complete()})}(e);if(Ya(e))return function Lu(e){return new Ee(n=>{e.then(t=>{n.closed||(n.next(t),n.complete())},t=>n.error(t)).then(null,B)})}(e);if(zo(e))return tc(e);if(Xa(e))return function Uu(e){return new Ee(n=>{for(const t of e)if(n.next(t),n.closed)return;n.complete()})}(e);if(ec(e))return function Hu(e){return tc(rs(e))}(e)}throw yr(e)}function tc(e){return new Ee(n=>{(function Fn(e,n){var t,r,o,i;return function Ie(e,n,t,r){return new(t||(t=Promise))(function(i,s){function l(p){try{h(r.next(p))}catch(v){s(v)}}function u(p){try{h(r.throw(p))}catch(v){s(v)}}function h(p){p.done?i(p.value):function o(i){return i instanceof t?i:new t(function(s){s(i)})}(p.value).then(l,u)}h((r=r.apply(e,n||[])).next())})}(this,void 0,void 0,function*(){try{for(t=Ka(e);!(r=yield t.next()).done;)if(n.next(r.value),n.closed)return}catch(s){o={error:s}}finally{try{r&&!r.done&&(i=t.return)&&(yield i.call(t))}finally{if(o)throw o.error}}n.complete()})})(e,n).catch(t=>n.error(t))})}function Ft(e,n,t,r=0,o=!1){const i=n.schedule(function(){t(),o?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(i),!o)return i}function mt(e,n,t=1/0){return C(n)?mt((r,o)=>R((i,s)=>n(r,i,o,s))(jt(e(r,o))),t):("number"==typeof n&&(t=n),He((r,o)=>function os(e,n,t,r,o,i,s,l){const u=[];let h=0,p=0,v=!1;const E=()=>{v&&!u.length&&!h&&n.complete()},D=U=>h<r?x(U):u.push(U),x=U=>{i&&n.next(U),h++;let $=!1;jt(t(U,p++)).subscribe(Ge(n,ee=>{o?.(ee),i?D(ee):n.next(ee)},()=>{$=!0},void 0,()=>{if($)try{for(h--;u.length&&h<r;){const ee=u.shift();s?Ft(n,s,()=>x(ee)):x(ee)}E()}catch(ee){n.error(ee)}}))};return e.subscribe(Ge(n,D,()=>{v=!0,E()})),()=>{l?.()}}(r,o,e,t)))}function jr(e=1/0){return mt(ve,e)}const on=new Ee(e=>e.complete());function Gr(e){return e[e.length-1]}function rc(e){return C(Gr(e))?e.pop():void 0}function zr(e){return function Dn(e){return e&&C(e.schedule)}(Gr(e))?e.pop():void 0}function is(e,n=0){return He((t,r)=>{t.subscribe(Ge(r,o=>Ft(r,e,()=>r.next(o),n),()=>Ft(r,e,()=>r.complete(),n),o=>Ft(r,e,()=>r.error(o),n)))})}function oc(e,n=0){return He((t,r)=>{r.add(e.schedule(()=>t.subscribe(r),n))})}function ic(e,n){if(!e)throw new Error("Iterable cannot be null");return new Ee(t=>{Ft(t,n,()=>{const r=e[Symbol.asyncIterator]();Ft(t,n,()=>{r.next().then(o=>{o.done?t.complete():t.next(o.value)})},0,!0)})})}function Ke(e,n){return n?function $u(e,n){if(null!=e){if(Qa(e))return function ss(e,n){return jt(e).pipe(oc(n),is(n))}(e,n);if(Go(e))return function as(e,n){return new Ee(t=>{let r=0;return n.schedule(function(){r===e.length?t.complete():(t.next(e[r++]),t.closed||this.schedule())})})}(e,n);if(Ya(e))return function Vu(e,n){return jt(e).pipe(oc(n),is(n))}(e,n);if(zo(e))return ic(e,n);if(Xa(e))return function ju(e,n){return new Ee(t=>{let r;return Ft(t,n,()=>{r=e[Ko](),Ft(t,n,()=>{let o,i;try{({value:o,done:i}=r.next())}catch(s){return void t.error(s)}i?t.complete():t.next(o)},0,!0)}),()=>C(r?.return)&&r.return()})}(e,n);if(ec(e))return function sc(e,n){return ic(rs(e),n)}(e,n)}throw yr(e)}(e,n):jt(e)}class $t extends at{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const t=super._subscribe(n);return!t.closed&&n.next(this._value),t}getValue(){const{hasError:n,thrownError:t,_value:r}=this;if(n)throw t;return this._throwIfClosed(),r}next(n){super.next(this._value=n)}}function ge(...e){return Ke(e,zr(e))}function ac(e={}){const{connector:n=(()=>new at),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:o=!0}=e;return i=>{let s,l,u,h=0,p=!1,v=!1;const E=()=>{l?.unsubscribe(),l=void 0},D=()=>{E(),s=u=void 0,p=v=!1},x=()=>{const U=s;D(),U?.unsubscribe()};return He((U,$)=>{h++,!v&&!p&&E();const ee=u=u??n();$.add(()=>{h--,0===h&&!v&&!p&&(l=yo(x,o))}),ee.subscribe($),!s&&h>0&&(s=new ce({next:V=>ee.next(V),error:V=>{v=!0,E(),l=yo(D,t,V),ee.error(V)},complete:()=>{p=!0,E(),l=yo(D,r),ee.complete()}}),jt(U).subscribe(s))})(i)}}function yo(e,n,...t){if(!0===n)return void e();if(!1===n)return;const r=new ce({next:()=>{r.unsubscribe(),e()}});return jt(n(...t)).subscribe(r)}function G(e,n){return He((t,r)=>{let o=null,i=0,s=!1;const l=()=>s&&!o&&r.complete();t.subscribe(Ge(r,u=>{o?.unsubscribe();let h=0;const p=i++;jt(e(u,p)).subscribe(o=Ge(r,v=>r.next(n?n(u,v,p,h++):v),()=>{o=null,l()}))},()=>{s=!0,l()}))})}function c(e,n){return e===n}function d(e){for(let n in e)if(e[n]===d)return n;throw Error("Could not find renamed property on target object.")}function g(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(g).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const n=e.toString();if(null==n)return""+n;const t=n.indexOf("\n");return-1===t?n:n.substring(0,t)}function _(e,n){return null==e||""===e?null===n?"":n:null==n||""===n?e:e+" "+n}const w=d({__forward_ref__:d});function N(e){return e.__forward_ref__=N,e.toString=function(){return g(this())},e}function k(e){return K(e)?e():e}function K(e){return"function"==typeof e&&e.hasOwnProperty(w)&&e.__forward_ref__===N}function le(e){return e&&!!e.\u0275providers}const Qe="https://g.co/ng/security#xss";class q extends Error{constructor(n,t){super(function yt(e,n){return`NG0${Math.abs(e)}${n?": "+n:""}`}(n,t)),this.code=n}}function oe(e){return"string"==typeof e?e:null==e?"":String(e)}function Kr(e,n){throw new q(-201,!1)}function bn(e,n){null==e&&function Te(e,n,t,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${t} ${r} ${n} <=Actual]`))}(n,e,null,"!=")}function me(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Ln(e){return{providers:e.providers||[],imports:e.imports||[]}}function cc(e){return dg(e,uc)||dg(e,hg)}function dg(e,n){return e.hasOwnProperty(n)?e[n]:null}function lc(e){return e&&(e.hasOwnProperty(zu)||e.hasOwnProperty(UA))?e[zu]:null}const uc=d({\u0275prov:d}),zu=d({\u0275inj:d}),hg=d({ngInjectableDef:d}),UA=d({ngInjectorDef:d});var Be=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(Be||{});let Ku;function sn(e){const n=Ku;return Ku=e,n}function pg(e,n,t){const r=cc(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&Be.Optional?null:void 0!==n?n:void Kr(g(e))}const tt=globalThis,ls={},Qu="__NG_DI_FLAG__",dc="ngTempTokenPath",VA=/\n/gm,mg="__source";let qo;function qr(e){const n=qo;return qo=e,n}function GA(e,n=Be.Default){if(void 0===qo)throw new q(-203,!1);return null===qo?pg(e,void 0,n):qo.get(e,n&Be.Optional?null:void 0,n)}function ue(e,n=Be.Default){return(function fg(){return Ku}()||GA)(k(e),n)}function he(e,n=Be.Default){return ue(e,hc(n))}function hc(e){return typeof e>"u"||"number"==typeof e?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function Ju(e){const n=[];for(let t=0;t<e.length;t++){const r=k(e[t]);if(Array.isArray(r)){if(0===r.length)throw new q(900,!1);let o,i=Be.Default;for(let s=0;s<r.length;s++){const l=r[s],u=zA(l);"number"==typeof u?-1===u?o=l.token:i|=u:o=l}n.push(ue(o,i))}else n.push(ue(r))}return n}function us(e,n){return e[Qu]=n,e.prototype[Qu]=n,e}function zA(e){return e[Qu]}function vr(e){return{toString:e}.toString()}var fc=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(fc||{}),Un=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(Un||{});const Yn={},qe=[],pc=d({\u0275cmp:d}),Xu=d({\u0275dir:d}),ed=d({\u0275pipe:d}),vg=d({\u0275mod:d}),_r=d({\u0275fac:d}),ds=d({__NG_ELEMENT_ID__:d}),_g=d({__NG_ENV_ID__:d});function Cg(e,n,t){let r=e.length;for(;;){const o=e.indexOf(n,t);if(-1===o)return o;if(0===o||e.charCodeAt(o-1)<=32){const i=n.length;if(o+i===r||e.charCodeAt(o+i)<=32)return o}t=o+1}}function td(e,n,t){let r=0;for(;r<t.length;){const o=t[r];if("number"==typeof o){if(0!==o)break;r++;const i=t[r++],s=t[r++],l=t[r++];e.setAttribute(n,s,l,i)}else{const i=o,s=t[++r];wg(i)?e.setProperty(n,i,s):e.setAttribute(n,i,s),r++}}return r}function Eg(e){return 3===e||4===e||6===e}function wg(e){return 64===e.charCodeAt(0)}function hs(e,n){if(null!==n&&0!==n.length)if(null===e||0===e.length)e=n.slice();else{let t=-1;for(let r=0;r<n.length;r++){const o=n[r];"number"==typeof o?t=o:0===t||Ig(e,t,o,null,-1===t||2===t?n[++r]:null)}}return e}function Ig(e,n,t,r,o){let i=0,s=e.length;if(-1===n)s=-1;else for(;i<e.length;){const l=e[i++];if("number"==typeof l){if(l===n){s=-1;break}if(l>n){s=i-1;break}}}for(;i<e.length;){const l=e[i];if("number"==typeof l)break;if(l===t){if(null===r)return void(null!==o&&(e[i+1]=o));if(r===e[i+1])return void(e[i+2]=o)}i++,null!==r&&i++,null!==o&&i++}-1!==s&&(e.splice(s,0,n),i=s+1),e.splice(i++,0,t),null!==r&&e.splice(i++,0,r),null!==o&&e.splice(i++,0,o)}const Tg="ng-template";function WA(e,n,t){let r=0,o=!0;for(;r<e.length;){let i=e[r++];if("string"==typeof i&&o){const s=e[r++];if(t&&"class"===i&&-1!==Cg(s.toLowerCase(),n,0))return!0}else{if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===n)return!0;return!1}"number"==typeof i&&(o=!1)}}return!1}function Ag(e){return 4===e.type&&e.value!==Tg}function ZA(e,n,t){return n===(4!==e.type||t?e.value:Tg)}function YA(e,n,t){let r=4;const o=e.attrs||[],i=function XA(e){for(let n=0;n<e.length;n++)if(Eg(e[n]))return n;return e.length}(o);let s=!1;for(let l=0;l<n.length;l++){const u=n[l];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!ZA(e,u,t)||""===u&&1===n.length){if(Hn(r))return!1;s=!0}}else{const h=8&r?u:n[++l];if(8&r&&null!==e.attrs){if(!WA(e.attrs,h,t)){if(Hn(r))return!1;s=!0}continue}const v=QA(8&r?"class":u,o,Ag(e),t);if(-1===v){if(Hn(r))return!1;s=!0;continue}if(""!==h){let E;E=v>i?"":o[v+1].toLowerCase();const D=8&r?E:null;if(D&&-1!==Cg(D,h,0)||2&r&&h!==E){if(Hn(r))return!1;s=!0}}}}else{if(!s&&!Hn(r)&&!Hn(u))return!1;if(s&&Hn(u))continue;s=!1,r=u|1&r}}return Hn(r)||s}function Hn(e){return 0==(1&e)}function QA(e,n,t,r){if(null===n)return-1;let o=0;if(r||!t){let i=!1;for(;o<n.length;){const s=n[o];if(s===e)return o;if(3===s||6===s)i=!0;else{if(1===s||2===s){let l=n[++o];for(;"string"==typeof l;)l=n[++o];continue}if(4===s)break;if(0===s){o+=4;continue}}o+=i?1:2}return-1}return function eS(e,n){let t=e.indexOf(4);if(t>-1)for(t++;t<e.length;){const r=e[t];if("number"==typeof r)return-1;if(r===n)return t;t++}return-1}(n,e)}function Sg(e,n,t=!1){for(let r=0;r<n.length;r++)if(YA(e,n[r],t))return!0;return!1}function Dg(e,n){return e?":not("+n.trim()+")":n}function nS(e){let n=e[0],t=1,r=2,o="",i=!1;for(;t<e.length;){let s=e[t];if("string"==typeof s)if(2&r){const l=e[++t];o+="["+s+(l.length>0?'="'+l+'"':"")+"]"}else 8&r?o+="."+s:4&r&&(o+=" "+s);else""!==o&&!Hn(s)&&(n+=Dg(i,o),o=""),r=s,i=i||!Hn(r);t++}return""!==o&&(n+=Dg(i,o)),n}function fs(e){return vr(()=>{const n=Mg(e),t={...n,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===fc.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Un.Emulated,styles:e.styles||qe,_:null,schemas:e.schemas||null,tView:null,id:""};Rg(t);const r=e.dependencies;return t.directiveDefs=gc(r,!1),t.pipeDefs=gc(r,!0),t.id=function uS(e){let n=0;const t=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(const o of t)n=Math.imul(31,n)+o.charCodeAt(0)<<0;return n+=2147483648,"c"+n}(t),t})}function sS(e){return je(e)||Rt(e)}function aS(e){return null!==e}function Qn(e){return vr(()=>({type:e.type,bootstrap:e.bootstrap||qe,declarations:e.declarations||qe,imports:e.imports||qe,exports:e.exports||qe,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function bg(e,n){if(null==e)return Yn;const t={};for(const r in e)if(e.hasOwnProperty(r)){let o=e[r],i=o;Array.isArray(o)&&(i=o[1],o=o[0]),t[o]=r,n&&(n[o]=i)}return t}function Me(e){return vr(()=>{const n=Mg(e);return Rg(n),n})}function je(e){return e[pc]||null}function Rt(e){return e[Xu]||null}function Gt(e){return e[ed]||null}function vn(e,n){const t=e[vg]||null;if(!t&&!0===n)throw new Error(`Type ${g(e)} does not have '\u0275mod' property.`);return t}function Mg(e){const n={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:n,inputTransforms:null,inputConfig:e.inputs||Yn,exportAs:e.exportAs||null,standalone:!0===e.standalone,signals:!0===e.signals,selectors:e.selectors||qe,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:bg(e.inputs,n),outputs:bg(e.outputs)}}function Rg(e){e.features?.forEach(n=>n(e))}function gc(e,n){if(!e)return null;const t=n?Gt:sS;return()=>("function"==typeof e?e():e).map(r=>t(r)).filter(aS)}const ft=0,ae=1,Pe=2,ct=3,Bn=4,ps=5,Lt=6,Zo=7,vt=8,Wr=9,Yo=10,Re=11,gs=12,kg=13,Qo=14,_t=15,ms=16,Jo=17,Jn=18,ys=19,Ng=20,Zr=21,Cr=22,vs=23,_s=24,Ve=25,nd=1,Og=2,Xn=7,Xo=9,kt=11;function cn(e){return Array.isArray(e)&&"object"==typeof e[nd]}function zt(e){return Array.isArray(e)&&!0===e[nd]}function rd(e){return 0!=(4&e.flags)}function Co(e){return e.componentOffset>-1}function yc(e){return 1==(1&e.flags)}function Vn(e){return!!e.template}function od(e){return 0!=(512&e[Pe])}function Eo(e,n){return e.hasOwnProperty(_r)?e[_r]:null}let Nt=null,vc=!1;function Mn(e){const n=Nt;return Nt=e,n}const Fg={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Ug(e){if(!Es(e)||e.dirty){if(!e.producerMustRecompute(e)&&!Vg(e))return void(e.dirty=!1);e.producerRecomputeValue(e),e.dirty=!1}}function Bg(e){e.dirty=!0,function Hg(e){if(void 0===e.liveConsumerNode)return;const n=vc;vc=!0;try{for(const t of e.liveConsumerNode)t.dirty||Bg(t)}finally{vc=n}}(e),e.consumerMarkedDirty?.(e)}function sd(e){return e&&(e.nextProducerIndex=0),Mn(e)}function ad(e,n){if(Mn(n),e&&void 0!==e.producerNode&&void 0!==e.producerIndexOfThis&&void 0!==e.producerLastReadVersion){if(Es(e))for(let t=e.nextProducerIndex;t<e.producerNode.length;t++)_c(e.producerNode[t],e.producerIndexOfThis[t]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function Vg(e){ei(e);for(let n=0;n<e.producerNode.length;n++){const t=e.producerNode[n],r=e.producerLastReadVersion[n];if(r!==t.version||(Ug(t),r!==t.version))return!0}return!1}function jg(e){if(ei(e),Es(e))for(let n=0;n<e.producerNode.length;n++)_c(e.producerNode[n],e.producerIndexOfThis[n]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function _c(e,n){if(function Gg(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}(e),ei(e),1===e.liveConsumerNode.length)for(let r=0;r<e.producerNode.length;r++)_c(e.producerNode[r],e.producerIndexOfThis[r]);const t=e.liveConsumerNode.length-1;if(e.liveConsumerNode[n]=e.liveConsumerNode[t],e.liveConsumerIndexOfThis[n]=e.liveConsumerIndexOfThis[t],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,n<e.liveConsumerNode.length){const r=e.liveConsumerIndexOfThis[n],o=e.liveConsumerNode[n];ei(o),o.producerIndexOfThis[r]=n}}function Es(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function ei(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}let zg=null;const Zg=()=>{},IS=(()=>({...Fg,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:e=>{e.schedule(e.ref)},hasRun:!1,cleanupFn:Zg}))();class TS{constructor(n,t,r){this.previousValue=n,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Rn(){return Yg}function Yg(e){return e.type.prototype.ngOnChanges&&(e.setInput=SS),AS}function AS(){const e=Jg(this),n=e?.current;if(n){const t=e.previous;if(t===Yn)e.previous=n;else for(let r in n)t[r]=n[r];e.current=null,this.ngOnChanges(n)}}function SS(e,n,t,r){const o=this.declaredInputs[t],i=Jg(e)||function DS(e,n){return e[Qg]=n}(e,{previous:Yn,current:null}),s=i.current||(i.current={}),l=i.previous,u=l[o];s[o]=new TS(u&&u.currentValue,n,l===Yn),e[r]=n}Rn.ngInherit=!0;const Qg="__ngSimpleChanges__";function Jg(e){return e[Qg]||null}const er=function(e,n,t){};function nt(e){for(;Array.isArray(e);)e=e[ft];return e}function Cc(e,n){return nt(n[e])}function ln(e,n){return nt(n[e.index])}function tm(e,n){return e.data[n]}function _n(e,n){const t=n[e];return cn(t)?t:t[ft]}function Qr(e,n){return null==n?null:e[n]}function nm(e){e[Jo]=0}function OS(e){1024&e[Pe]||(e[Pe]|=1024,om(e,1))}function rm(e){1024&e[Pe]&&(e[Pe]&=-1025,om(e,-1))}function om(e,n){let t=e[ct];if(null===t)return;t[ps]+=n;let r=t;for(t=t[ct];null!==t&&(1===n&&1===r[ps]||-1===n&&0===r[ps]);)t[ps]+=n,r=t,t=t[ct]}const Ae={lFrame:gm(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function am(){return Ae.bindingsEnabled}function Z(){return Ae.lFrame.lView}function $e(){return Ae.lFrame.tView}function Er(e){return Ae.lFrame.contextLView=e,e[vt]}function wr(e){return Ae.lFrame.contextLView=null,e}function Ot(){let e=cm();for(;null!==e&&64===e.type;)e=e.parent;return e}function cm(){return Ae.lFrame.currentTNode}function tr(e,n){const t=Ae.lFrame;t.currentTNode=e,t.isParent=n}function hd(){return Ae.lFrame.isParent}function ri(){return Ae.lFrame.bindingIndex++}function zS(e,n){const t=Ae.lFrame;t.bindingIndex=t.bindingRootIndex=e,pd(n)}function pd(e){Ae.lFrame.currentDirectiveIndex=e}function md(e){Ae.lFrame.currentQueryIndex=e}function qS(e){const n=e[ae];return 2===n.type?n.declTNode:1===n.type?e[Lt]:null}function fm(e,n,t){if(t&Be.SkipSelf){let o=n,i=e;for(;!(o=o.parent,null!==o||t&Be.Host||(o=qS(i),null===o||(i=i[Qo],10&o.type))););if(null===o)return!1;n=o,e=i}const r=Ae.lFrame=pm();return r.currentTNode=n,r.lView=e,!0}function yd(e){const n=pm(),t=e[ae];Ae.lFrame=n,n.currentTNode=t.firstChild,n.lView=e,n.tView=t,n.contextLView=e,n.bindingIndex=t.bindingStartIndex,n.inI18n=!1}function pm(){const e=Ae.lFrame,n=null===e?null:e.child;return null===n?gm(e):n}function gm(e){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=n),n}function mm(){const e=Ae.lFrame;return Ae.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const ym=mm;function vd(){const e=mm();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function qt(){return Ae.lFrame.selectedIndex}function wo(e){Ae.lFrame.selectedIndex=e}function dt(){const e=Ae.lFrame;return tm(e.tView,e.selectedIndex)}let _m=!0;function Ec(){return _m}function Jr(e){_m=e}function wc(e,n){for(let t=n.directiveStart,r=n.directiveEnd;t<r;t++){const i=e.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:l,ngAfterViewInit:u,ngAfterViewChecked:h,ngOnDestroy:p}=i;s&&(e.contentHooks??=[]).push(-t,s),l&&((e.contentHooks??=[]).push(t,l),(e.contentCheckHooks??=[]).push(t,l)),u&&(e.viewHooks??=[]).push(-t,u),h&&((e.viewHooks??=[]).push(t,h),(e.viewCheckHooks??=[]).push(t,h)),null!=p&&(e.destroyHooks??=[]).push(t,p)}}function Ic(e,n,t){Cm(e,n,3,t)}function Tc(e,n,t,r){(3&e[Pe])===t&&Cm(e,n,t,r)}function _d(e,n){let t=e[Pe];(3&t)===n&&(t&=8191,t+=1,e[Pe]=t)}function Cm(e,n,t,r){const i=r??-1,s=n.length-1;let l=0;for(let u=void 0!==r?65535&e[Jo]:0;u<s;u++)if("number"==typeof n[u+1]){if(l=n[u],null!=r&&l>=r)break}else n[u]<0&&(e[Jo]+=65536),(l<i||-1==i)&&(tD(e,t,n,u),e[Jo]=(4294901760&e[Jo])+u+2),u++}function Em(e,n){er(4,e,n);const t=Mn(null);try{n.call(e)}finally{Mn(t),er(5,e,n)}}function tD(e,n,t,r){const o=t[r]<0,i=t[r+1],l=e[o?-t[r]:t[r]];o?e[Pe]>>13<e[Jo]>>16&&(3&e[Pe])===n&&(e[Pe]+=8192,Em(l,i)):Em(l,i)}const oi=-1;class Is{constructor(n,t,r){this.factory=n,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function Ed(e){return e!==oi}function Ts(e){return 32767&e}function As(e,n){let t=function iD(e){return e>>16}(e),r=n;for(;t>0;)r=r[Qo],t--;return r}let wd=!0;function Ac(e){const n=wd;return wd=e,n}const wm=255,Im=5;let sD=0;const nr={};function Sc(e,n){const t=Tm(e,n);if(-1!==t)return t;const r=n[ae];r.firstCreatePass&&(e.injectorIndex=n.length,Id(r.data,e),Id(n,null),Id(r.blueprint,null));const o=Dc(e,n),i=e.injectorIndex;if(Ed(o)){const s=Ts(o),l=As(o,n),u=l[ae].data;for(let h=0;h<8;h++)n[i+h]=l[s+h]|u[s+h]}return n[i+8]=o,i}function Id(e,n){e.push(0,0,0,0,0,0,0,0,n)}function Tm(e,n){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===n[e.injectorIndex+8]?-1:e.injectorIndex}function Dc(e,n){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let t=0,r=null,o=n;for(;null!==o;){if(r=km(o),null===r)return oi;if(t++,o=o[Qo],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return oi}function Td(e,n,t){!function aD(e,n,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(ds)&&(r=t[ds]),null==r&&(r=t[ds]=sD++);const o=r&wm;n.data[e+(o>>Im)]|=1<<o}(e,n,t)}function Am(e,n,t){if(t&Be.Optional||void 0!==e)return e;Kr()}function Sm(e,n,t,r){if(t&Be.Optional&&void 0===r&&(r=null),!(t&(Be.Self|Be.Host))){const o=e[Wr],i=sn(void 0);try{return o?o.get(n,r,t&Be.Optional):pg(n,r,t&Be.Optional)}finally{sn(i)}}return Am(r,0,t)}function Dm(e,n,t,r=Be.Default,o){if(null!==e){if(2048&n[Pe]&&!(r&Be.Self)){const s=function fD(e,n,t,r,o){let i=e,s=n;for(;null!==i&&null!==s&&2048&s[Pe]&&!(512&s[Pe]);){const l=bm(i,s,t,r|Be.Self,nr);if(l!==nr)return l;let u=i.parent;if(!u){const h=s[Ng];if(h){const p=h.get(t,nr,r);if(p!==nr)return p}u=km(s),s=s[Qo]}i=u}return o}(e,n,t,r,nr);if(s!==nr)return s}const i=bm(e,n,t,r,nr);if(i!==nr)return i}return Sm(n,t,r,o)}function bm(e,n,t,r,o){const i=function uD(e){if("string"==typeof e)return e.charCodeAt(0)||0;const n=e.hasOwnProperty(ds)?e[ds]:void 0;return"number"==typeof n?n>=0?n&wm:hD:n}(t);if("function"==typeof i){if(!fm(n,e,r))return r&Be.Host?Am(o,0,r):Sm(n,t,r,o);try{let s;if(s=i(r),null!=s||r&Be.Optional)return s;Kr()}finally{ym()}}else if("number"==typeof i){let s=null,l=Tm(e,n),u=oi,h=r&Be.Host?n[_t][Lt]:null;for((-1===l||r&Be.SkipSelf)&&(u=-1===l?Dc(e,n):n[l+8],u!==oi&&Rm(r,!1)?(s=n[ae],l=Ts(u),n=As(u,n)):l=-1);-1!==l;){const p=n[ae];if(Mm(i,l,p.data)){const v=lD(l,n,t,s,r,h);if(v!==nr)return v}u=n[l+8],u!==oi&&Rm(r,n[ae].data[l+8]===h)&&Mm(i,l,n)?(s=p,l=Ts(u),n=As(u,n)):l=-1}}return o}function lD(e,n,t,r,o,i){const s=n[ae],l=s.data[e+8],p=function bc(e,n,t,r,o){const i=e.providerIndexes,s=n.data,l=1048575&i,u=e.directiveStart,p=i>>20,E=o?l+p:e.directiveEnd;for(let D=r?l:l+p;D<E;D++){const x=s[D];if(D<u&&t===x||D>=u&&x.type===t)return D}if(o){const D=s[u];if(D&&Vn(D)&&D.type===t)return u}return null}(l,s,t,null==r?Co(l)&&wd:r!=s&&0!=(3&l.type),o&Be.Host&&i===l);return null!==p?Io(n,s,p,l):nr}function Io(e,n,t,r){let o=e[t];const i=n.data;if(function nD(e){return e instanceof Is}(o)){const s=o;s.resolving&&function mn(e,n){const t=n?`. Dependency path: ${n.join(" > ")} > ${e}`:"";throw new q(-200,`Circular dependency in DI detected for ${e}${t}`)}(function Oe(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():oe(e)}(i[t]));const l=Ac(s.canSeeViewProviders);s.resolving=!0;const h=s.injectImpl?sn(s.injectImpl):null;fm(e,r,Be.Default);try{o=e[t]=s.factory(void 0,i,e,r),n.firstCreatePass&&t>=r.directiveStart&&function eD(e,n,t){const{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=n.type.prototype;if(r){const s=Yg(n);(t.preOrderHooks??=[]).push(e,s),(t.preOrderCheckHooks??=[]).push(e,s)}o&&(t.preOrderHooks??=[]).push(0-e,o),i&&((t.preOrderHooks??=[]).push(e,i),(t.preOrderCheckHooks??=[]).push(e,i))}(t,i[t],n)}finally{null!==h&&sn(h),Ac(l),s.resolving=!1,ym()}}return o}function Mm(e,n,t){return!!(t[n+(e>>Im)]&1<<e)}function Rm(e,n){return!(e&Be.Self||e&Be.Host&&n)}class Wt{constructor(n,t){this._tNode=n,this._lView=t}get(n,t,r){return Dm(this._tNode,this._lView,n,hc(r),t)}}function hD(){return new Wt(Ot(),Z())}function Ad(e){return K(e)?()=>{const n=Ad(k(e));return n&&n()}:Eo(e)}function km(e){const n=e[ae],t=n.type;return 2===t?n.declTNode:1===t?e[Lt]:null}const si="__parameters__";function ci(e,n,t){return vr(()=>{const r=function Sd(e){return function(...t){if(e){const r=e(...t);for(const o in r)this[o]=r[o]}}}(n);function o(...i){if(this instanceof o)return r.apply(this,i),this;const s=new o(...i);return l.annotation=s,l;function l(u,h,p){const v=u.hasOwnProperty(si)?u[si]:Object.defineProperty(u,si,{value:[]})[si];for(;v.length<=p;)v.push(null);return(v[p]=v[p]||[]).push(s),u}}return t&&(o.prototype=Object.create(t.prototype)),o.prototype.ngMetadataName=e,o.annotationCls=o,o})}function ui(e,n){e.forEach(t=>Array.isArray(t)?ui(t,n):n(t))}function Om(e,n,t){n>=e.length?e.push(t):e.splice(n,0,t)}function Rc(e,n){return n>=e.length-1?e.pop():e.splice(n,1)[0]}function Cn(e,n,t){let r=di(e,n);return r>=0?e[1|r]=t:(r=~r,function CD(e,n,t,r){let o=e.length;if(o==n)e.push(t,r);else if(1===o)e.push(r,e[0]),e[0]=t;else{for(o--,e.push(e[o-1],e[o]);o>n;)e[o]=e[o-2],o--;e[n]=t,e[n+1]=r}}(e,r,n,t)),r}function Dd(e,n){const t=di(e,n);if(t>=0)return e[1|t]}function di(e,n){return function Pm(e,n,t){let r=0,o=e.length>>t;for(;o!==r;){const i=r+(o-r>>1),s=e[i<<t];if(n===s)return i<<t;s>n?o=i:r=i+1}return~(o<<t)}(e,n,1)}const Nc=us(ci("Optional"),8),Oc=us(ci("SkipSelf"),4);function Uc(e){return 128==(128&e.flags)}var Xr=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(Xr||{});const Nd=new Map;let GD=0;const Pd="__ngContext__";function Ut(e,n){cn(n)?(e[Pd]=n[ys],function KD(e){Nd.set(e[ys],e)}(n)):e[Pd]=n}let xd;function Fd(e,n){return xd(e,n)}function ks(e){const n=e[ct];return zt(n)?n[ct]:n}function ey(e){return ny(e[gs])}function ty(e){return ny(e[Bn])}function ny(e){for(;null!==e&&!zt(e);)e=e[Bn];return e}function pi(e,n,t,r,o){if(null!=r){let i,s=!1;zt(r)?i=r:cn(r)&&(s=!0,r=r[ft]);const l=nt(r);0===e&&null!==t?null==o?sy(n,t,l):To(n,t,l,o||null,!0):1===e&&null!==t?To(n,t,l,o||null,!0):2===e?function zc(e,n,t){const r=$c(e,n);r&&function db(e,n,t,r){e.removeChild(n,t,r)}(e,r,n,t)}(n,l,s):3===e&&n.destroyNode(l),null!=i&&function pb(e,n,t,r,o){const i=t[Xn];i!==nt(t)&&pi(n,e,r,i,o);for(let l=kt;l<t.length;l++){const u=t[l];Os(u[ae],u,e,n,r,i)}}(n,e,i,t,o)}}function Vc(e,n,t){return e.createElement(n,t)}function oy(e,n){const t=e[Xo],r=t.indexOf(n);rm(n),t.splice(r,1)}function jc(e,n){if(e.length<=kt)return;const t=kt+n,r=e[t];if(r){const o=r[ms];null!==o&&o!==e&&oy(o,r),n>0&&(e[t-1][Bn]=r[Bn]);const i=Rc(e,kt+n);!function rb(e,n){Os(e,n,n[Re],2,null,null),n[ft]=null,n[Lt]=null}(r[ae],r);const s=i[Jn];null!==s&&s.detachView(i[ae]),r[ct]=null,r[Bn]=null,r[Pe]&=-129}return r}function Ud(e,n){if(!(256&n[Pe])){const t=n[Re];n[vs]&&jg(n[vs]),n[_s]&&jg(n[_s]),t.destroyNode&&Os(e,n,t,3,null,null),function sb(e){let n=e[gs];if(!n)return Hd(e[ae],e);for(;n;){let t=null;if(cn(n))t=n[gs];else{const r=n[kt];r&&(t=r)}if(!t){for(;n&&!n[Bn]&&n!==e;)cn(n)&&Hd(n[ae],n),n=n[ct];null===n&&(n=e),cn(n)&&Hd(n[ae],n),t=n&&n[Bn]}n=t}}(n)}}function Hd(e,n){if(!(256&n[Pe])){n[Pe]&=-129,n[Pe]|=256,function ub(e,n){let t;if(null!=e&&null!=(t=e.destroyHooks))for(let r=0;r<t.length;r+=2){const o=n[t[r]];if(!(o instanceof Is)){const i=t[r+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){const l=o[i[s]],u=i[s+1];er(4,l,u);try{u.call(l)}finally{er(5,l,u)}}else{er(4,o,i);try{i.call(o)}finally{er(5,o,i)}}}}}(e,n),function lb(e,n){const t=e.cleanup,r=n[Zo];if(null!==t)for(let i=0;i<t.length-1;i+=2)if("string"==typeof t[i]){const s=t[i+3];s>=0?r[s]():r[-s].unsubscribe(),i+=2}else t[i].call(r[t[i+1]]);null!==r&&(n[Zo]=null);const o=n[Zr];if(null!==o){n[Zr]=null;for(let i=0;i<o.length;i++)(0,o[i])()}}(e,n),1===n[ae].type&&n[Re].destroy();const t=n[ms];if(null!==t&&zt(n[ct])){t!==n[ct]&&oy(t,n);const r=n[Jn];null!==r&&r.detachView(e)}!function qD(e){Nd.delete(e[ys])}(n)}}function Bd(e,n,t){return function iy(e,n,t){let r=n;for(;null!==r&&40&r.type;)r=(n=r).parent;if(null===r)return t[ft];{const{componentOffset:o}=r;if(o>-1){const{encapsulation:i}=e.data[r.directiveStart+o];if(i===Un.None||i===Un.Emulated)return null}return ln(r,t)}}(e,n.parent,t)}function To(e,n,t,r,o){e.insertBefore(n,t,r,o)}function sy(e,n,t){e.appendChild(n,t)}function ay(e,n,t,r,o){null!==r?To(e,n,t,r,o):sy(e,n,t)}function $c(e,n){return e.parentNode(n)}let Vd,zd,uy=function ly(e,n,t){return 40&e.type?ln(e,t):null};function Gc(e,n,t,r){const o=Bd(e,r,n),i=n[Re],l=function cy(e,n,t){return uy(e,n,t)}(r.parent||n[Lt],r,n);if(null!=o)if(Array.isArray(t))for(let u=0;u<t.length;u++)ay(i,o,t[u],l,!1);else ay(i,o,t,l,!1);void 0!==Vd&&Vd(i,r,n,t,o)}function Ns(e,n){if(null!==n){const t=n.type;if(3&t)return ln(n,e);if(4&t)return jd(-1,e[n.index]);if(8&t){const r=n.child;if(null!==r)return Ns(e,r);{const o=e[n.index];return zt(o)?jd(-1,o):nt(o)}}if(32&t)return Fd(n,e)()||nt(e[n.index]);{const r=hy(e,n);return null!==r?Array.isArray(r)?r[0]:Ns(ks(e[_t]),r):Ns(e,n.next)}}return null}function hy(e,n){return null!==n?e[_t][Lt].projection[n.projection]:null}function jd(e,n){const t=kt+e+1;if(t<n.length){const r=n[t],o=r[ae].firstChild;if(null!==o)return Ns(r,o)}return n[Xn]}function $d(e,n,t,r,o,i,s){for(;null!=t;){const l=r[t.index],u=t.type;if(s&&0===n&&(l&&Ut(nt(l),r),t.flags|=2),32!=(32&t.flags))if(8&u)$d(e,n,t.child,r,o,i,!1),pi(n,e,o,l,i);else if(32&u){const h=Fd(t,r);let p;for(;p=h();)pi(n,e,o,p,i);pi(n,e,o,l,i)}else 16&u?py(e,n,r,t,o,i):pi(n,e,o,l,i);t=s?t.projectionNext:t.next}}function Os(e,n,t,r,o,i){$d(t,r,e.firstChild,n,o,i,!1)}function py(e,n,t,r,o,i){const s=t[_t],u=s[Lt].projection[r.projection];if(Array.isArray(u))for(let h=0;h<u.length;h++)pi(n,e,o,u[h],i);else{let h=u;const p=s[ct];Uc(r)&&(h.flags|=128),$d(e,n,h,p,o,i,!0)}}function gy(e,n,t){""===t?e.removeAttribute(n,"class"):e.setAttribute(n,"class",t)}function my(e,n,t){const{mergedAttrs:r,classes:o,styles:i}=t;null!==r&&td(e,n,r),null!==o&&gy(e,n,o),null!==i&&function mb(e,n,t){e.setAttribute(n,"style",t)}(e,n,i)}class Cy{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Qe})`}}function eo(e){return e instanceof Cy?e.changingThisBreaksApplicationSecurity:e}const Rb=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var yi=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(yi||{});function Zc(e){const n=function Fs(){const e=Z();return e&&e[Yo].sanitizer}();return n?n.sanitize(yi.URL,e)||"":function Ps(e,n){const t=function Sb(e){return e instanceof Cy&&e.getTypeName()||null}(e);if(null!=t&&t!==n){if("ResourceURL"===t&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${t} (see ${Qe})`)}return t===n}(e,"URL")?eo(e):function qd(e){return(e=String(e)).match(Rb)?e:"unsafe:"+e}(oe(e))}class de{constructor(n,t){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=me({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Ls=new de("ENVIRONMENT_INITIALIZER"),My=new de("INJECTOR",-1),Ry=new de("INJECTOR_DEF_TYPES");class Qd{get(n,t=ls){if(t===ls){const r=new Error(`NullInjectorError: No provider for ${g(n)}!`);throw r.name="NullInjectorError",r}return t}}function $b(...e){return{\u0275providers:ky(0,e),\u0275fromNgModule:!0}}function ky(e,...n){const t=[],r=new Set;let o;const i=s=>{t.push(s)};return ui(n,s=>{const l=s;Yc(l,i,[],r)&&(o||=[],o.push(l))}),void 0!==o&&Ny(o,i),t}function Ny(e,n){for(let t=0;t<e.length;t++){const{ngModule:r,providers:o}=e[t];Xd(o,i=>{n(i,r)})}}function Yc(e,n,t,r){if(!(e=k(e)))return!1;let o=null,i=lc(e);const s=!i&&je(e);if(i||s){if(s&&!s.standalone)return!1;o=e}else{const u=e.ngModule;if(i=lc(u),!i)return!1;o=u}const l=r.has(o);if(s){if(l)return!1;if(r.add(o),s.dependencies){const u="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const h of u)Yc(h,n,t,r)}}else{if(!i)return!1;{if(null!=i.imports&&!l){let h;r.add(o);try{ui(i.imports,p=>{Yc(p,n,t,r)&&(h||=[],h.push(p))})}finally{}void 0!==h&&Ny(h,n)}if(!l){const h=Eo(o)||(()=>new o);n({provide:o,useFactory:h,deps:qe},o),n({provide:Ry,useValue:o,multi:!0},o),n({provide:Ls,useValue:()=>ue(o),multi:!0},o)}const u=i.providers;if(null!=u&&!l){const h=e;Xd(u,p=>{n(p,h)})}}}return o!==e&&void 0!==e.providers}function Xd(e,n){for(let t of e)le(t)&&(t=t.\u0275providers),Array.isArray(t)?Xd(t,n):n(t)}const Gb=d({provide:String,useValue:d});function eh(e){return null!==e&&"object"==typeof e&&Gb in e}function Ao(e){return"function"==typeof e}const th=new de("Set Injector scope."),Qc={},Kb={};let nh;function Jc(){return void 0===nh&&(nh=new Qd),nh}class En{}class Xc extends En{get destroyed(){return this._destroyed}constructor(n,t,r,o){super(),this.parent=t,this.source=r,this.scopes=o,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,oh(n,s=>this.processProvider(s)),this.records.set(My,vi(void 0,this)),o.has("environment")&&this.records.set(En,vi(void 0,this));const i=this.records.get(th);null!=i&&"string"==typeof i.value&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(Ry.multi,qe,Be.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const n=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of n)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();const t=qr(this),r=sn(void 0);try{return n()}finally{qr(t),sn(r)}}get(n,t=ls,r=Be.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(_g))return n[_g](this);r=hc(r);const i=qr(this),s=sn(void 0);try{if(!(r&Be.SkipSelf)){let u=this.records.get(n);if(void 0===u){const h=function Qb(e){return"function"==typeof e||"object"==typeof e&&e instanceof de}(n)&&cc(n);u=h&&this.injectableDefInScope(h)?vi(rh(n),Qc):null,this.records.set(n,u)}if(null!=u)return this.hydrate(n,u)}return(r&Be.Self?Jc():this.parent).get(n,t=r&Be.Optional&&t===ls?null:t)}catch(l){if("NullInjectorError"===l.name){if((l[dc]=l[dc]||[]).unshift(g(n)),i)throw l;return function KA(e,n,t,r){const o=e[dc];throw n[mg]&&o.unshift(n[mg]),e.message=function qA(e,n,t,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let o=g(n);if(Array.isArray(n))o=n.map(g).join(" -> ");else if("object"==typeof n){let i=[];for(let s in n)if(n.hasOwnProperty(s)){let l=n[s];i.push(s+":"+("string"==typeof l?JSON.stringify(l):g(l)))}o=`{${i.join(", ")}}`}return`${t}${r?"("+r+")":""}[${o}]: ${e.replace(VA,"\n  ")}`}("\n"+e.message,o,t,r),e.ngTokenPath=o,e[dc]=null,e}(l,n,"R3InjectorError",this.source)}throw l}finally{sn(s),qr(i)}}resolveInjectorInitializers(){const n=qr(this),t=sn(void 0);try{const o=this.get(Ls.multi,qe,Be.Self);for(const i of o)i()}finally{qr(n),sn(t)}}toString(){const n=[],t=this.records;for(const r of t.keys())n.push(g(r));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new q(205,!1)}processProvider(n){let t=Ao(n=k(n))?n:k(n&&n.provide);const r=function Wb(e){return eh(e)?vi(void 0,e.useValue):vi(function xy(e,n,t){let r;if(Ao(e)){const o=k(e);return Eo(o)||rh(o)}if(eh(e))r=()=>k(e.useValue);else if(function Py(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...Ju(e.deps||[]));else if(function Oy(e){return!(!e||!e.useExisting)}(e))r=()=>ue(k(e.useExisting));else{const o=k(e&&(e.useClass||e.provide));if(!function Zb(e){return!!e.deps}(e))return Eo(o)||rh(o);r=()=>new o(...Ju(e.deps))}return r}(e),Qc)}(n);if(Ao(n)||!0!==n.multi)this.records.get(t);else{let o=this.records.get(t);o||(o=vi(void 0,Qc,!0),o.factory=()=>Ju(o.multi),this.records.set(t,o)),t=n,o.multi.push(n)}this.records.set(t,r)}hydrate(n,t){return t.value===Qc&&(t.value=Kb,t.value=t.factory()),"object"==typeof t.value&&t.value&&function Yb(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(n){if(!n.providedIn)return!1;const t=k(n.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(n){const t=this._onDestroyHooks.indexOf(n);-1!==t&&this._onDestroyHooks.splice(t,1)}}function rh(e){const n=cc(e),t=null!==n?n.factory:Eo(e);if(null!==t)return t;if(e instanceof de)throw new q(204,!1);if(e instanceof Function)return function qb(e){const n=e.length;if(n>0)throw function bs(e,n){const t=[];for(let r=0;r<e;r++)t.push(n);return t}(n,"?"),new q(204,!1);const t=function LA(e){return e&&(e[uc]||e[hg])||null}(e);return null!==t?()=>t.factory(e):()=>new e}(e);throw new q(204,!1)}function vi(e,n,t=!1){return{factory:e,value:n,multi:t?[]:void 0}}function oh(e,n){for(const t of e)Array.isArray(t)?oh(t,n):t&&le(t)?oh(t.\u0275providers,n):n(t)}const el=new de("AppId",{providedIn:"root",factory:()=>Jb}),Jb="ng",Fy=new de("Platform Initializer"),So=new de("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Ly=new de("CSP nonce",{providedIn:"root",factory:()=>function mi(){if(void 0!==zd)return zd;if(typeof document<"u")return document;throw new q(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Uy=(e,n,t)=>null;function hh(e,n,t=!1){return Uy(e,n,t)}class cM{}class Vy{}class uM{resolveComponentFactory(n){throw function lM(e){const n=Error(`No component factory found for ${g(e)}.`);return n.ngComponent=e,n}(n)}}let sl=(()=>{class e{static#e=this.NULL=new uM}return e})();function dM(){return Ei(Ot(),Z())}function Ei(e,n){return new wn(ln(e,n))}let wn=(()=>{class e{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=dM}return e})();class $y{}let pM=(()=>{class e{static#e=this.\u0275prov=me({token:e,providedIn:"root",factory:()=>null})}return e})();class Bs{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const gM=new Bs("16.2.10"),gh={};function qy(e,n=null,t=null,r){const o=Wy(e,n,t,r);return o.resolveInjectorInitializers(),o}function Wy(e,n=null,t=null,r,o=new Set){const i=[t||qe,$b(e)];return r=r||("object"==typeof e?void 0:g(e)),new Xc(i,n||Jc(),r||null,o)}let In=(()=>{class e{static#e=this.THROW_IF_NOT_FOUND=ls;static#t=this.NULL=new Qd;static create(t,r){if(Array.isArray(t))return qy({name:""},r,t,"");{const o=t.name??"";return qy({name:o},t.parent,t.providers,o)}}static#n=this.\u0275prov=me({token:e,providedIn:"any",factory:()=>ue(My)});static#r=this.__NG_ELEMENT_ID__=-1}return e})();function yh(e){return e.ngOriginalError}class Dr{constructor(){this._console=console}handleError(n){const t=this._findOriginalError(n);this._console.error("ERROR",n),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(n){let t=n&&yh(n);for(;t&&yh(t);)t=yh(t);return t||null}}function _h(e){return n=>{setTimeout(e,void 0,n)}}const pt=class wM extends at{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,t,r){let o=n,i=t||(()=>null),s=r;if(n&&"object"==typeof n){const u=n;o=u.next?.bind(u),i=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(i=_h(i),o&&(o=_h(o)),s&&(s=_h(s)));const l=super.subscribe({next:o,error:i,complete:s});return n instanceof L&&n.add(l),l}};function Yy(...e){}class rt{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new pt(!1),this.onMicrotaskEmpty=new pt(!1),this.onStable=new pt(!1),this.onError=new pt(!1),typeof Zone>"u")throw new q(908,!1);Zone.assertZonePatched();const o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!r&&t,o.shouldCoalesceRunChangeDetection=r,o.lastRequestAnimationFrameId=-1,o.nativeRequestAnimationFrame=function IM(){const e="function"==typeof tt.requestAnimationFrame;let n=tt[e?"requestAnimationFrame":"setTimeout"],t=tt[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&n&&t){const r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r);const o=t[Zone.__symbol__("OriginalDelegate")];o&&(t=o)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function SM(e){const n=()=>{!function AM(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(tt,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Eh(e),e.isCheckStableRunning=!0,Ch(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Eh(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,o,i,s,l)=>{if(function bM(e){return!(!Array.isArray(e)||1!==e.length)&&!0===e[0].data?.__ignore_ng_zone__}(l))return t.invokeTask(o,i,s,l);try{return Qy(e),t.invokeTask(o,i,s,l)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===i.type||e.shouldCoalesceRunChangeDetection)&&n(),Jy(e)}},onInvoke:(t,r,o,i,s,l,u)=>{try{return Qy(e),t.invoke(o,i,s,l,u)}finally{e.shouldCoalesceRunChangeDetection&&n(),Jy(e)}},onHasTask:(t,r,o,i)=>{t.hasTask(o,i),r===o&&("microTask"==i.change?(e._hasPendingMicrotasks=i.microTask,Eh(e),Ch(e)):"macroTask"==i.change&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:(t,r,o,i)=>(t.handleError(o,i),e.runOutsideAngular(()=>e.onError.emit(i)),!1)})}(o)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!rt.isInAngularZone())throw new q(909,!1)}static assertNotInAngularZone(){if(rt.isInAngularZone())throw new q(909,!1)}run(n,t,r){return this._inner.run(n,t,r)}runTask(n,t,r,o){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+o,n,TM,Yy,Yy);try{return i.runTask(s,t,r)}finally{i.cancelTask(s)}}runGuarded(n,t,r){return this._inner.runGuarded(n,t,r)}runOutsideAngular(n){return this._outer.run(n)}}const TM={};function Ch(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Eh(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function Qy(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Jy(e){e._nesting--,Ch(e)}class DM{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new pt,this.onMicrotaskEmpty=new pt,this.onStable=new pt,this.onError=new pt}run(n,t,r){return n.apply(t,r)}runGuarded(n,t,r){return n.apply(t,r)}runOutsideAngular(n){return n()}runTask(n,t,r,o){return n.apply(t,r)}}const Xy=new de("",{providedIn:"root",factory:ev});function ev(){const e=he(rt);let n=!0;return function Gu(...e){const n=zr(e),t=function Bu(e,n){return"number"==typeof Gr(e)?e.pop():n}(e,1/0),r=e;return r.length?1===r.length?jt(r[0]):jr(t)(Ke(r,n)):on}(new Ee(o=>{n=e.isStable&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks,e.runOutsideAngular(()=>{o.next(n),o.complete()})}),new Ee(o=>{let i;e.runOutsideAngular(()=>{i=e.onStable.subscribe(()=>{rt.assertNotInAngularZone(),queueMicrotask(()=>{!n&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks&&(n=!0,o.next(!0))})})});const s=e.onUnstable.subscribe(()=>{rt.assertInAngularZone(),n&&(n=!1,e.runOutsideAngular(()=>{o.next(!1)}))});return()=>{i.unsubscribe(),s.unsubscribe()}}).pipe(ac()))}function br(e){return e instanceof Function?e():e}let wh=(()=>{class e{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=me({token:e,providedIn:"root",factory:()=>new e})}return e})();function Vs(e){for(;e;){e[Pe]|=64;const n=ks(e);if(od(e)&&!n)return e;e=n}return null}const iv=new de("",{providedIn:"root",factory:()=>!1});let cl=null;function lv(e,n){return e[n]??hv()}function uv(e,n){const t=hv();t.producerNode?.length&&(e[n]=cl,t.lView=e,cl=dv())}const UM={...Fg,consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{Vs(e.lView)},lView:null};function dv(){return Object.create(UM)}function hv(){return cl??=dv(),cl}const Ne={};function jn(e){fv($e(),Z(),qt()+e,!1)}function fv(e,n,t,r){if(!r)if(3==(3&n[Pe])){const i=e.preOrderCheckHooks;null!==i&&Ic(n,i,t)}else{const i=e.preOrderHooks;null!==i&&Tc(n,i,0,t)}wo(t)}function Q(e,n=Be.Default){const t=Z();return null===t?ue(e,n):Dm(Ot(),t,k(e),n)}function ll(e,n,t,r,o,i,s,l,u,h,p){const v=n.blueprint.slice();return v[ft]=o,v[Pe]=140|r,(null!==h||e&&2048&e[Pe])&&(v[Pe]|=2048),nm(v),v[ct]=v[Qo]=e,v[vt]=t,v[Yo]=s||e&&e[Yo],v[Re]=l||e&&e[Re],v[Wr]=u||e&&e[Wr]||null,v[Lt]=i,v[ys]=function zD(){return GD++}(),v[Cr]=p,v[Ng]=h,v[_t]=2==n.type?e[_t]:v,v}function Ti(e,n,t,r,o){let i=e.data[n];if(null===i)i=function Ih(e,n,t,r,o){const i=cm(),s=hd(),u=e.data[n]=function KM(e,n,t,r,o,i){let s=n?n.injectorIndex:-1,l=0;return function ni(){return null!==Ae.skipHydrationRootTNode}()&&(l|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:l,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?i:i&&i.parent,t,n,r,o);return null===e.firstChild&&(e.firstChild=u),null!==i&&(s?null==i.child&&null!==u.parent&&(i.child=u):null===i.next&&(i.next=u,u.prev=i)),u}(e,n,t,r,o),function GS(){return Ae.lFrame.inI18n}()&&(i.flags|=32);else if(64&i.type){i.type=t,i.value=r,i.attrs=o;const s=function ws(){const e=Ae.lFrame,n=e.currentTNode;return e.isParent?n:n.parent}();i.injectorIndex=null===s?-1:s.injectorIndex}return tr(i,!0),i}function js(e,n,t,r){if(0===t)return-1;const o=n.length;for(let i=0;i<t;i++)n.push(r),e.blueprint.push(r),e.data.push(null);return o}function gv(e,n,t,r,o){const i=lv(n,vs),s=qt(),l=2&r;try{wo(-1),l&&n.length>Ve&&fv(e,n,Ve,!1),er(l?2:0,o);const h=l?i:null,p=sd(h);try{null!==h&&(h.dirty=!1),t(r,o)}finally{ad(h,p)}}finally{l&&null===n[vs]&&uv(n,vs),wo(s),er(l?3:1,o)}}function Th(e,n,t){if(rd(n)){const r=Mn(null);try{const i=n.directiveEnd;for(let s=n.directiveStart;s<i;s++){const l=e.data[s];l.contentQueries&&l.contentQueries(1,t[s],s)}}finally{Mn(r)}}}function Ah(e,n,t){am()&&(function XM(e,n,t,r){const o=t.directiveStart,i=t.directiveEnd;Co(t)&&function sR(e,n,t){const r=ln(n,e),o=mv(t);let s=16;t.signals?s=4096:t.onPush&&(s=64);const l=ul(e,ll(e,o,null,s,r,n,null,e[Yo].rendererFactory.createRenderer(r,t),null,null,null));e[n.index]=l}(n,t,e.data[o+t.componentOffset]),e.firstCreatePass||Sc(t,n),Ut(r,n);const s=t.initialInputs;for(let l=o;l<i;l++){const u=e.data[l],h=Io(n,e,l,t);Ut(h,n),null!==s&&aR(0,l-o,h,u,0,s),Vn(u)&&(_n(t.index,n)[vt]=Io(n,e,l,t))}}(e,n,t,ln(t,n)),64==(64&t.flags)&&Ev(e,n,t))}function Sh(e,n,t=ln){const r=n.localNames;if(null!==r){let o=n.index+1;for(let i=0;i<r.length;i+=2){const s=r[i+1],l=-1===s?t(n,e):e[s];e[o++]=l}}}function mv(e){const n=e.tView;return null===n||n.incompleteFirstPass?e.tView=Dh(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):n}function Dh(e,n,t,r,o,i,s,l,u,h,p){const v=Ve+r,E=v+o,D=function BM(e,n){const t=[];for(let r=0;r<n;r++)t.push(r<e?null:Ne);return t}(v,E),x="function"==typeof h?h():h;return D[ae]={type:e,blueprint:D,template:t,queries:null,viewQuery:l,declTNode:n,data:D.slice().fill(null,v),bindingStartIndex:v,expandoStartIndex:E,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof i?i():i,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:x,incompleteFirstPass:!1,ssrId:p}}let yv=e=>null;function vv(e,n,t,r){for(let o in e)if(e.hasOwnProperty(o)){t=null===t?{}:t;const i=e[o];null===r?_v(t,n,o,i):r.hasOwnProperty(o)&&_v(t,n,r[o],i)}return t}function _v(e,n,t,r){e.hasOwnProperty(t)?e[t].push(n,r):e[t]=[n,r]}function Tn(e,n,t,r,o,i,s,l){const u=ln(n,t);let p,h=n.inputs;!l&&null!=h&&(p=h[r])?(Nh(e,t,p,r,o),Co(n)&&function ZM(e,n){const t=_n(n,e);16&t[Pe]||(t[Pe]|=64)}(t,n.index)):3&n.type&&(r=function WM(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(r),o=null!=s?s(o,n.value||"",r):o,i.setProperty(u,r,o))}function bh(e,n,t,r){if(am()){const o=null===r?null:{"":-1},i=function tR(e,n){const t=e.directiveRegistry;let r=null,o=null;if(t)for(let i=0;i<t.length;i++){const s=t[i];if(Sg(n,s.selectors,!1))if(r||(r=[]),Vn(s))if(null!==s.findHostDirectiveDefs){const l=[];o=o||new Map,s.findHostDirectiveDefs(s,l,o),r.unshift(...l,s),Mh(e,n,l.length)}else r.unshift(s),Mh(e,n,0);else o=o||new Map,s.findHostDirectiveDefs?.(s,r,o),r.push(s)}return null===r?null:[r,o]}(e,t);let s,l;null===i?s=l=null:[s,l]=i,null!==s&&Cv(e,n,t,s,o,l),o&&function nR(e,n,t){if(n){const r=e.localNames=[];for(let o=0;o<n.length;o+=2){const i=t[n[o+1]];if(null==i)throw new q(-301,!1);r.push(n[o],i)}}}(t,r,o)}t.mergedAttrs=hs(t.mergedAttrs,t.attrs)}function Cv(e,n,t,r,o,i){for(let h=0;h<r.length;h++)Td(Sc(t,n),e,r[h].type);!function oR(e,n,t){e.flags|=1,e.directiveStart=n,e.directiveEnd=n+t,e.providerIndexes=n}(t,e.data.length,r.length);for(let h=0;h<r.length;h++){const p=r[h];p.providersResolver&&p.providersResolver(p)}let s=!1,l=!1,u=js(e,n,r.length,null);for(let h=0;h<r.length;h++){const p=r[h];t.mergedAttrs=hs(t.mergedAttrs,p.hostAttrs),iR(e,t,n,u,p),rR(u,p,o),null!==p.contentQueries&&(t.flags|=4),(null!==p.hostBindings||null!==p.hostAttrs||0!==p.hostVars)&&(t.flags|=64);const v=p.type.prototype;!s&&(v.ngOnChanges||v.ngOnInit||v.ngDoCheck)&&((e.preOrderHooks??=[]).push(t.index),s=!0),!l&&(v.ngOnChanges||v.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(t.index),l=!0),u++}!function qM(e,n,t){const o=n.directiveEnd,i=e.data,s=n.attrs,l=[];let u=null,h=null;for(let p=n.directiveStart;p<o;p++){const v=i[p],E=t?t.get(v):null,x=E?E.outputs:null;u=vv(v.inputs,p,u,E?E.inputs:null),h=vv(v.outputs,p,h,x);const U=null===u||null===s||Ag(n)?null:cR(u,p,s);l.push(U)}null!==u&&(u.hasOwnProperty("class")&&(n.flags|=8),u.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=l,n.inputs=u,n.outputs=h}(e,t,i)}function Ev(e,n,t){const r=t.directiveStart,o=t.directiveEnd,i=t.index,s=function KS(){return Ae.lFrame.currentDirectiveIndex}();try{wo(i);for(let l=r;l<o;l++){const u=e.data[l],h=n[l];pd(l),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&eR(u,h)}}finally{wo(-1),pd(s)}}function eR(e,n){null!==e.hostBindings&&e.hostBindings(1,n)}function Mh(e,n,t){n.componentOffset=t,(e.components??=[]).push(n.index)}function rR(e,n,t){if(t){if(n.exportAs)for(let r=0;r<n.exportAs.length;r++)t[n.exportAs[r]]=e;Vn(n)&&(t[""]=e)}}function iR(e,n,t,r,o){e.data[r]=o;const i=o.factory||(o.factory=Eo(o.type)),s=new Is(i,Vn(o),Q);e.blueprint[r]=s,t[r]=s,function QM(e,n,t,r,o){const i=o.hostBindings;if(i){let s=e.hostBindingOpCodes;null===s&&(s=e.hostBindingOpCodes=[]);const l=~n.index;(function JM(e){let n=e.length;for(;n>0;){const t=e[--n];if("number"==typeof t&&t<0)return t}return 0})(s)!=l&&s.push(l),s.push(t,r,i)}}(e,n,r,js(e,t,o.hostVars,Ne),o)}function aR(e,n,t,r,o,i){const s=i[n];if(null!==s)for(let l=0;l<s.length;)wv(r,t,s[l++],s[l++],s[l++])}function wv(e,n,t,r,o){const i=Mn(null);try{const s=e.inputTransforms;null!==s&&s.hasOwnProperty(r)&&(o=s[r].call(n,o)),null!==e.setInput?e.setInput(n,o,t,r):n[r]=o}finally{Mn(i)}}function cR(e,n,t){let r=null,o=0;for(;o<t.length;){const i=t[o];if(0!==i)if(5!==i){if("number"==typeof i)break;if(e.hasOwnProperty(i)){null===r&&(r=[]);const s=e[i];for(let l=0;l<s.length;l+=2)if(s[l]===n){r.push(i,s[l+1],t[o+1]);break}}o+=2}else o+=2;else o+=4}return r}function Iv(e,n,t,r){return[e,!0,!1,n,null,0,r,t,null,null,null]}function Tv(e,n){const t=e.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const i=t[r+1];if(-1!==i){const s=e.data[i];md(t[r]),s.contentQueries(2,n[i],i)}}}function ul(e,n){return e[gs]?e[kg][Bn]=n:e[gs]=n,e[kg]=n,n}function kh(e,n,t){md(0);const r=Mn(null);try{n(e,t)}finally{Mn(r)}}function bv(e,n){const t=e[Wr],r=t?t.get(Dr,null):null;r&&r.handleError(n)}function Nh(e,n,t,r,o){for(let i=0;i<t.length;){const s=t[i++],l=t[i++];wv(e.data[s],n[s],r,l,o)}}function lR(e,n){const t=_n(n,e),r=t[ae];!function uR(e,n){for(let t=n.length;t<e.blueprint.length;t++)n.push(e.blueprint[t])}(r,t);const o=t[ft];null!==o&&null===t[Cr]&&(t[Cr]=hh(o,t[Wr])),Oh(r,t,t[vt])}function Oh(e,n,t){yd(n);try{const r=e.viewQuery;null!==r&&kh(1,r,t);const o=e.template;null!==o&&gv(e,n,o,1,t),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&Tv(e,n),e.staticViewQueries&&kh(2,e.viewQuery,t);const i=e.components;null!==i&&function dR(e,n){for(let t=0;t<n.length;t++)lR(e,n[t])}(n,i)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{n[Pe]&=-5,vd()}}let Mv=(()=>{class e{constructor(){this.all=new Set,this.queue=new Map}create(t,r,o){const i=typeof Zone>"u"?null:Zone.current,s=function wS(e,n,t){const r=Object.create(IS);t&&(r.consumerAllowSignalWrites=!0),r.fn=e,r.schedule=n;const o=s=>{r.cleanupFn=s};return r.ref={notify:()=>Bg(r),run:()=>{if(r.dirty=!1,r.hasRun&&!Vg(r))return;r.hasRun=!0;const s=sd(r);try{r.cleanupFn(),r.cleanupFn=Zg,r.fn(o)}finally{ad(r,s)}},cleanup:()=>r.cleanupFn()},r.ref}(t,h=>{this.all.has(h)&&this.queue.set(h,i)},o);let l;this.all.add(s),s.notify();const u=()=>{s.cleanup(),l?.(),this.all.delete(s),this.queue.delete(s)};return l=r?.onDestroy(u),{destroy:u}}flush(){if(0!==this.queue.size)for(const[t,r]of this.queue)this.queue.delete(t),r?r.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=me({token:e,providedIn:"root",factory:()=>new e})}return e})();function dl(e,n,t){let r=t?e.styles:null,o=t?e.classes:null,i=0;if(null!==n)for(let s=0;s<n.length;s++){const l=n[s];"number"==typeof l?i=l:1==i?o=_(o,l):2==i&&(r=_(r,l+": "+n[++s]+";"))}t?e.styles=r:e.stylesWithoutHost=r,t?e.classes=o:e.classesWithoutHost=o}function $s(e,n,t,r,o=!1){for(;null!==t;){const i=n[t.index];null!==i&&r.push(nt(i)),zt(i)&&Rv(i,r);const s=t.type;if(8&s)$s(e,n,t.child,r);else if(32&s){const l=Fd(t,n);let u;for(;u=l();)r.push(u)}else if(16&s){const l=hy(n,t);if(Array.isArray(l))r.push(...l);else{const u=ks(n[_t]);$s(u[ae],u,l,r,!0)}}t=o?t.projectionNext:t.next}return r}function Rv(e,n){for(let t=kt;t<e.length;t++){const r=e[t],o=r[ae].firstChild;null!==o&&$s(r[ae],r,o,n)}e[Xn]!==e[ft]&&n.push(e[Xn])}function hl(e,n,t,r=!0){const o=n[Yo],i=o.rendererFactory,s=o.afterRenderEventManager;i.begin?.(),s?.begin();try{kv(e,n,e.template,t)}catch(u){throw r&&bv(n,u),u}finally{i.end?.(),o.effectManager?.flush(),s?.end()}}function kv(e,n,t,r){const o=n[Pe];if(256!=(256&o)){n[Yo].effectManager?.flush(),yd(n);try{nm(n),function um(e){return Ae.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==t&&gv(e,n,t,2,r);const s=3==(3&o);if(s){const h=e.preOrderCheckHooks;null!==h&&Ic(n,h,null)}else{const h=e.preOrderHooks;null!==h&&Tc(n,h,0,null),_d(n,0)}if(function pR(e){for(let n=ey(e);null!==n;n=ty(n)){if(!n[Og])continue;const t=n[Xo];for(let r=0;r<t.length;r++){OS(t[r])}}}(n),Nv(n,2),null!==e.contentQueries&&Tv(e,n),s){const h=e.contentCheckHooks;null!==h&&Ic(n,h)}else{const h=e.contentHooks;null!==h&&Tc(n,h,1),_d(n,1)}!function HM(e,n){const t=e.hostBindingOpCodes;if(null===t)return;const r=lv(n,_s);try{for(let o=0;o<t.length;o++){const i=t[o];if(i<0)wo(~i);else{const s=i,l=t[++o],u=t[++o];zS(l,s),r.dirty=!1;const h=sd(r);try{u(2,n[s])}finally{ad(r,h)}}}}finally{null===n[_s]&&uv(n,_s),wo(-1)}}(e,n);const l=e.components;null!==l&&Pv(n,l,0);const u=e.viewQuery;if(null!==u&&kh(2,u,r),s){const h=e.viewCheckHooks;null!==h&&Ic(n,h)}else{const h=e.viewHooks;null!==h&&Tc(n,h,2),_d(n,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),n[Pe]&=-73,rm(n)}finally{vd()}}}function Nv(e,n){for(let t=ey(e);null!==t;t=ty(t))for(let r=kt;r<t.length;r++)Ov(t[r],n)}function gR(e,n,t){Ov(_n(n,e),t)}function Ov(e,n){if(!function kS(e){return 128==(128&e[Pe])}(e))return;const t=e[ae],r=e[Pe];if(80&r&&0===n||1024&r||2===n)kv(t,e,t.template,e[vt]);else if(e[ps]>0){Nv(e,1);const o=t.components;null!==o&&Pv(e,o,1)}}function Pv(e,n,t){for(let r=0;r<n.length;r++)gR(e,n[r],t)}class Gs{get rootNodes(){const n=this._lView,t=n[ae];return $s(t,n,t.firstChild,[])}constructor(n,t){this._lView=n,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[vt]}set context(n){this._lView[vt]=n}get destroyed(){return 256==(256&this._lView[Pe])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[ct];if(zt(n)){const t=n[8],r=t?t.indexOf(this):-1;r>-1&&(jc(n,r),Rc(t,r))}this._attachedToViewContainer=!1}Ud(this._lView[ae],this._lView)}onDestroy(n){!function im(e,n){if(256==(256&e[Pe]))throw new q(911,!1);null===e[Zr]&&(e[Zr]=[]),e[Zr].push(n)}(this._lView,n)}markForCheck(){Vs(this._cdRefInjectingView||this._lView)}detach(){this._lView[Pe]&=-129}reattach(){this._lView[Pe]|=128}detectChanges(){hl(this._lView[ae],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new q(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ib(e,n){Os(e,n,n[Re],2,null,null)}(this._lView[ae],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new q(902,!1);this._appRef=n}}class mR extends Gs{constructor(n){super(n),this._view=n}detectChanges(){const n=this._view;hl(n[ae],n,n[vt],!1)}checkNoChanges(){}get context(){return null}}class xv extends sl{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const t=je(n);return new zs(t,this.ngModule)}}function Fv(e){const n=[];for(let t in e)e.hasOwnProperty(t)&&n.push({propName:e[t],templateName:t});return n}class vR{constructor(n,t){this.injector=n,this.parentInjector=t}get(n,t,r){r=hc(r);const o=this.injector.get(n,gh,r);return o!==gh||t===gh?o:this.parentInjector.get(n,t,r)}}class zs extends Vy{get inputs(){const n=this.componentDef,t=n.inputTransforms,r=Fv(n.inputs);if(null!==t)for(const o of r)t.hasOwnProperty(o.propName)&&(o.transform=t[o.propName]);return r}get outputs(){return Fv(this.componentDef.outputs)}constructor(n,t){super(),this.componentDef=n,this.ngModule=t,this.componentType=n.type,this.selector=function rS(e){return e.map(nS).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!t}create(n,t,r,o){let i=(o=o||this.ngModule)instanceof En?o:o?.injector;i&&null!==this.componentDef.getStandaloneInjector&&(i=this.componentDef.getStandaloneInjector(i)||i);const s=i?new vR(n,i):n,l=s.get($y,null);if(null===l)throw new q(407,!1);const v={rendererFactory:l,sanitizer:s.get(pM,null),effectManager:s.get(Mv,null),afterRenderEventManager:s.get(wh,null)},E=l.createRenderer(null,this.componentDef),D=this.componentDef.selectors[0][0]||"div",x=r?function VM(e,n,t,r){const i=r.get(iv,!1)||t===Un.ShadowDom,s=e.selectRootElement(n,i);return function jM(e){yv(e)}(s),s}(E,r,this.componentDef.encapsulation,s):Vc(E,D,function yR(e){const n=e.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(D)),ee=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let V=null;null!==x&&(V=hh(x,s,!0));const fe=Dh(0,null,null,1,0,null,null,null,null,null,null),_e=ll(null,fe,null,ee,null,null,v,E,s,null,V);let Le,Mt;yd(_e);try{const pr=this.componentDef;let Ho,cg=null;pr.findHostDirectiveDefs?(Ho=[],cg=new Map,pr.findHostDirectiveDefs(pr,Ho,cg),Ho.push(pr)):Ho=[pr];const bB=function CR(e,n){const t=e[ae],r=Ve;return e[r]=n,Ti(t,r,2,"#host",null)}(_e,x),MB=function ER(e,n,t,r,o,i,s){const l=o[ae];!function wR(e,n,t,r){for(const o of e)n.mergedAttrs=hs(n.mergedAttrs,o.hostAttrs);null!==n.mergedAttrs&&(dl(n,n.mergedAttrs,!0),null!==t&&my(r,t,n))}(r,e,n,s);let u=null;null!==n&&(u=hh(n,o[Wr]));const h=i.rendererFactory.createRenderer(n,t);let p=16;t.signals?p=4096:t.onPush&&(p=64);const v=ll(o,mv(t),null,p,o[e.index],e,i,h,null,null,u);return l.firstCreatePass&&Mh(l,e,r.length-1),ul(o,v),o[e.index]=v}(bB,x,pr,Ho,_e,v,E);Mt=tm(fe,Ve),x&&function TR(e,n,t,r){if(r)td(e,t,["ng-version",gM.full]);else{const{attrs:o,classes:i}=function oS(e){const n=[],t=[];let r=1,o=2;for(;r<e.length;){let i=e[r];if("string"==typeof i)2===o?""!==i&&n.push(i,e[++r]):8===o&&t.push(i);else{if(!Hn(o))break;o=i}r++}return{attrs:n,classes:t}}(n.selectors[0]);o&&td(e,t,o),i&&i.length>0&&gy(e,t,i.join(" "))}}(E,pr,x,r),void 0!==t&&function AR(e,n,t){const r=e.projection=[];for(let o=0;o<n.length;o++){const i=t[o];r.push(null!=i?Array.from(i):null)}}(Mt,this.ngContentSelectors,t),Le=function IR(e,n,t,r,o,i){const s=Ot(),l=o[ae],u=ln(s,o);Cv(l,o,s,t,null,r);for(let p=0;p<t.length;p++)Ut(Io(o,l,s.directiveStart+p,s),o);Ev(l,o,s),u&&Ut(u,o);const h=Io(o,l,s.directiveStart+s.componentOffset,s);if(e[vt]=o[vt]=h,null!==i)for(const p of i)p(h,n);return Th(l,s,e),h}(MB,pr,Ho,cg,_e,[SR]),Oh(fe,_e,null)}finally{vd()}return new _R(this.componentType,Le,Ei(Mt,_e),_e,Mt)}}class _R extends cM{constructor(n,t,r,o,i){super(),this.location=r,this._rootLView=o,this._tNode=i,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new mR(o),this.componentType=n}setInput(n,t){const r=this._tNode.inputs;let o;if(null!==r&&(o=r[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),t))return;const i=this._rootLView;Nh(i[ae],i,o,n,t),this.previousInputValues.set(n,t),Vs(_n(this._tNode.index,i))}}get injector(){return new Wt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function SR(){const e=Ot();wc(Z()[ae],e)}function pl(e){return!!function Ph(e){return null!==e&&("function"==typeof e||"object"==typeof e)}(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function Ht(e,n,t){return!Object.is(e[n],t)&&(e[n]=t,!0)}function Si(e,n,t,r){return Ht(e,ri(),t)?n+oe(t)+r:Ne}function to(e,n,t,r,o,i,s,l){const u=Z(),h=$e(),p=e+Ve,v=h.firstCreatePass?function tk(e,n,t,r,o,i,s,l,u){const h=n.consts,p=Ti(n,e,4,s||null,Qr(h,l));bh(n,t,p,Qr(h,u)),wc(n,p);const v=p.tView=Dh(2,p,r,o,i,n.directiveRegistry,n.pipeRegistry,null,n.schemas,h,null);return null!==n.queries&&(n.queries.template(n,p),v.queries=n.queries.embeddedTView(p)),p}(p,h,u,n,t,r,o,i,s):h.data[p];tr(v,!1);const E=e_(h,u,v,e);Ec()&&Gc(h,u,E,v),Ut(E,u),ul(u,u[p]=Iv(E,u,E,v)),yc(v)&&Ah(h,u,v),null!=s&&Sh(u,v,l)}let e_=function t_(e,n,t,r){return Jr(!0),n[Re].createComment("")};function _l(e){return function ti(e,n){return e[n]}(function $S(){return Ae.lFrame.contextLView}(),Ve+e)}function sr(e,n,t){const r=Z();return Ht(r,ri(),n)&&Tn($e(),dt(),r,e,n,r[Re],t,!1),sr}function Bh(e,n,t,r,o){const s=o?"class":"style";Nh(e,t,n.inputs[s],s,r)}function ht(e,n,t,r){const o=Z(),i=$e(),s=Ve+e,l=o[Re],u=i.firstCreatePass?function ik(e,n,t,r,o,i){const s=n.consts,u=Ti(n,e,2,r,Qr(s,o));return bh(n,t,u,Qr(s,i)),null!==u.attrs&&dl(u,u.attrs,!1),null!==u.mergedAttrs&&dl(u,u.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,u),u}(s,i,o,n,t,r):i.data[s],h=n_(i,o,u,l,n,e);o[s]=h;const p=yc(u);return tr(u,!0),my(l,h,u),32!=(32&u.flags)&&Ec()&&Gc(i,o,h,u),0===function xS(){return Ae.lFrame.elementDepthCount}()&&Ut(h,o),function FS(){Ae.lFrame.elementDepthCount++}(),p&&(Ah(i,o,u),Th(i,u,o)),null!==r&&Sh(o,u),ht}function St(){let e=Ot();hd()?function fd(){Ae.lFrame.isParent=!1}():(e=e.parent,tr(e,!1));const n=e;(function US(e){return Ae.skipHydrationRootTNode===e})(n)&&function jS(){Ae.skipHydrationRootTNode=null}(),function LS(){Ae.lFrame.elementDepthCount--}();const t=$e();return t.firstCreatePass&&(wc(t,e),rd(e)&&t.queries.elementEnd(e)),null!=n.classesWithoutHost&&function rD(e){return 0!=(8&e.flags)}(n)&&Bh(t,n,Z(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function oD(e){return 0!=(16&e.flags)}(n)&&Bh(t,n,Z(),n.stylesWithoutHost,!1),St}function no(e,n,t,r){return ht(e,n,t,r),St(),no}let n_=(e,n,t,r,o,i)=>(Jr(!0),Vc(r,o,function vm(){return Ae.lFrame.currentNamespace}()));function Ys(){return Z()}function Qs(e){return!!e&&"function"==typeof e.then}function i_(e){return!!e&&"function"==typeof e.subscribe}function Ct(e,n,t,r){const o=Z(),i=$e(),s=Ot();return function a_(e,n,t,r,o,i,s){const l=yc(r),h=e.firstCreatePass&&function Sv(e){return e.cleanup||(e.cleanup=[])}(e),p=n[vt],v=function Av(e){return e[Zo]||(e[Zo]=[])}(n);let E=!0;if(3&r.type||s){const U=ln(r,n),$=s?s(U):U,ee=v.length,V=s?_e=>s(nt(_e[r.index])):r.index;let fe=null;if(!s&&l&&(fe=function dk(e,n,t,r){const o=e.cleanup;if(null!=o)for(let i=0;i<o.length-1;i+=2){const s=o[i];if(s===t&&o[i+1]===r){const l=n[Zo],u=o[i+2];return l.length>u?l[u]:null}"string"==typeof s&&(i+=2)}return null}(e,n,o,r.index)),null!==fe)(fe.__ngLastListenerFn__||fe).__ngNextListenerFn__=i,fe.__ngLastListenerFn__=i,E=!1;else{i=l_(r,n,p,i,!1);const _e=t.listen($,o,i);v.push(i,_e),h&&h.push(o,V,ee,ee+1)}}else i=l_(r,n,p,i,!1);const D=r.outputs;let x;if(E&&null!==D&&(x=D[o])){const U=x.length;if(U)for(let $=0;$<U;$+=2){const Le=n[x[$]][x[$+1]].subscribe(i),Mt=v.length;v.push(i,Le),h&&h.push(o,r.index,Mt,-(Mt+1))}}}(i,o,o[Re],s,e,n,r),Ct}function c_(e,n,t,r){try{return er(6,n,t),!1!==t(r)}catch(o){return bv(e,o),!1}finally{er(7,n,t)}}function l_(e,n,t,r,o){return function i(s){if(s===Function)return r;Vs(e.componentOffset>-1?_n(e.index,n):n);let u=c_(n,t,r,s),h=i.__ngNextListenerFn__;for(;h;)u=c_(n,t,h,s)&&u,h=h.__ngNextListenerFn__;return o&&!1===u&&s.preventDefault(),u}}function It(e=1){return function WS(e){return(Ae.lFrame.contextLView=function ZS(e,n){for(;e>0;)n=n[Qo],e--;return n}(e,Ae.lFrame.contextLView))[vt]}(e)}function $h(e,n,t){return Cl(e,"",n,"",t),$h}function Cl(e,n,t,r,o){const i=Z(),s=Si(i,n,t,r);return s!==Ne&&Tn($e(),dt(),i,e,s,i[Re],o,!1),Cl}function El(e,n){return e<<17|n<<2}function ro(e){return e>>17&32767}function Gh(e){return 2|e}function bo(e){return(131068&e)>>2}function zh(e,n){return-131069&e|n<<2}function Kh(e){return 1|e}function v_(e,n,t,r,o){const i=e[t+1],s=null===n;let l=r?ro(i):bo(i),u=!1;for(;0!==l&&(!1===u||s);){const p=e[l+1];Ck(e[l],n)&&(u=!0,e[l+1]=r?Kh(p):Gh(p)),l=r?ro(p):bo(p)}u&&(e[t+1]=r?Gh(i):Kh(i))}function Ck(e,n){return null===e||null==n||(Array.isArray(e)?e[1]:e)===n||!(!Array.isArray(e)||"string"!=typeof n)&&di(e,n)>=0}const Dt={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function __(e){return e.substring(Dt.key,Dt.keyEnd)}function Ek(e){return e.substring(Dt.value,Dt.valueEnd)}function E_(e,n){const t=Dt.textEnd;let r=Dt.key=Pi(e,n,t);return t===r?-1:(r=Dt.keyEnd=function Ak(e,n,t){let r;for(;n<t&&(45===(r=e.charCodeAt(n))||95===r||(-33&r)>=65&&(-33&r)<=90||r>=48&&r<=57);)n++;return n}(e,r,t),r=I_(e,r,t),r=Dt.value=Pi(e,r,t),r=Dt.valueEnd=function Sk(e,n,t){let r=-1,o=-1,i=-1,s=n,l=s;for(;s<t;){const u=e.charCodeAt(s++);if(59===u)return l;34===u||39===u?l=s=T_(e,u,s,t):n===s-4&&85===i&&82===o&&76===r&&40===u?l=s=T_(e,41,s,t):u>32&&(l=s),i=o,o=r,r=-33&u}return l}(e,r,t),I_(e,r,t))}function Pi(e,n,t){for(;n<t&&e.charCodeAt(n)<=32;)n++;return n}function I_(e,n,t,r){return(n=Pi(e,n,t))<t&&n++,n}function T_(e,n,t,r){let o=-1,i=t;for(;i<r;){const s=e.charCodeAt(i++);if(s==n&&92!==o)return i;o=92==s&&92===o?0:s}throw new Error}function ar(e){!function Gn(e,n,t,r){const o=$e(),i=function Tr(e){const n=Ae.lFrame,t=n.bindingIndex;return n.bindingIndex=n.bindingIndex+e,t}(2);o.firstUpdatePass&&function D_(e,n,t,r){const o=e.data;if(null===o[t+1]){const i=o[qt()],s=S_(e,t);k_(i,r)&&null===n&&!s&&(n=!1),n=function Mk(e,n,t,r){const o=function gd(e){const n=Ae.lFrame.currentDirectiveIndex;return-1===n?null:e[n]}(e);let i=r?n.residualClasses:n.residualStyles;if(null===o)0===(r?n.classBindings:n.styleBindings)&&(t=Js(t=qh(null,e,n,t,r),n.attrs,r),i=null);else{const s=n.directiveStylingLast;if(-1===s||e[s]!==o)if(t=qh(o,e,n,t,r),null===i){let u=function Rk(e,n,t){const r=t?n.classBindings:n.styleBindings;if(0!==bo(r))return e[ro(r)]}(e,n,r);void 0!==u&&Array.isArray(u)&&(u=qh(null,e,n,u[1],r),u=Js(u,n.attrs,r),function kk(e,n,t,r){e[ro(t?n.classBindings:n.styleBindings)]=r}(e,n,r,u))}else i=function Nk(e,n,t){let r;const o=n.directiveEnd;for(let i=1+n.directiveStylingLast;i<o;i++)r=Js(r,e[i].hostAttrs,t);return Js(r,n.attrs,t)}(e,n,r)}return void 0!==i&&(r?n.residualClasses=i:n.residualStyles=i),t}(o,i,n,r),function vk(e,n,t,r,o,i){let s=i?n.classBindings:n.styleBindings,l=ro(s),u=bo(s);e[r]=t;let p,h=!1;if(Array.isArray(t)?(p=t[1],(null===p||di(t,p)>0)&&(h=!0)):p=t,o)if(0!==u){const E=ro(e[l+1]);e[r+1]=El(E,l),0!==E&&(e[E+1]=zh(e[E+1],r)),e[l+1]=function mk(e,n){return 131071&e|n<<17}(e[l+1],r)}else e[r+1]=El(l,0),0!==l&&(e[l+1]=zh(e[l+1],r)),l=r;else e[r+1]=El(u,0),0===l?l=r:e[u+1]=zh(e[u+1],r),u=r;h&&(e[r+1]=Gh(e[r+1])),v_(e,p,r,!0),v_(e,p,r,!1),function _k(e,n,t,r,o){const i=o?e.residualClasses:e.residualStyles;null!=i&&"string"==typeof n&&di(i,n)>=0&&(t[r+1]=Kh(t[r+1]))}(n,p,e,r,i),s=El(l,u),i?n.classBindings=s:n.styleBindings=s}(o,i,n,t,s,r)}}(o,null,i,r);const s=Z();if(t!==Ne&&Ht(s,i,t)){const l=o.data[qt()];if(k_(l,r)&&!S_(o,i)){let u=r?l.classesWithoutHost:l.stylesWithoutHost;null!==u&&(t=_(u,t||"")),Bh(o,l,s,t,r)}else!function xk(e,n,t,r,o,i,s,l){o===Ne&&(o=qe);let u=0,h=0,p=0<o.length?o[0]:null,v=0<i.length?i[0]:null;for(;null!==p||null!==v;){const E=u<o.length?o[u+1]:void 0,D=h<i.length?i[h+1]:void 0;let U,x=null;p===v?(u+=2,h+=2,E!==D&&(x=v,U=D)):null===v||null!==p&&p<v?(u+=2,x=p):(h+=2,x=v,U=D),null!==x&&M_(e,n,t,r,x,U,s,l),p=u<o.length?o[u]:null,v=h<i.length?i[h]:null}}(o,l,s,s[Re],s[i+1],s[i+1]=function Ok(e,n,t){if(null==t||""===t)return qe;const r=[],o=eo(t);if(Array.isArray(o))for(let i=0;i<o.length;i++)e(r,o[i],!0);else if("object"==typeof o)for(const i in o)o.hasOwnProperty(i)&&e(r,i,o[i]);else"string"==typeof o&&n(r,o);return r}(e,n,t),r,i)}}(b_,Dk,e,!1)}function Dk(e,n){for(let t=function Ik(e){return function w_(e){Dt.key=0,Dt.keyEnd=0,Dt.value=0,Dt.valueEnd=0,Dt.textEnd=e.length}(e),E_(e,Pi(e,0,Dt.textEnd))}(n);t>=0;t=E_(n,t))b_(e,__(n),Ek(n))}function S_(e,n){return n>=e.expandoStartIndex}function qh(e,n,t,r,o){let i=null;const s=t.directiveEnd;let l=t.directiveStylingLast;for(-1===l?l=t.directiveStart:l++;l<s&&(i=n[l],r=Js(r,i.hostAttrs,o),i!==e);)l++;return null!==e&&(t.directiveStylingLast=l),r}function Js(e,n,t){const r=t?1:2;let o=-1;if(null!==n)for(let i=0;i<n.length;i++){const s=n[i];"number"==typeof s?o=s:o===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),Cn(e,s,!!t||n[++i]))}return void 0===e?null:e}function b_(e,n,t){Cn(e,n,eo(t))}function M_(e,n,t,r,o,i,s,l){if(!(3&n.type))return;const u=e.data,h=u[l+1],p=function yk(e){return 1==(1&e)}(h)?R_(u,n,t,o,bo(h),s):void 0;Il(p)||(Il(i)||function gk(e){return 2==(2&e)}(h)&&(i=R_(u,null,t,o,l,s)),function gb(e,n,t,r,o){if(n)o?e.addClass(t,r):e.removeClass(t,r);else{let i=-1===r.indexOf("-")?void 0:Xr.DashCase;null==o?e.removeStyle(t,r,i):("string"==typeof o&&o.endsWith("!important")&&(o=o.slice(0,-10),i|=Xr.Important),e.setStyle(t,r,o,i))}}(r,s,Cc(qt(),t),o,i))}function R_(e,n,t,r,o,i){const s=null===n;let l;for(;o>0;){const u=e[o],h=Array.isArray(u),p=h?u[1]:u,v=null===p;let E=t[o+1];E===Ne&&(E=v?qe:void 0);let D=v?Dd(E,r):p===r?E:void 0;if(h&&!Il(D)&&(D=Dd(u,r)),Il(D)&&(l=D,s))return l;const x=e[o+1];o=s?ro(x):bo(x)}if(null!==n){let u=i?n.residualClasses:n.residualStyles;null!=u&&(l=Dd(u,r))}return l}function Il(e){return void 0!==e}function k_(e,n){return 0!=(e.flags&(n?8:16))}function Zt(e,n=""){const t=Z(),r=$e(),o=e+Ve,i=r.firstCreatePass?Ti(r,o,1,n,null):r.data[o],s=N_(r,t,i,n,e);t[o]=s,Ec()&&Gc(r,t,s,i),tr(i,!1)}let N_=(e,n,t,r,o)=>(Jr(!0),function Bc(e,n){return e.createText(n)}(n[Re],r));function Xs(e,n,t){const r=Z(),o=Si(r,e,n,t);return o!==Ne&&function Mr(e,n,t){const r=Cc(n,e);!function ry(e,n,t){e.setValue(n,t)}(e[Re],r,t)}(r,qt(),o),Xs}const Fi="en-US";let nC=Fi;class Ro{}class bC{}class ef extends Ro{constructor(n,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new xv(this);const o=vn(n);this._bootstrapComponents=br(o.bootstrap),this._r3Injector=Wy(n,t,[{provide:Ro,useValue:this},{provide:sl,useValue:this.componentFactoryResolver},...r],g(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class tf extends bC{constructor(n){super(),this.moduleType=n}create(n){return new ef(this.moduleType,n,[])}}class MC extends Ro{constructor(n){super(),this.componentFactoryResolver=new xv(this),this.instance=null;const t=new Xc([...n.providers,{provide:Ro,useValue:this},{provide:sl,useValue:this.componentFactoryResolver}],n.parent||Jc(),n.debugName,new Set(["environment"]));this.injector=t,n.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function nf(e,n,t=null){return new MC({providers:e,parent:n,debugName:t,runEnvironmentInitializers:!0}).injector}let iO=(()=>{class e{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=ky(0,t.type),o=r.length>0?nf([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,o)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=me({token:e,providedIn:"environment",factory:()=>new e(ue(En))})}return e})();function RC(e){e.getStandaloneInjector=n=>n.get(iO).getOrCreateStandaloneInjector(e)}function OO(e,n,t,r=!0){const o=n[ae];if(function ab(e,n,t,r){const o=kt+r,i=t.length;r>0&&(t[o-1][Bn]=n),r<i-kt?(n[Bn]=t[o],Om(t,kt+r,n)):(t.push(n),n[Bn]=null),n[ct]=t;const s=n[ms];null!==s&&t!==s&&function cb(e,n){const t=e[Xo];n[_t]!==n[ct][ct][_t]&&(e[Og]=!0),null===t?e[Xo]=[n]:t.push(n)}(s,n);const l=n[Jn];null!==l&&l.insertView(e),n[Pe]|=128}(o,n,e,t),r){const i=jd(t,e),s=n[Re],l=$c(s,e[Xn]);null!==l&&function ob(e,n,t,r,o,i){r[ft]=o,r[Lt]=n,Os(e,r,t,1,o,i)}(o,e[Lt],s,n,l,i)}}Symbol;let Rr=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=FO}return e})();const PO=Rr,xO=class extends PO{constructor(n,t,r){super(),this._declarationLView=n,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,t){return this.createEmbeddedViewImpl(n,t)}createEmbeddedViewImpl(n,t,r){const o=function NO(e,n,t,r){const o=n.tView,l=ll(e,o,t,4096&e[Pe]?4096:16,null,n,null,null,null,r?.injector??null,r?.hydrationInfo??null);l[ms]=e[n.index];const h=e[Jn];return null!==h&&(l[Jn]=h.createEmbeddedView(o)),Oh(o,l,t),l}(this._declarationLView,this._declarationTContainer,n,{injector:t,hydrationInfo:r});return new Gs(o)}};function FO(){return function bl(e,n){return 4&e.type?new xO(n,e,Ei(e,n)):null}(Ot(),Z())}let zn=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=jO}return e})();function jO(){return function WC(e,n){let t;const r=n[e.index];return zt(r)?t=r:(t=Iv(r,n,null,e),n[e.index]=t,ul(n,t)),ZC(t,n,e,r),new KC(t,e,n)}(Ot(),Z())}const $O=zn,KC=class extends $O{constructor(n,t,r){super(),this._lContainer=n,this._hostTNode=t,this._hostLView=r}get element(){return Ei(this._hostTNode,this._hostLView)}get injector(){return new Wt(this._hostTNode,this._hostLView)}get parentInjector(){const n=Dc(this._hostTNode,this._hostLView);if(Ed(n)){const t=As(n,this._hostLView),r=Ts(n);return new Wt(t[ae].data[r+8],t)}return new Wt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const t=qC(this._lContainer);return null!==t&&t[n]||null}get length(){return this._lContainer.length-kt}createEmbeddedView(n,t,r){let o,i;"number"==typeof r?o=r:null!=r&&(o=r.index,i=r.injector);const l=n.createEmbeddedViewImpl(t||{},i,null);return this.insertImpl(l,o,false),l}createComponent(n,t,r,o,i){const s=n&&!function Ds(e){return"function"==typeof e}(n);let l;if(s)l=t;else{const U=t||{};l=U.index,r=U.injector,o=U.projectableNodes,i=U.environmentInjector||U.ngModuleRef}const u=s?n:new zs(je(n)),h=r||this.parentInjector;if(!i&&null==u.ngModule){const $=(s?h:this.parentInjector).get(En,null);$&&(i=$)}je(u.componentType??{});const D=u.create(h,o,null,i);return this.insertImpl(D.hostView,l,false),D}insert(n,t){return this.insertImpl(n,t,!1)}insertImpl(n,t,r){const o=n._lView;if(function NS(e){return zt(e[ct])}(o)){const u=this.indexOf(n);if(-1!==u)this.detach(u);else{const h=o[ct],p=new KC(h,h[Lt],h[ct]);p.detach(p.indexOf(n))}}const s=this._adjustIndex(t),l=this._lContainer;return OO(l,o,s,!r),n.attachToViewContainerRef(),Om(af(l),s,n),n}move(n,t){return this.insert(n,t)}indexOf(n){const t=qC(this._lContainer);return null!==t?t.indexOf(n):-1}remove(n){const t=this._adjustIndex(n,-1),r=jc(this._lContainer,t);r&&(Rc(af(this._lContainer),t),Ud(r[ae],r))}detach(n){const t=this._adjustIndex(n,-1),r=jc(this._lContainer,t);return r&&null!=Rc(af(this._lContainer),t)?new Gs(r):null}_adjustIndex(n,t=0){return n??this.length+t}};function qC(e){return e[8]}function af(e){return e[8]||(e[8]=[])}let ZC=function YC(e,n,t,r){if(e[Xn])return;let o;o=8&t.type?nt(r):function GO(e,n){const t=e[Re],r=t.createComment(""),o=ln(n,e);return To(t,$c(t,o),r,function hb(e,n){return e.nextSibling(n)}(t,o),!1),r}(n,t),e[Xn]=o};const vf=new de("Application Initializer");let _f=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=he(vf,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const o of this.appInits){const i=o();if(Qs(i))t.push(i);else if(i_(i)){const s=new Promise((l,u)=>{i.subscribe({complete:l,error:u})});t.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(o=>{this.reject(o)}),0===t.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=me({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),EE=(()=>{class e{log(t){console.log(t)}warn(t){console.warn(t)}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=me({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();const kr=new de("LocaleId",{providedIn:"root",factory:()=>he(kr,Be.Optional|Be.SkipSelf)||function w0(){return typeof $localize<"u"&&$localize.locale||Fi}()});let kl=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new $t(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=me({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class A0{constructor(n,t){this.ngModuleFactory=n,this.componentFactories=t}}let wE=(()=>{class e{compileModuleSync(t){return new tf(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),i=br(vn(t).declarations).reduce((s,l)=>{const u=je(l);return u&&s.push(new zs(u)),s},[]);return new A0(r,i)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=me({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const SE=new de(""),Ol=new de("");let Tf,wf=(()=>{class e{constructor(t,r,o){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Tf||(function z0(e){Tf=e}(o),o.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{rt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,o){let i=-1;r&&r>0&&(i=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==i),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:i,updateCb:o})}whenStable(t,r,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,o){return[]}static#e=this.\u0275fac=function(r){return new(r||e)(ue(rt),ue(If),ue(Ol))};static#t=this.\u0275prov=me({token:e,factory:e.\u0275fac})}return e})(),If=(()=>{class e{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return Tf?.findTestabilityInTree(this,t,r)??null}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=me({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})(),oo=null;const DE=new de("AllowMultipleToken"),Af=new de("PlatformDestroyListeners"),Sf=new de("appBootstrapListener");class ME{constructor(n,t){this.name=n,this.token=t}}function kE(e,n,t=[]){const r=`Platform: ${n}`,o=new de(r);return(i=[])=>{let s=Df();if(!s||s.injector.get(DE,!1)){const l=[...t,...i,{provide:o,useValue:!0}];e?e(l):function W0(e){if(oo&&!oo.get(DE,!1))throw new q(400,!1);(function bE(){!function yS(e){zg=e}(()=>{throw new q(600,!1)})})(),oo=e;const n=e.get(OE);(function RE(e){e.get(Fy,null)?.forEach(t=>t())})(e)}(function NE(e=[],n){return In.create({name:n,providers:[{provide:th,useValue:"platform"},{provide:Af,useValue:new Set([()=>oo=null])},...e]})}(l,r))}return function Y0(e){const n=Df();if(!n)throw new q(401,!1);return n}()}}function Df(){return oo?.get(OE)??null}let OE=(()=>{class e{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const o=function Q0(e="zone.js",n){return"noop"===e?new DM:"zone.js"===e?new rt(n):e}(r?.ngZone,function PE(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return o.run(()=>{const i=function oO(e,n,t){return new ef(e,n,t)}(t.moduleType,this.injector,function HE(e){return[{provide:rt,useFactory:e},{provide:Ls,multi:!0,useFactory:()=>{const n=he(X0,{optional:!0});return()=>n.initialize()}},{provide:UE,useFactory:J0},{provide:Xy,useFactory:ev}]}(()=>o)),s=i.injector.get(Dr,null);return o.runOutsideAngular(()=>{const l=o.onError.subscribe({next:u=>{s.handleError(u)}});i.onDestroy(()=>{Pl(this._modules,i),l.unsubscribe()})}),function xE(e,n,t){try{const r=t();return Qs(r)?r.catch(o=>{throw n.runOutsideAngular(()=>e.handleError(o)),o}):r}catch(r){throw n.runOutsideAngular(()=>e.handleError(r)),r}}(s,o,()=>{const l=i.injector.get(_f);return l.runInitializers(),l.donePromise.then(()=>(function rC(e){bn(e,"Expected localeId to be defined"),"string"==typeof e&&(nC=e.toLowerCase().replace(/_/g,"-"))}(i.injector.get(kr,Fi)||Fi),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,r=[]){const o=FE({},r);return function K0(e,n,t){const r=new tf(t);return Promise.resolve(r)}(0,0,t).then(i=>this.bootstrapModuleFactory(i,o))}_moduleDoBootstrap(t){const r=t.injector.get(Hi);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(o=>r.bootstrap(o));else{if(!t.instance.ngDoBootstrap)throw new q(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new q(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(Af,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||e)(ue(In))};static#t=this.\u0275prov=me({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();function FE(e,n){return Array.isArray(n)?n.reduce(FE,e):{...e,...n}}let Hi=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=he(UE),this.zoneIsStable=he(Xy),this.componentTypes=[],this.components=[],this.isStable=he(kl).hasPendingTasks.pipe(G(t=>t?ge(!1):this.zoneIsStable),function a(e,n=ve){return e=e??c,He((t,r)=>{let o,i=!0;t.subscribe(Ge(r,s=>{const l=n(s);(i||!e(o,l))&&(i=!1,o=l,r.next(s))}))})}(),ac()),this._injector=he(En)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const o=t instanceof Vy;if(!this._injector.get(_f).done)throw!o&&function Wo(e){const n=je(e)||Rt(e)||Gt(e);return null!==n&&n.standalone}(t),new q(405,!1);let s;s=o?t:this._injector.get(sl).resolveComponentFactory(t),this.componentTypes.push(s.componentType);const l=function q0(e){return e.isBoundToModule}(s)?void 0:this._injector.get(Ro),h=s.create(In.NULL,[],r||s.selector,l),p=h.location.nativeElement,v=h.injector.get(SE,null);return v?.registerApplication(p),h.onDestroy(()=>{this.detachView(h.hostView),Pl(this.components,h),v?.unregisterApplication(p)}),this._loadComponent(h),h}tick(){if(this._runningTick)throw new q(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;Pl(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(Sf,[]);r.push(...this._bootstrapListeners),r.forEach(o=>o(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Pl(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new q(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=me({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Pl(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}const UE=new de("",{providedIn:"root",factory:()=>he(Dr).handleError.bind(void 0)});function J0(){const e=he(rt),n=he(Dr);return t=>e.runOutsideAngular(()=>n.handleError(t))}let X0=(()=>{class e{constructor(){this.zone=he(rt),this.applicationRef=he(Hi)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=me({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();let xl=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=tP}return e})();function tP(e){return function nP(e,n,t){if(Co(e)&&!t){const r=_n(e.index,n);return new Gs(r,r)}return 47&e.type?new Gs(n[_t],n):null}(Ot(),Z(),16==(16&e))}class $E{constructor(){}supports(n){return pl(n)}create(n){return new cP(n)}}const aP=(e,n)=>n;class cP{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||aP}forEachItem(n){let t;for(t=this._itHead;null!==t;t=t._next)n(t)}forEachOperation(n){let t=this._itHead,r=this._removalsHead,o=0,i=null;for(;t||r;){const s=!r||t&&t.currentIndex<zE(r,o,i)?t:r,l=zE(s,o,i),u=s.currentIndex;if(s===r)o--,r=r._nextRemoved;else if(t=t._next,null==s.previousIndex)o++;else{i||(i=[]);const h=l-o,p=u-o;if(h!=p){for(let E=0;E<h;E++){const D=E<i.length?i[E]:i[E]=0,x=D+E;p<=x&&x<h&&(i[E]=D+1)}i[s.previousIndex]=p-h}}l!==u&&n(s,l,u)}}forEachPreviousItem(n){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)n(t)}forEachAddedItem(n){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)n(t)}forEachMovedItem(n){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)n(t)}forEachRemovedItem(n){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)n(t)}forEachIdentityChange(n){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)n(t)}diff(n){if(null==n&&(n=[]),!pl(n))throw new q(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let o,i,s,t=this._itHead,r=!1;if(Array.isArray(n)){this.length=n.length;for(let l=0;l<this.length;l++)i=n[l],s=this._trackByFn(l,i),null!==t&&Object.is(t.trackById,s)?(r&&(t=this._verifyReinsertion(t,i,s,l)),Object.is(t.item,i)||this._addIdentityChange(t,i)):(t=this._mismatch(t,i,s,l),r=!0),t=t._next}else o=0,function LR(e,n){if(Array.isArray(e))for(let t=0;t<e.length;t++)n(e[t]);else{const t=e[Symbol.iterator]();let r;for(;!(r=t.next()).done;)n(r.value)}}(n,l=>{s=this._trackByFn(o,l),null!==t&&Object.is(t.trackById,s)?(r&&(t=this._verifyReinsertion(t,l,s,o)),Object.is(t.item,l)||this._addIdentityChange(t,l)):(t=this._mismatch(t,l,s,o),r=!0),t=t._next,o++}),this.length=o;return this._truncate(t),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,t,r,o){let i;return null===n?i=this._itTail:(i=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._reinsertAfter(n,i,o)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(r,o))?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._moveAfter(n,i,o)):n=this._addAfter(new lP(t,r),i,o),n}_verifyReinsertion(n,t,r,o){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==i?n=this._reinsertAfter(i,n._prev,o):n.currentIndex!=o&&(n.currentIndex=o,this._addToMoves(n,o)),n}_truncate(n){for(;null!==n;){const t=n._next;this._addToRemovals(this._unlink(n)),n=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const o=n._prevRemoved,i=n._nextRemoved;return null===o?this._removalsHead=i:o._nextRemoved=i,null===i?this._removalsTail=o:i._prevRemoved=o,this._insertAfter(n,t,r),this._addToMoves(n,r),n}_moveAfter(n,t,r){return this._unlink(n),this._insertAfter(n,t,r),this._addToMoves(n,r),n}_addAfter(n,t,r){return this._insertAfter(n,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,t,r){const o=null===t?this._itHead:t._next;return n._next=o,n._prev=t,null===o?this._itTail=n:o._prev=n,null===t?this._itHead=n:t._next=n,null===this._linkedRecords&&(this._linkedRecords=new GE),this._linkedRecords.put(n),n.currentIndex=r,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const t=n._prev,r=n._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,n}_addToMoves(n,t){return n.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new GE),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,t){return n.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class lP{constructor(n,t){this.item=n,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class uP{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,n))return r;return null}remove(n){const t=n._prevDup,r=n._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class GE{constructor(){this.map=new Map}put(n){const t=n.trackById;let r=this.map.get(t);r||(r=new uP,this.map.set(t,r)),r.add(n)}get(n,t){const o=this.map.get(n);return o?o.get(n,t):null}remove(n){const t=n.trackById;return this.map.get(t).remove(n)&&this.map.delete(t),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function zE(e,n,t){const r=e.previousIndex;if(null===r)return r;let o=0;return t&&r<t.length&&(o=t[r]),r+n+o}function qE(){return new Ul([new $E])}let Ul=(()=>{class e{static#e=this.\u0275prov=me({token:e,providedIn:"root",factory:qE});constructor(t){this.factories=t}static create(t,r){if(null!=r){const o=r.factories.slice();t=t.concat(o)}return new e(t)}static extend(t){return{provide:e,useFactory:r=>e.create(t,r||qE()),deps:[[e,new Oc,new Nc]]}}find(t){const r=this.factories.find(o=>o.supports(t));if(null!=r)return r;throw new q(901,!1)}}return e})();const gP=kE(null,"core",[]);let mP=(()=>{class e{constructor(t){}static#e=this.\u0275fac=function(r){return new(r||e)(ue(Hi))};static#t=this.\u0275mod=Qn({type:e});static#n=this.\u0275inj=Ln({})}return e})(),Of=null;function io(){return Of}class RP{}const fn=new de("DocumentToken");let Pf=(()=>{class e{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=me({token:e,factory:function(){return he(NP)},providedIn:"platform"})}return e})();const kP=new de("Location Initialized");let NP=(()=>{class e extends Pf{constructor(){super(),this._doc=he(fn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return io().getBaseHref(this._doc)}onPopState(t){const r=io().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=io().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,o){this._history.pushState(t,r,o)}replaceState(t,r,o){this._history.replaceState(t,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=me({token:e,factory:function(){return new e},providedIn:"platform"})}return e})();function xf(e,n){if(0==e.length)return n;if(0==n.length)return e;let t=0;return e.endsWith("/")&&t++,n.startsWith("/")&&t++,2==t?e+n.substring(1):1==t?e+n:e+"/"+n}function rw(e){const n=e.match(/#|\?|$/),t=n&&n.index||e.length;return e.slice(0,t-("/"===e[t-1]?1:0))+e.slice(t)}function Nr(e){return e&&"?"!==e[0]?"?"+e:e}let No=(()=>{class e{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=me({token:e,factory:function(){return he(iw)},providedIn:"root"})}return e})();const ow=new de("appBaseHref");let iw=(()=>{class e extends No{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??he(fn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return xf(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Nr(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,i){const s=this.prepareExternalUrl(o+Nr(i));this._platformLocation.pushState(t,r,s)}replaceState(t,r,o,i){const s=this.prepareExternalUrl(o+Nr(i));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||e)(ue(Pf),ue(ow,8))};static#t=this.\u0275prov=me({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),OP=(()=>{class e extends No{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=xf(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,i){let s=this.prepareExternalUrl(o+Nr(i));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,o,i){let s=this.prepareExternalUrl(o+Nr(i));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||e)(ue(Pf),ue(ow,8))};static#t=this.\u0275prov=me({token:e,factory:e.\u0275fac})}return e})(),Vi=(()=>{class e{constructor(t){this._subject=new pt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function FP(e){if(new RegExp("^(https?:)?//").test(e)){const[,t]=e.split(/\/\/[^\/]+/);return t}return e}(rw(sw(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Nr(r))}normalize(t){return e.stripTrailingSlash(function xP(e,n){if(!e||!n.startsWith(e))return n;const t=n.substring(e.length);return""===t||["/",";","?","#"].includes(t[0])?t:n}(this._basePath,sw(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Nr(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Nr(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}static#e=this.normalizeQueryParams=Nr;static#t=this.joinWithSlash=xf;static#n=this.stripTrailingSlash=rw;static#r=this.\u0275fac=function(r){return new(r||e)(ue(No))};static#o=this.\u0275prov=me({token:e,factory:function(){return function PP(){return new Vi(ue(No))}()},providedIn:"root"})}return e})();function sw(e){return e.replace(/\/index.html$/,"")}function gw(e,n){n=encodeURIComponent(n);for(const t of e.split(";")){const r=t.indexOf("="),[o,i]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===n)return decodeURIComponent(i)}return null}class wx{constructor(n,t,r,o){this.$implicit=n,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let vw=(()=>{class e{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,i,s)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new wx(o.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===i?void 0:i);else if(null!==i){const l=r.get(i);r.move(l,s),_w(l,o)}});for(let o=0,i=r.length;o<i;o++){const l=r.get(o).context;l.index=o,l.count=i,l.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{_w(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||e)(Q(zn),Q(Rr),Q(Ul))};static#t=this.\u0275dir=Me({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return e})();function _w(e,n){e.context.$implicit=n.item}let Cw=(()=>{class e{constructor(t,r){this._viewContainer=t,this._context=new Ix,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Ew("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Ew("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||e)(Q(zn),Q(Rr))};static#t=this.\u0275dir=Me({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return e})();class Ix{constructor(){this.$implicit=null,this.ngIf=null}}function Ew(e,n){if(n&&!n.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${g(n)}'.`)}let Tw=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Qn({type:e});static#n=this.\u0275inj=Ln({})}return e})();function Sw(e){return"server"===e}let Qx=(()=>{class e{static#e=this.\u0275prov=me({token:e,providedIn:"root",factory:()=>new Jx(ue(fn),window)})}return e})();class Jx{constructor(n,t){this.document=n,this.window=t,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){if(!this.supportsScrolling())return;const t=function Xx(e,n){const t=e.getElementById(n)||e.getElementsByName(n)[0];if(t)return t;if("function"==typeof e.createTreeWalker&&e.body&&"function"==typeof e.body.attachShadow){const r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const i=o.shadowRoot;if(i){const s=i.getElementById(n)||i.querySelector(`[name="${n}"]`);if(s)return s}o=r.nextNode()}}return null}(this.document,n);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(n){this.supportsScrolling()&&(this.window.history.scrollRestoration=n)}scrollToElement(n){const t=n.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(r-i[0],o-i[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class Dw{}class wF extends RP{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Jf extends wF{static makeCurrent(){!function MP(e){Of||(Of=e)}(new Jf)}onAndCancel(n,t,r){return n.addEventListener(t,r),()=>{n.removeEventListener(t,r)}}dispatchEvent(n,t){n.dispatchEvent(t)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,t){return(t=t||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,t){return"window"===t?window:"document"===t?n:"body"===t?n.body:null}getBaseHref(n){const t=function IF(){return fa=fa||document.querySelector("base"),fa?fa.getAttribute("href"):null}();return null==t?null:function TF(e){Jl=Jl||document.createElement("a"),Jl.setAttribute("href",e);const n=Jl.pathname;return"/"===n.charAt(0)?n:`/${n}`}(t)}resetBaseElement(){fa=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return gw(document.cookie,n)}}let Jl,fa=null,SF=(()=>{class e{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=me({token:e,factory:e.\u0275fac})}return e})();const Xf=new de("EventManagerPlugins");let Nw=(()=>{class e{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>{o.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(i=>i.supports(t)),!r)throw new q(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||e)(ue(Xf),ue(rt))};static#t=this.\u0275prov=me({token:e,factory:e.\u0275fac})}return e})();class Ow{constructor(n){this._doc=n}}const ep="ng-app-id";let Pw=(()=>{class e{constructor(t,r,o,i={}){this.doc=t,this.appId=r,this.nonce=o,this.platformId=i,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Sw(i),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(o=>o.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${ep}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(o=>{null!=o.textContent&&r.set(o.textContent,o)}),r}return null}changeUsageCount(t,r){const o=this.styleRef;if(o.has(t)){const i=o.get(t);return i.usage+=r,i.usage}return o.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const o=this.styleNodesInDOM,i=o?.get(r);if(i?.parentNode===t)return o.delete(r),i.removeAttribute(ep),i;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(ep,this.appId),s}}addStyleToHost(t,r){const o=this.getStyleElement(t,r);t.appendChild(o);const i=this.styleRef,s=i.get(r)?.elements;s?s.push(o):i.set(r,{elements:[o],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||e)(ue(fn),ue(el),ue(Ly,8),ue(So))};static#t=this.\u0275prov=me({token:e,factory:e.\u0275fac})}return e})();const tp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},np=/%COMP%/g,RF=new de("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Fw(e,n){return n.map(t=>t.replace(np,e))}let Lw=(()=>{class e{constructor(t,r,o,i,s,l,u,h=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=i,this.doc=s,this.platformId=l,this.ngZone=u,this.nonce=h,this.rendererByCompId=new Map,this.platformIsServer=Sw(l),this.defaultRenderer=new rp(t,s,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Un.ShadowDom&&(r={...r,encapsulation:Un.Emulated});const o=this.getOrCreateRenderer(t,r);return o instanceof Hw?o.applyToHost(t):o instanceof op&&o.applyStyles(),o}getOrCreateRenderer(t,r){const o=this.rendererByCompId;let i=o.get(r.id);if(!i){const s=this.doc,l=this.ngZone,u=this.eventManager,h=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,v=this.platformIsServer;switch(r.encapsulation){case Un.Emulated:i=new Hw(u,h,r,this.appId,p,s,l,v);break;case Un.ShadowDom:return new PF(u,h,t,r,s,l,this.nonce,v);default:i=new op(u,h,r,p,s,l,v)}o.set(r.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||e)(ue(Nw),ue(Pw),ue(el),ue(RF),ue(fn),ue(So),ue(rt),ue(Ly))};static#t=this.\u0275prov=me({token:e,factory:e.\u0275fac})}return e})();class rp{constructor(n,t,r,o){this.eventManager=n,this.doc=t,this.ngZone=r,this.platformIsServer=o,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(n,t){return t?this.doc.createElementNS(tp[t]||t,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,t){(Uw(n)?n.content:n).appendChild(t)}insertBefore(n,t,r){n&&(Uw(n)?n.content:n).insertBefore(t,r)}removeChild(n,t){n&&n.removeChild(t)}selectRootElement(n,t){let r="string"==typeof n?this.doc.querySelector(n):n;if(!r)throw new q(-5104,!1);return t||(r.textContent=""),r}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,t,r,o){if(o){t=o+":"+t;const i=tp[o];i?n.setAttributeNS(i,t,r):n.setAttribute(t,r)}else n.setAttribute(t,r)}removeAttribute(n,t,r){if(r){const o=tp[r];o?n.removeAttributeNS(o,t):n.removeAttribute(`${r}:${t}`)}else n.removeAttribute(t)}addClass(n,t){n.classList.add(t)}removeClass(n,t){n.classList.remove(t)}setStyle(n,t,r,o){o&(Xr.DashCase|Xr.Important)?n.style.setProperty(t,r,o&Xr.Important?"important":""):n.style[t]=r}removeStyle(n,t,r){r&Xr.DashCase?n.style.removeProperty(t):n.style[t]=""}setProperty(n,t,r){n[t]=r}setValue(n,t){n.nodeValue=t}listen(n,t,r){if("string"==typeof n&&!(n=io().getGlobalEventTarget(this.doc,n)))throw new Error(`Unsupported event target ${n} for event ${t}`);return this.eventManager.addEventListener(n,t,this.decoratePreventDefault(r))}decoratePreventDefault(n){return t=>{if("__ngUnwrap__"===t)return n;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>n(t)):n(t))&&t.preventDefault()}}}function Uw(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class PF extends rp{constructor(n,t,r,o,i,s,l,u){super(n,i,s,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const h=Fw(o.id,o.styles);for(const p of h){const v=document.createElement("style");l&&v.setAttribute("nonce",l),v.textContent=p,this.shadowRoot.appendChild(v)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,t){return super.appendChild(this.nodeOrShadowRoot(n),t)}insertBefore(n,t,r){return super.insertBefore(this.nodeOrShadowRoot(n),t,r)}removeChild(n,t){return super.removeChild(this.nodeOrShadowRoot(n),t)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class op extends rp{constructor(n,t,r,o,i,s,l,u){super(n,i,s,l),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=o,this.styles=u?Fw(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Hw extends op{constructor(n,t,r,o,i,s,l,u){const h=o+"-"+r.id;super(n,t,r,i,s,l,u,h),this.contentAttr=function kF(e){return"_ngcontent-%COMP%".replace(np,e)}(h),this.hostAttr=function NF(e){return"_nghost-%COMP%".replace(np,e)}(h)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,t){const r=super.createElement(n,t);return super.setAttribute(r,this.contentAttr,""),r}}let xF=(()=>{class e extends Ow{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}static#e=this.\u0275fac=function(r){return new(r||e)(ue(fn))};static#t=this.\u0275prov=me({token:e,factory:e.\u0275fac})}return e})();const Bw=["alt","control","meta","shift"],FF={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},LF={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let UF=(()=>{class e extends Ow{constructor(t){super(t)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,r,o){const i=e.parseEventName(r),s=e.eventCallback(i.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>io().onAndCancel(t,i.domEventName,s))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const i=e._normalizeKey(r.pop());let s="",l=r.indexOf("code");if(l>-1&&(r.splice(l,1),s="code."),Bw.forEach(h=>{const p=r.indexOf(h);p>-1&&(r.splice(p,1),s+=h+".")}),s+=i,0!=r.length||0===i.length)return null;const u={};return u.domEventName=o,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let o=FF[t.key]||t.key,i="";return r.indexOf("code.")>-1&&(o=t.code,i="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Bw.forEach(s=>{s!==o&&(0,LF[s])(t)&&(i+=s+".")}),i+=o,i===r)}static eventCallback(t,r,o){return i=>{e.matchEventFullKeyCode(i,t)&&o.runGuarded(()=>r(i))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||e)(ue(fn))};static#t=this.\u0275prov=me({token:e,factory:e.\u0275fac})}return e})();const jF=kE(gP,"browser",[{provide:So,useValue:"browser"},{provide:Fy,useValue:function HF(){Jf.makeCurrent()},multi:!0},{provide:fn,useFactory:function VF(){return function Cb(e){zd=e}(document),document},deps:[]}]),$F=new de(""),$w=[{provide:Ol,useClass:class AF{addToWindow(n){tt.getAngularTestability=(r,o=!0)=>{const i=n.findTestabilityInTree(r,o);if(null==i)throw new q(5103,!1);return i},tt.getAllAngularTestabilities=()=>n.getAllTestabilities(),tt.getAllAngularRootElements=()=>n.getAllRootElements(),tt.frameworkStabilizers||(tt.frameworkStabilizers=[]),tt.frameworkStabilizers.push(r=>{const o=tt.getAllAngularTestabilities();let i=o.length,s=!1;const l=function(u){s=s||u,i--,0==i&&r(s)};o.forEach(u=>{u.whenStable(l)})})}findTestabilityInTree(n,t,r){return null==t?null:n.getTestability(t)??(r?io().isShadowRoot(t)?this.findTestabilityInTree(n,t.host,!0):this.findTestabilityInTree(n,t.parentElement,!0):null)}},deps:[]},{provide:SE,useClass:wf,deps:[rt,If,Ol]},{provide:wf,useClass:wf,deps:[rt,If,Ol]}],Gw=[{provide:th,useValue:"root"},{provide:Dr,useFactory:function BF(){return new Dr},deps:[]},{provide:Xf,useClass:xF,multi:!0,deps:[fn,rt,So]},{provide:Xf,useClass:UF,multi:!0,deps:[fn]},Lw,Pw,Nw,{provide:$y,useExisting:Lw},{provide:Dw,useClass:SF,deps:[]},[]];let GF=(()=>{class e{constructor(t){}static withServerTransition(t){return{ngModule:e,providers:[{provide:el,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||e)(ue($F,12))};static#t=this.\u0275mod=Qn({type:e});static#n=this.\u0275inj=Ln({providers:[...Gw,...$w],imports:[Tw,mP]})}return e})(),zw=(()=>{class e{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||e)(ue(fn))};static#t=this.\u0275prov=me({token:e,factory:function(r){let o=null;return o=r?new r:function KF(){return new zw(ue(fn))}(),o},providedIn:"root"})}return e})();typeof window<"u"&&window;var ze=S(593),Xt=S(97);class QF{static getInteractionStatusFromEvent(n,t){switch(n.eventType){case Xt.t.LOGIN_START:return ze.$H.Login;case Xt.t.SSO_SILENT_START:return ze.$H.SsoSilent;case Xt.t.ACQUIRE_TOKEN_START:if(n.interactionType===ze.s_.Redirect||n.interactionType===ze.s_.Popup)return ze.$H.AcquireToken;break;case Xt.t.HANDLE_REDIRECT_START:return ze.$H.HandleRedirect;case Xt.t.LOGOUT_START:return ze.$H.Logout;case Xt.t.SSO_SILENT_SUCCESS:case Xt.t.SSO_SILENT_FAILURE:if(t&&t!==ze.$H.SsoSilent)break;return ze.$H.None;case Xt.t.LOGOUT_END:if(t&&t!==ze.$H.Logout)break;return ze.$H.None;case Xt.t.HANDLE_REDIRECT_END:if(t&&t!==ze.$H.HandleRedirect)break;return ze.$H.None;case Xt.t.LOGIN_SUCCESS:case Xt.t.LOGIN_FAILURE:case Xt.t.ACQUIRE_TOKEN_SUCCESS:case Xt.t.ACQUIRE_TOKEN_FAILURE:case Xt.t.RESTORE_FROM_BFCACHE:if(n.interactionType===ze.s_.Redirect||n.interactionType===ze.s_.Popup){if(t&&t!==ze.$H.Login&&t!==ze.$H.AcquireToken)break;return ze.$H.None}}return null}}var Zw=S(325),sp=S(581),JF=S(484),Yw=S(92);const Qw={now:()=>(Qw.delegate||Date).now(),delegate:void 0};class XF extends at{constructor(n=1/0,t=1/0,r=Qw){super(),this._bufferSize=n,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,n),this._windowTime=Math.max(1,t)}next(n){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:i,_windowTime:s}=this;t||(r.push(n),!o&&r.push(i.now()+s)),this._trimBuffer(),super.next(n)}_subscribe(n){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(n),{_infiniteTimeWindow:r,_buffer:o}=this,i=o.slice();for(let s=0;s<i.length&&!n.closed;s+=r?1:2)n.next(i[s]);return this._checkFinalizedStatuses(n),t}_trimBuffer(){const{_bufferSize:n,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,i=(o?1:2)*n;if(n<1/0&&i<r.length&&r.splice(0,r.length-i),!o){const s=t.now();let l=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)l=u;l&&r.splice(0,l+1)}}}function ao(e,n){return C(n)?mt(e,n,1):mt(e,1)}function xr(e){return He((n,t)=>{let i,r=null,o=!1;r=n.subscribe(Ge(t,void 0,void 0,s=>{i=jt(e(s,xr(e)(n))),r?(r.unsubscribe(),r=null,i.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,i.subscribe(t))})}function Fr(e){return e<=0?()=>on:He((n,t)=>{let r=0;n.subscribe(Ge(t,o=>{++r<=e&&(t.next(o),e<=r&&t.complete())}))})}function pn(e,n){return He((t,r)=>{let o=0;t.subscribe(Ge(r,i=>e.call(n,i,o++)&&r.next(i)))})}const{isArray:tL}=Array,{getPrototypeOf:nL,prototype:rL,keys:oL}=Object;function Jw(e){if(1===e.length){const n=e[0];if(tL(n))return{args:n,keys:null};if(function iL(e){return e&&"object"==typeof e&&nL(e)===rL}(n)){const t=oL(n);return{args:t.map(r=>n[r]),keys:t}}}return{args:e,keys:null}}const{isArray:sL}=Array;function Xw(e){return R(n=>function aL(e,n){return sL(n)?e(...n):e(n)}(e,n))}function eI(e,n){return e.reduce((t,r,o)=>(t[r]=n[o],t),{})}function ap(...e){const n=zr(e),t=rc(e),{args:r,keys:o}=Jw(e);if(0===r.length)return Ke([],n);const i=new Ee(function cL(e,n,t=ve){return r=>{tI(n,()=>{const{length:o}=e,i=new Array(o);let s=o,l=o;for(let u=0;u<o;u++)tI(n,()=>{const h=Ke(e[u],n);let p=!1;h.subscribe(Ge(r,v=>{i[u]=v,p||(p=!0,l--),l||r.next(t(i.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,n,o?s=>eI(o,s):ve));return t?i.pipe(Xw(t)):i}function tI(e,n,t){e?Ft(t,e,n):n()}const Xl=m(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function cp(...e){return function lL(){return jr(1)}()(Ke(e,zr(e)))}function nI(e){return new Ee(n=>{jt(e()).subscribe(n)})}function pa(e,n){const t=C(e)?e:()=>e,r=o=>o.error(t());return new Ee(n?o=>n.schedule(r,0,o):r)}function lp(){return He((e,n)=>{let t=null;e._refCount++;const r=Ge(n,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount)return void(t=null);const o=e._connection,i=t;t=null,o&&(!i||o===i)&&o.unsubscribe(),n.unsubscribe()});e.subscribe(r),r.closed||(t=e.connect())})}class rI extends Ee{constructor(n,t){super(),this.source=n,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,wt(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){const n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new L;const t=this.getSubject();n.add(this.source.subscribe(Ge(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),n.closed&&(this._connection=null,n=L.EMPTY)}return n}refCount(){return lp()(this)}}function eu(e){return He((n,t)=>{let r=!1;n.subscribe(Ge(t,o=>{r=!0,t.next(o)},()=>{r||t.next(e),t.complete()}))})}function oI(e=dL){return He((n,t)=>{let r=!1;n.subscribe(Ge(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(e())))})}function dL(){return new Xl}function Oo(e,n){const t=arguments.length>=2;return r=>r.pipe(e?pn((o,i)=>e(o,i,r)):ve,Fr(1),t?eu(n):oI(()=>new Xl))}function Bt(e,n,t){const r=C(e)||n||t?{next:e,error:n,complete:t}:e;return r?He((o,i)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let l=!0;o.subscribe(Ge(i,u=>{var h;null===(h=r.next)||void 0===h||h.call(r,u),i.next(u)},()=>{var u;l=!1,null===(u=r.complete)||void 0===u||u.call(r),i.complete()},u=>{var h;l=!1,null===(h=r.error)||void 0===h||h.call(r,u),i.error(u)},()=>{var u,h;l&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(h=r.finalize)||void 0===h||h.call(r)}))}):ve}function up(e){return e<=0?()=>on:He((n,t)=>{let r=[];n.subscribe(Ge(t,o=>{r.push(o),e<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function ga(e){return He((n,t)=>{try{n.subscribe(t)}finally{t.add(e)}})}function iI(e){return He((n,t)=>{jt(e).subscribe(Ge(t,()=>t.complete(),te)),!t.closed&&n.subscribe(t)})}const Fe="primary",ma=Symbol("RouteTitle");class mL{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const t=this.params[n];return Array.isArray(t)?t[0]:t}return null}getAll(n){if(this.has(n)){const t=this.params[n];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function $i(e){return new mL(e)}function yL(e,n,t){const r=t.path.split("/");if(r.length>e.length||"full"===t.pathMatch&&(n.hasChildren()||r.length<e.length))return null;const o={};for(let i=0;i<r.length;i++){const s=r[i],l=e[i];if(s.startsWith(":"))o[s.substring(1)]=l;else if(s!==l.path)return null}return{consumed:e.slice(0,r.length),posParams:o}}function lr(e,n){const t=e?Object.keys(e):void 0,r=n?Object.keys(n):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let i=0;i<t.length;i++)if(o=t[i],!sI(e[o],n[o]))return!1;return!0}function sI(e,n){if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return!1;const t=[...e].sort(),r=[...n].sort();return t.every((o,i)=>r[i]===o)}return e===n}function aI(e){return e.length>0?e[e.length-1]:null}function co(e){return function eL(e){return!!e&&(e instanceof Ee||C(e.lift)&&C(e.subscribe))}(e)?e:Qs(e)?Ke(Promise.resolve(e)):ge(e)}const _L={exact:function uI(e,n,t){if(!Po(e.segments,n.segments)||!tu(e.segments,n.segments,t)||e.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children)if(!e.children[r]||!uI(e.children[r],n.children[r],t))return!1;return!0},subset:dI},cI={exact:function CL(e,n){return lr(e,n)},subset:function EL(e,n){return Object.keys(n).length<=Object.keys(e).length&&Object.keys(n).every(t=>sI(e[t],n[t]))},ignored:()=>!0};function lI(e,n,t){return _L[t.paths](e.root,n.root,t.matrixParams)&&cI[t.queryParams](e.queryParams,n.queryParams)&&!("exact"===t.fragment&&e.fragment!==n.fragment)}function dI(e,n,t){return hI(e,n,n.segments,t)}function hI(e,n,t,r){if(e.segments.length>t.length){const o=e.segments.slice(0,t.length);return!(!Po(o,t)||n.hasChildren()||!tu(o,t,r))}if(e.segments.length===t.length){if(!Po(e.segments,t)||!tu(e.segments,t,r))return!1;for(const o in n.children)if(!e.children[o]||!dI(e.children[o],n.children[o],r))return!1;return!0}{const o=t.slice(0,e.segments.length),i=t.slice(e.segments.length);return!!(Po(e.segments,o)&&tu(e.segments,o,r)&&e.children[Fe])&&hI(e.children[Fe],n,i,r)}}function tu(e,n,t){return n.every((r,o)=>cI[t](e[o].parameters,r.parameters))}class Gi{constructor(n=new Xe([],{}),t={},r=null){this.root=n,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=$i(this.queryParams)),this._queryParamMap}toString(){return TL.serialize(this)}}class Xe{constructor(n,t){this.segments=n,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return nu(this)}}class ya{constructor(n,t){this.path=n,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=$i(this.parameters)),this._parameterMap}toString(){return gI(this)}}function Po(e,n){return e.length===n.length&&e.every((t,r)=>t.path===n[r].path)}let va=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=me({token:e,factory:function(){return new dp},providedIn:"root"})}return e})();class dp{parse(n){const t=new xL(n);return new Gi(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(n){const t=`/${_a(n.root,!0)}`,r=function DL(e){const n=Object.keys(e).map(t=>{const r=e[t];return Array.isArray(r)?r.map(o=>`${ru(t)}=${ru(o)}`).join("&"):`${ru(t)}=${ru(r)}`}).filter(t=>!!t);return n.length?`?${n.join("&")}`:""}(n.queryParams);return`${t}${r}${"string"==typeof n.fragment?`#${function AL(e){return encodeURI(e)}(n.fragment)}`:""}`}}const TL=new dp;function nu(e){return e.segments.map(n=>gI(n)).join("/")}function _a(e,n){if(!e.hasChildren())return nu(e);if(n){const t=e.children[Fe]?_a(e.children[Fe],!1):"",r=[];return Object.entries(e.children).forEach(([o,i])=>{o!==Fe&&r.push(`${o}:${_a(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function IL(e,n){let t=[];return Object.entries(e.children).forEach(([r,o])=>{r===Fe&&(t=t.concat(n(o,r)))}),Object.entries(e.children).forEach(([r,o])=>{r!==Fe&&(t=t.concat(n(o,r)))}),t}(e,(r,o)=>o===Fe?[_a(e.children[Fe],!1)]:[`${o}:${_a(r,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[Fe]?`${nu(e)}/${t[0]}`:`${nu(e)}/(${t.join("//")})`}}function fI(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ru(e){return fI(e).replace(/%3B/gi,";")}function hp(e){return fI(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ou(e){return decodeURIComponent(e)}function pI(e){return ou(e.replace(/\+/g,"%20"))}function gI(e){return`${hp(e.path)}${function SL(e){return Object.keys(e).map(n=>`;${hp(n)}=${hp(e[n])}`).join("")}(e.parameters)}`}const bL=/^[^\/()?;#]+/;function fp(e){const n=e.match(bL);return n?n[0]:""}const ML=/^[^\/()?;=#]+/,kL=/^[^=?&#]+/,OL=/^[^&#]+/;class xL{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Xe([],{}):new Xe([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(n.length>0||Object.keys(t).length>0)&&(r[Fe]=new Xe(n,t)),r}parseSegment(){const n=fp(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new q(4009,!1);return this.capture(n),new ya(ou(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const t=function RL(e){const n=e.match(ML);return n?n[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=fp(this.remaining);o&&(r=o,this.capture(r))}n[ou(t)]=ou(r)}parseQueryParam(n){const t=function NL(e){const n=e.match(kL);return n?n[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=function PL(e){const n=e.match(OL);return n?n[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const o=pI(t),i=pI(r);if(n.hasOwnProperty(o)){let s=n[o];Array.isArray(s)||(s=[s],n[o]=s),s.push(i)}else n[o]=i}parseParens(n){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=fp(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new q(4010,!1);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):n&&(i=Fe);const s=this.parseChildren();t[i]=1===Object.keys(s).length?s[Fe]:new Xe([],s),this.consumeOptional("//")}return t}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new q(4011,!1)}}function mI(e){return e.segments.length>0?new Xe([],{[Fe]:e}):e}function yI(e){const n={};for(const r of Object.keys(e.children)){const i=yI(e.children[r]);if(r===Fe&&0===i.segments.length&&i.hasChildren())for(const[s,l]of Object.entries(i.children))n[s]=l;else(i.segments.length>0||i.hasChildren())&&(n[r]=i)}return function FL(e){if(1===e.numberOfChildren&&e.children[Fe]){const n=e.children[Fe];return new Xe(e.segments.concat(n.segments),n.children)}return e}(new Xe(e.segments,n))}function xo(e){return e instanceof Gi}function vI(e){let n;const o=mI(function t(i){const s={};for(const u of i.children){const h=t(u);s[u.outlet]=h}const l=new Xe(i.url,s);return i===e&&(n=l),l}(e.root));return n??o}function _I(e,n,t,r){let o=e;for(;o.parent;)o=o.parent;if(0===n.length)return pp(o,o,o,t,r);const i=function UL(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new EI(!0,0,e);let n=0,t=!1;const r=e.reduce((o,i,s)=>{if("object"==typeof i&&null!=i){if(i.outlets){const l={};return Object.entries(i.outlets).forEach(([u,h])=>{l[u]="string"==typeof h?h.split("/"):h}),[...o,{outlets:l}]}if(i.segmentPath)return[...o,i.segmentPath]}return"string"!=typeof i?[...o,i]:0===s?(i.split("/").forEach((l,u)=>{0==u&&"."===l||(0==u&&""===l?t=!0:".."===l?n++:""!=l&&o.push(l))}),o):[...o,i]},[]);return new EI(t,n,r)}(n);if(i.toRoot())return pp(o,o,new Xe([],{}),t,r);const s=function HL(e,n,t){if(e.isAbsolute)return new su(n,!0,0);if(!t)return new su(n,!1,NaN);if(null===t.parent)return new su(t,!0,0);const r=iu(e.commands[0])?0:1;return function BL(e,n,t){let r=e,o=n,i=t;for(;i>o;){if(i-=o,r=r.parent,!r)throw new q(4005,!1);o=r.segments.length}return new su(r,!1,o-i)}(t,t.segments.length-1+r,e.numberOfDoubleDots)}(i,o,e),l=s.processChildren?Ea(s.segmentGroup,s.index,i.commands):wI(s.segmentGroup,s.index,i.commands);return pp(o,s.segmentGroup,l,t,r)}function iu(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Ca(e){return"object"==typeof e&&null!=e&&e.outlets}function pp(e,n,t,r,o){let s,i={};r&&Object.entries(r).forEach(([u,h])=>{i[u]=Array.isArray(h)?h.map(p=>`${p}`):`${h}`}),s=e===n?t:CI(e,n,t);const l=mI(yI(s));return new Gi(l,i,o)}function CI(e,n,t){const r={};return Object.entries(e.children).forEach(([o,i])=>{r[o]=i===n?t:CI(i,n,t)}),new Xe(e.segments,r)}class EI{constructor(n,t,r){if(this.isAbsolute=n,this.numberOfDoubleDots=t,this.commands=r,n&&r.length>0&&iu(r[0]))throw new q(4003,!1);const o=r.find(Ca);if(o&&o!==aI(r))throw new q(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class su{constructor(n,t,r){this.segmentGroup=n,this.processChildren=t,this.index=r}}function wI(e,n,t){if(e||(e=new Xe([],{})),0===e.segments.length&&e.hasChildren())return Ea(e,n,t);const r=function jL(e,n,t){let r=0,o=n;const i={match:!1,pathIndex:0,commandIndex:0};for(;o<e.segments.length;){if(r>=t.length)return i;const s=e.segments[o],l=t[r];if(Ca(l))break;const u=`${l}`,h=r<t.length-1?t[r+1]:null;if(o>0&&void 0===u)break;if(u&&h&&"object"==typeof h&&void 0===h.outlets){if(!TI(u,h,s))return i;r+=2}else{if(!TI(u,{},s))return i;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(e,n,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const i=new Xe(e.segments.slice(0,r.pathIndex),{});return i.children[Fe]=new Xe(e.segments.slice(r.pathIndex),e.children),Ea(i,0,o)}return r.match&&0===o.length?new Xe(e.segments,{}):r.match&&!e.hasChildren()?gp(e,n,t):r.match?Ea(e,0,o):gp(e,n,t)}function Ea(e,n,t){if(0===t.length)return new Xe(e.segments,{});{const r=function VL(e){return Ca(e[0])?e[0].outlets:{[Fe]:e}}(t),o={};if(Object.keys(r).some(i=>i!==Fe)&&e.children[Fe]&&1===e.numberOfChildren&&0===e.children[Fe].segments.length){const i=Ea(e.children[Fe],n,t);return new Xe(e.segments,i.children)}return Object.entries(r).forEach(([i,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(o[i]=wI(e.children[i],n,s))}),Object.entries(e.children).forEach(([i,s])=>{void 0===r[i]&&(o[i]=s)}),new Xe(e.segments,o)}}function gp(e,n,t){const r=e.segments.slice(0,n);let o=0;for(;o<t.length;){const i=t[o];if(Ca(i)){const u=$L(i.outlets);return new Xe(r,u)}if(0===o&&iu(t[0])){r.push(new ya(e.segments[n].path,II(t[0]))),o++;continue}const s=Ca(i)?i.outlets[Fe]:`${i}`,l=o<t.length-1?t[o+1]:null;s&&l&&iu(l)?(r.push(new ya(s,II(l))),o+=2):(r.push(new ya(s,{})),o++)}return new Xe(r,{})}function $L(e){const n={};return Object.entries(e).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(n[t]=gp(new Xe([],{}),0,r))}),n}function II(e){const n={};return Object.entries(e).forEach(([t,r])=>n[t]=`${r}`),n}function TI(e,n,t){return e==t.path&&lr(n,t.parameters)}const wa="imperative";class ur{constructor(n,t){this.id=n,this.url=t}}class au extends ur{constructor(n,t,r="imperative",o=null){super(n,t),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class lo extends ur{constructor(n,t,r){super(n,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ia extends ur{constructor(n,t,r,o){super(n,t),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class zi extends ur{constructor(n,t,r,o){super(n,t),this.reason=r,this.code=o,this.type=16}}class cu extends ur{constructor(n,t,r,o){super(n,t),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class AI extends ur{constructor(n,t,r,o){super(n,t),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class GL extends ur{constructor(n,t,r,o){super(n,t),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zL extends ur{constructor(n,t,r,o,i){super(n,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=i,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class KL extends ur{constructor(n,t,r,o){super(n,t),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qL extends ur{constructor(n,t,r,o){super(n,t),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class WL{constructor(n){this.route=n,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ZL{constructor(n){this.route=n,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class YL{constructor(n){this.snapshot=n,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class QL{constructor(n){this.snapshot=n,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class JL{constructor(n){this.snapshot=n,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class XL{constructor(n){this.snapshot=n,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class SI{constructor(n,t,r){this.routerEvent=n,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class mp{}class yp{constructor(n){this.url=n}}class e1{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Ta,this.attachRef=null}}let Ta=(()=>{class e{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new e1,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=me({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class DI{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const t=this.pathFromRoot(n);return t.length>1?t[t.length-2]:null}children(n){const t=vp(n,this._root);return t?t.children.map(r=>r.value):[]}firstChild(n){const t=vp(n,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(n){const t=_p(n,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==n)}pathFromRoot(n){return _p(n,this._root).map(t=>t.value)}}function vp(e,n){if(e===n.value)return n;for(const t of n.children){const r=vp(e,t);if(r)return r}return null}function _p(e,n){if(e===n.value)return[n];for(const t of n.children){const r=_p(e,t);if(r.length)return r.unshift(n),r}return[]}class Lr{constructor(n,t){this.value=n,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ki(e){const n={};return e&&e.children.forEach(t=>n[t.value.outlet]=t),n}class bI extends DI{constructor(n,t){super(n),this.snapshot=t,Cp(this,n)}toString(){return this.snapshot.toString()}}function MI(e,n){const t=function t1(e,n){const s=new lu([],{},{},"",{},Fe,n,null,{});return new kI("",new Lr(s,[]))}(0,n),r=new $t([new ya("",{})]),o=new $t({}),i=new $t({}),s=new $t({}),l=new $t(""),u=new qi(r,o,s,l,i,Fe,n,t.root);return u.snapshot=t.root,new bI(new Lr(u,[]),t)}class qi{constructor(n,t,r,o,i,s,l,u){this.urlSubject=n,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=o,this.dataSubject=i,this.outlet=s,this.component=l,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(R(h=>h[ma]))??ge(void 0),this.url=n,this.params=t,this.queryParams=r,this.fragment=o,this.data=i}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(R(n=>$i(n)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(R(n=>$i(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function RI(e,n="emptyOnly"){const t=e.pathFromRoot;let r=0;if("always"!==n)for(r=t.length-1;r>=1;){const o=t[r],i=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(i.component)break;r--}}return function n1(e){return e.reduce((n,t)=>({params:{...n.params,...t.params},data:{...n.data,...t.data},resolve:{...t.data,...n.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class lu{get title(){return this.data?.[ma]}constructor(n,t,r,o,i,s,l,u,h){this.url=n,this.params=t,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=l,this.routeConfig=u,this._resolve=h}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=$i(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=$i(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class kI extends DI{constructor(n,t){super(t),this.url=n,Cp(this,t)}toString(){return NI(this._root)}}function Cp(e,n){n.value._routerState=e,n.children.forEach(t=>Cp(e,t))}function NI(e){const n=e.children.length>0?` { ${e.children.map(NI).join(", ")} } `:"";return`${e.value}${n}`}function Ep(e){if(e.snapshot){const n=e.snapshot,t=e._futureSnapshot;e.snapshot=t,lr(n.queryParams,t.queryParams)||e.queryParamsSubject.next(t.queryParams),n.fragment!==t.fragment&&e.fragmentSubject.next(t.fragment),lr(n.params,t.params)||e.paramsSubject.next(t.params),function vL(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;++t)if(!lr(e[t],n[t]))return!1;return!0}(n.url,t.url)||e.urlSubject.next(t.url),lr(n.data,t.data)||e.dataSubject.next(t.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function wp(e,n){const t=lr(e.params,n.params)&&function wL(e,n){return Po(e,n)&&e.every((t,r)=>lr(t.parameters,n[r].parameters))}(e.url,n.url);return t&&!(!e.parent!=!n.parent)&&(!e.parent||wp(e.parent,n.parent))}let OI=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Fe,this.activateEvents=new pt,this.deactivateEvents=new pt,this.attachEvents=new pt,this.detachEvents=new pt,this.parentContexts=he(Ta),this.location=he(zn),this.changeDetector=he(xl),this.environmentInjector=he(En),this.inputBinder=he(uu,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:o}=t.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new q(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new q(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new q(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new q(4013,!1);this._activatedRoute=t;const o=this.location,s=t.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,u=new r1(t,l,o.injector);this.activated=o.createComponent(s,{index:o.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275dir=Me({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Rn]})}return e})();class r1{constructor(n,t,r){this.route=n,this.childContexts=t,this.parent=r}get(n,t){return n===qi?this.route:n===Ta?this.childContexts:this.parent.get(n,t)}}const uu=new de("");let PI=(()=>{class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,o=ap([r.queryParams,r.params,r.data]).pipe(G(([i,s,l],u)=>(l={...i,...s,...l},0===u?ge(l):Promise.resolve(l)))).subscribe(i=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const s=function bP(e){const n=je(e);if(!n)return null;const t=new zs(n);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return n.standalone},get isSignal(){return n.signals}}}(r.component);if(s)for(const{templateName:l}of s.inputs)t.activatedComponentRef.setInput(l,i[l]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,o)}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=me({token:e,factory:e.\u0275fac})}return e})();function Aa(e,n,t){if(t&&e.shouldReuseRoute(n.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=n.value;const o=function i1(e,n,t){return n.children.map(r=>{for(const o of t.children)if(e.shouldReuseRoute(r.value,o.value.snapshot))return Aa(e,r,o);return Aa(e,r)})}(e,n,t);return new Lr(r,o)}{if(e.shouldAttach(n.value)){const i=e.retrieve(n.value);if(null!==i){const s=i.route;return s.value._futureSnapshot=n.value,s.children=n.children.map(l=>Aa(e,l)),s}}const r=function s1(e){return new qi(new $t(e.url),new $t(e.params),new $t(e.queryParams),new $t(e.fragment),new $t(e.data),e.outlet,e.component,e)}(n.value),o=n.children.map(i=>Aa(e,i));return new Lr(r,o)}}const Ip="ngNavigationCancelingError";function xI(e,n){const{redirectTo:t,navigationBehaviorOptions:r}=xo(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,o=FI(!1,0,n);return o.url=t,o.navigationBehaviorOptions=r,o}function FI(e,n,t){const r=new Error("NavigationCancelingError: "+(e||""));return r[Ip]=!0,r.cancellationCode=n,t&&(r.url=t),r}function LI(e){return e&&e[Ip]}let UI=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275cmp=fs({type:e,selectors:[["ng-component"]],standalone:!0,features:[RC],decls:1,vars:0,template:function(r,o){1&r&&no(0,"router-outlet")},dependencies:[OI],encapsulation:2})}return e})();function Tp(e){const n=e.children&&e.children.map(Tp),t=n?{...e,children:n}:{...e};return!t.component&&!t.loadComponent&&(n||t.loadChildren)&&t.outlet&&t.outlet!==Fe&&(t.component=UI),t}function Wn(e){return e.outlet||Fe}function Sa(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let n=e.parent;n;n=n.parent){const t=n.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class p1{constructor(n,t,r,o,i){this.routeReuseStrategy=n,this.futureState=t,this.currState=r,this.forwardEvent=o,this.inputBindingEnabled=i}activate(n){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,n),Ep(this.futureState.root),this.activateChildRoutes(t,r,n)}deactivateChildRoutes(n,t,r){const o=Ki(t);n.children.forEach(i=>{const s=i.value.outlet;this.deactivateRoutes(i,o[s],r),delete o[s]}),Object.values(o).forEach(i=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(n,t,r){const o=n.value,i=t?t.value:null;if(o===i)if(o.component){const s=r.getContext(o.outlet);s&&this.deactivateChildRoutes(n,t,s.children)}else this.deactivateChildRoutes(n,t,r);else i&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(n,t){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,t):this.deactivateRouteAndOutlet(n,t)}detachAndStoreRouteSubtree(n,t){const r=t.getContext(n.value.outlet),o=r&&n.value.component?r.children:t,i=Ki(n);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],o);if(r&&r.outlet){const s=r.outlet.detach(),l=r.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:s,route:n,contexts:l})}}deactivateRouteAndOutlet(n,t){const r=t.getContext(n.value.outlet),o=r&&n.value.component?r.children:t,i=Ki(n);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(n,t,r){const o=Ki(t);n.children.forEach(i=>{this.activateRoutes(i,o[i.value.outlet],r),this.forwardEvent(new XL(i.value.snapshot))}),n.children.length&&this.forwardEvent(new QL(n.value.snapshot))}activateRoutes(n,t,r){const o=n.value,i=t?t.value:null;if(Ep(o),o===i)if(o.component){const s=r.getOrCreateContext(o.outlet);this.activateChildRoutes(n,t,s.children)}else this.activateChildRoutes(n,t,r);else if(o.component){const s=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const l=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),s.children.onOutletReAttached(l.contexts),s.attachRef=l.componentRef,s.route=l.route.value,s.outlet&&s.outlet.attach(l.componentRef,l.route.value),Ep(l.route.value),this.activateChildRoutes(n,null,s.children)}else{const l=Sa(o.snapshot);s.attachRef=null,s.route=o,s.injector=l,s.outlet&&s.outlet.activateWith(o,s.injector),this.activateChildRoutes(n,null,s.children)}}else this.activateChildRoutes(n,null,r)}}class HI{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class du{constructor(n,t){this.component=n,this.route=t}}function g1(e,n,t){const r=e._root;return Da(r,n?n._root:null,t,[r.value])}function Wi(e,n){const t=Symbol(),r=n.get(e,t);return r===t?"function"!=typeof e||function FA(e){return null!==cc(e)}(e)?n.get(e):e:r}function Da(e,n,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const i=Ki(n);return e.children.forEach(s=>{(function y1(e,n,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const i=e.value,s=n?n.value:null,l=t?t.getContext(e.value.outlet):null;if(s&&i.routeConfig===s.routeConfig){const u=function v1(e,n,t){if("function"==typeof t)return t(e,n);switch(t){case"pathParamsChange":return!Po(e.url,n.url);case"pathParamsOrQueryParamsChange":return!Po(e.url,n.url)||!lr(e.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!wp(e,n)||!lr(e.queryParams,n.queryParams);default:return!wp(e,n)}}(s,i,i.routeConfig.runGuardsAndResolvers);u?o.canActivateChecks.push(new HI(r)):(i.data=s.data,i._resolvedData=s._resolvedData),Da(e,n,i.component?l?l.children:null:t,r,o),u&&l&&l.outlet&&l.outlet.isActivated&&o.canDeactivateChecks.push(new du(l.outlet.component,s))}else s&&ba(n,l,o),o.canActivateChecks.push(new HI(r)),Da(e,null,i.component?l?l.children:null:t,r,o)})(s,i[s.value.outlet],t,r.concat([s.value]),o),delete i[s.value.outlet]}),Object.entries(i).forEach(([s,l])=>ba(l,t.getContext(s),o)),o}function ba(e,n,t){const r=Ki(e),o=e.value;Object.entries(r).forEach(([i,s])=>{ba(s,o.component?n?n.children.getContext(i):null:n,t)}),t.canDeactivateChecks.push(new du(o.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,o))}function Ma(e){return"function"==typeof e}function BI(e){return e instanceof Xl||"EmptyError"===e?.name}const hu=Symbol("INITIAL_VALUE");function Zi(){return G(e=>ap(e.map(n=>n.pipe(Fr(1),function uL(...e){const n=zr(e);return He((t,r)=>{(n?cp(e,t,n):cp(e,t)).subscribe(r)})}(hu)))).pipe(R(n=>{for(const t of n)if(!0!==t){if(t===hu)return hu;if(!1===t||t instanceof Gi)return t}return!0}),pn(n=>n!==hu),Fr(1)))}function VI(e){return function xe(...e){return ke(e)}(Bt(n=>{if(xo(n))throw xI(0,n)}),R(n=>!0===n))}class fu{constructor(n){this.segmentGroup=n||null}}class jI{constructor(n){this.urlTree=n}}function Yi(e){return pa(new fu(e))}function $I(e){return pa(new jI(e))}class U1{constructor(n,t){this.urlSerializer=n,this.urlTree=t}noMatchError(n){return new q(4002,!1)}lineralizeSegments(n,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return ge(r);if(o.numberOfChildren>1||!o.children[Fe])return pa(new q(4e3,!1));o=o.children[Fe]}}applyRedirectCommands(n,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),n,r)}applyRedirectCreateUrlTree(n,t,r,o){const i=this.createSegmentGroup(n,t.root,r,o);return new Gi(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(n,t){const r={};return Object.entries(n).forEach(([o,i])=>{if("string"==typeof i&&i.startsWith(":")){const l=i.substring(1);r[o]=t[l]}else r[o]=i}),r}createSegmentGroup(n,t,r,o){const i=this.createSegments(n,t.segments,r,o);let s={};return Object.entries(t.children).forEach(([l,u])=>{s[l]=this.createSegmentGroup(n,u,r,o)}),new Xe(i,s)}createSegments(n,t,r,o){return t.map(i=>i.path.startsWith(":")?this.findPosParam(n,i,o):this.findOrReturn(i,r))}findPosParam(n,t,r){const o=r[t.path.substring(1)];if(!o)throw new q(4001,!1);return o}findOrReturn(n,t){let r=0;for(const o of t){if(o.path===n.path)return t.splice(r),o;r++}return n}}const Ap={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function H1(e,n,t,r,o){const i=Sp(e,n,t);return i.matched?(r=function c1(e,n){return e.providers&&!e._injector&&(e._injector=nf(e.providers,n,`Route: ${e.path}`)),e._injector??n}(n,r),function x1(e,n,t,r){const o=n.canMatch;return o&&0!==o.length?ge(o.map(s=>{const l=Wi(s,e);return co(function T1(e){return e&&Ma(e.canMatch)}(l)?l.canMatch(n,t):e.runInContext(()=>l(n,t)))})).pipe(Zi(),VI()):ge(!0)}(r,n,t).pipe(R(s=>!0===s?i:{...Ap}))):ge(i)}function Sp(e,n,t){if(""===n.path)return"full"===n.pathMatch&&(e.hasChildren()||t.length>0)?{...Ap}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(n.matcher||yL)(t,e,n);if(!o)return{...Ap};const i={};Object.entries(o.posParams??{}).forEach(([l,u])=>{i[l]=u.path});const s=o.consumed.length>0?{...i,...o.consumed[o.consumed.length-1].parameters}:i;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:s,positionalParamSegments:o.posParams??{}}}function GI(e,n,t,r){return t.length>0&&function j1(e,n,t){return t.some(r=>pu(e,n,r)&&Wn(r)!==Fe)}(e,t,r)?{segmentGroup:new Xe(n,V1(r,new Xe(t,e.children))),slicedSegments:[]}:0===t.length&&function $1(e,n,t){return t.some(r=>pu(e,n,r))}(e,t,r)?{segmentGroup:new Xe(e.segments,B1(e,0,t,r,e.children)),slicedSegments:t}:{segmentGroup:new Xe(e.segments,e.children),slicedSegments:t}}function B1(e,n,t,r,o){const i={};for(const s of r)if(pu(e,t,s)&&!o[Wn(s)]){const l=new Xe([],{});i[Wn(s)]=l}return{...o,...i}}function V1(e,n){const t={};t[Fe]=n;for(const r of e)if(""===r.path&&Wn(r)!==Fe){const o=new Xe([],{});t[Wn(r)]=o}return t}function pu(e,n,t){return(!(e.hasChildren()||n.length>0)||"full"!==t.pathMatch)&&""===t.path}class q1{constructor(n,t,r,o,i,s,l){this.injector=n,this.configLoader=t,this.rootComponentType=r,this.config=o,this.urlTree=i,this.paramsInheritanceStrategy=s,this.urlSerializer=l,this.allowRedirects=!0,this.applyRedirects=new U1(this.urlSerializer,this.urlTree)}noMatchError(n){return new q(4002,!1)}recognize(){const n=GI(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,n,Fe).pipe(xr(t=>{if(t instanceof jI)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof fu?this.noMatchError(t):t}),R(t=>{const r=new lu([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Fe,this.rootComponentType,null,{}),o=new Lr(r,t),i=new kI("",o),s=function LL(e,n,t=null,r=null){return _I(vI(e),n,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,i.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(i._root),{state:i,tree:s}}))}match(n){return this.processSegmentGroup(this.injector,this.config,n.root,Fe).pipe(xr(r=>{throw r instanceof fu?this.noMatchError(r):r}))}inheritParamsAndData(n){const t=n.value,r=RI(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),n.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(n,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(n,t,r):this.processSegment(n,t,r,r.segments,o,!0)}processChildren(n,t,r){const o=[];for(const i of Object.keys(r.children))"primary"===i?o.unshift(i):o.push(i);return Ke(o).pipe(ao(i=>{const s=r.children[i],l=function h1(e,n){const t=e.filter(r=>Wn(r)===n);return t.push(...e.filter(r=>Wn(r)!==n)),t}(t,i);return this.processSegmentGroup(n,l,s,i)}),function fL(e,n){return He(function hL(e,n,t,r,o){return(i,s)=>{let l=t,u=n,h=0;i.subscribe(Ge(s,p=>{const v=h++;u=l?e(u,p,v):(l=!0,p),r&&s.next(u)},o&&(()=>{l&&s.next(u),s.complete()})))}}(e,n,arguments.length>=2,!0))}((i,s)=>(i.push(...s),i)),eu(null),function pL(e,n){const t=arguments.length>=2;return r=>r.pipe(e?pn((o,i)=>e(o,i,r)):ve,up(1),t?eu(n):oI(()=>new Xl))}(),mt(i=>{if(null===i)return Yi(r);const s=zI(i);return function W1(e){e.sort((n,t)=>n.value.outlet===Fe?-1:t.value.outlet===Fe?1:n.value.outlet.localeCompare(t.value.outlet))}(s),ge(s)}))}processSegment(n,t,r,o,i,s){return Ke(t).pipe(ao(l=>this.processSegmentAgainstRoute(l._injector??n,t,l,r,o,i,s).pipe(xr(u=>{if(u instanceof fu)return ge(null);throw u}))),Oo(l=>!!l),xr(l=>{if(BI(l))return function z1(e,n,t){return 0===n.length&&!e.children[t]}(r,o,i)?ge([]):Yi(r);throw l}))}processSegmentAgainstRoute(n,t,r,o,i,s,l){return function G1(e,n,t,r){return!!(Wn(e)===r||r!==Fe&&pu(n,t,e))&&("**"===e.path||Sp(n,e,t).matched)}(r,o,i,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(n,o,r,i,s,l):l&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,o,t,r,i,s):Yi(o):Yi(o)}expandSegmentAgainstRouteUsingRedirect(n,t,r,o,i,s){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,r,o,s):this.expandRegularSegmentAgainstRouteUsingRedirect(n,t,r,o,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(n,t,r,o){const i=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?$I(i):this.applyRedirects.lineralizeSegments(r,i).pipe(mt(s=>{const l=new Xe(s,{});return this.processSegment(n,t,l,s,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(n,t,r,o,i,s){const{matched:l,consumedSegments:u,remainingSegments:h,positionalParamSegments:p}=Sp(t,o,i);if(!l)return Yi(t);const v=this.applyRedirects.applyRedirectCommands(u,o.redirectTo,p);return o.redirectTo.startsWith("/")?$I(v):this.applyRedirects.lineralizeSegments(o,v).pipe(mt(E=>this.processSegment(n,r,t,E.concat(h),s,!1)))}matchSegmentAgainstRoute(n,t,r,o,i,s){let l;if("**"===r.path){const u=o.length>0?aI(o).parameters:{};l=ge({snapshot:new lu(o,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,KI(r),Wn(r),r.component??r._loadedComponent??null,r,qI(r)),consumedSegments:[],remainingSegments:[]}),t.children={}}else l=H1(t,r,o,n).pipe(R(({matched:u,consumedSegments:h,remainingSegments:p,parameters:v})=>u?{snapshot:new lu(h,v,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,KI(r),Wn(r),r.component??r._loadedComponent??null,r,qI(r)),consumedSegments:h,remainingSegments:p}:null));return l.pipe(G(u=>null===u?Yi(t):this.getChildConfig(n=r._injector??n,r,o).pipe(G(({routes:h})=>{const p=r._loadedInjector??n,{snapshot:v,consumedSegments:E,remainingSegments:D}=u,{segmentGroup:x,slicedSegments:U}=GI(t,E,D,h);if(0===U.length&&x.hasChildren())return this.processChildren(p,h,x).pipe(R(ee=>null===ee?null:[new Lr(v,ee)]));if(0===h.length&&0===U.length)return ge([new Lr(v,[])]);const $=Wn(r)===i;return this.processSegment(p,h,x,U,$?Fe:i,!0).pipe(R(ee=>[new Lr(v,ee)]))}))))}getChildConfig(n,t,r){return t.children?ge({routes:t.children,injector:n}):t.loadChildren?void 0!==t._loadedRoutes?ge({routes:t._loadedRoutes,injector:t._loadedInjector}):function P1(e,n,t,r){const o=n.canLoad;return void 0===o||0===o.length?ge(!0):ge(o.map(s=>{const l=Wi(s,e);return co(function C1(e){return e&&Ma(e.canLoad)}(l)?l.canLoad(n,t):e.runInContext(()=>l(n,t)))})).pipe(Zi(),VI())}(n,t,r).pipe(mt(o=>o?this.configLoader.loadChildren(n,t).pipe(Bt(i=>{t._loadedRoutes=i.routes,t._loadedInjector=i.injector})):function L1(e){return pa(FI(!1,3))}())):ge({routes:[],injector:n})}}function Z1(e){const n=e.value.routeConfig;return n&&""===n.path}function zI(e){const n=[],t=new Set;for(const r of e){if(!Z1(r)){n.push(r);continue}const o=n.find(i=>r.value.routeConfig===i.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):n.push(r)}for(const r of t){const o=zI(r.children);n.push(new Lr(r.value,o))}return n.filter(r=>!t.has(r))}function KI(e){return e.data||{}}function qI(e){return e.resolve||{}}function WI(e){return"string"==typeof e.title||null===e.title}function Dp(e){return G(n=>{const t=e(n);return t?Ke(t).pipe(R(()=>n)):ge(n)})}const Qi=new de("ROUTES");let bp=(()=>{class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=he(wE)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ge(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=co(t.loadComponent()).pipe(R(ZI),Bt(i=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=i}),ga(()=>{this.componentLoaders.delete(t)})),o=new rI(r,()=>new at).pipe(lp());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ge({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const i=function nU(e,n,t,r){return co(e.loadChildren()).pipe(R(ZI),mt(o=>o instanceof bC||Array.isArray(o)?ge(o):Ke(n.compileModuleAsync(o))),R(o=>{r&&r(e);let i,s,l=!1;return Array.isArray(o)?(s=o,!0):(i=o.create(t).injector,s=i.get(Qi,[],{optional:!0,self:!0}).flat()),{routes:s.map(Tp),injector:i}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(ga(()=>{this.childrenLoaders.delete(r)})),s=new rI(i,()=>new at).pipe(lp());return this.childrenLoaders.set(r,s),s}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=me({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function ZI(e){return function rU(e){return e&&"object"==typeof e&&"default"in e}(e)?e.default:e}let gu=(()=>{class e{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new at,this.transitionAbortSubject=new at,this.configLoader=he(bp),this.environmentInjector=he(En),this.urlSerializer=he(va),this.rootContexts=he(Ta),this.inputBindingEnabled=null!==he(uu,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ge(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new ZL(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new WL(o))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,o){return this.transitions=new $t({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:wa,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(pn(i=>0!==i.id),R(i=>({...i,extractedUrl:t.urlHandlingStrategy.extract(i.rawUrl)})),G(i=>{this.currentTransition=i;let s=!1,l=!1;return ge(i).pipe(Bt(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),G(u=>{const h=u.currentBrowserUrl.toString(),p=!t.navigated||u.extractedUrl.toString()!==h||h!==u.currentUrlTree.toString();if(!p&&"reload"!==(u.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const E="";return this.events.next(new zi(u.id,this.urlSerializer.serialize(u.rawUrl),E,0)),u.resolve(null),on}if(t.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return ge(u).pipe(G(E=>{const D=this.transitions?.getValue();return this.events.next(new au(E.id,this.urlSerializer.serialize(E.extractedUrl),E.source,E.restoredState)),D!==this.transitions?.getValue()?on:Promise.resolve(E)}),function Y1(e,n,t,r,o,i){return mt(s=>function K1(e,n,t,r,o,i,s="emptyOnly"){return new q1(e,n,t,r,o,s,i).recognize()}(e,n,t,r,s.extractedUrl,o,i).pipe(R(({state:l,tree:u})=>({...s,targetSnapshot:l,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Bt(E=>{i.targetSnapshot=E.targetSnapshot,i.urlAfterRedirects=E.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:E.urlAfterRedirects};const D=new AI(E.id,this.urlSerializer.serialize(E.extractedUrl),this.urlSerializer.serialize(E.urlAfterRedirects),E.targetSnapshot);this.events.next(D)}));if(p&&t.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){const{id:E,extractedUrl:D,source:x,restoredState:U,extras:$}=u,ee=new au(E,this.urlSerializer.serialize(D),x,U);this.events.next(ee);const V=MI(0,this.rootComponentType).snapshot;return this.currentTransition=i={...u,targetSnapshot:V,urlAfterRedirects:D,extras:{...$,skipLocationChange:!1,replaceUrl:!1}},ge(i)}{const E="";return this.events.next(new zi(u.id,this.urlSerializer.serialize(u.extractedUrl),E,1)),u.resolve(null),on}}),Bt(u=>{const h=new GL(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}),R(u=>(this.currentTransition=i={...u,guards:g1(u.targetSnapshot,u.currentSnapshot,this.rootContexts)},i)),function S1(e,n){return mt(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:i,canDeactivateChecks:s}}=t;return 0===s.length&&0===i.length?ge({...t,guardsResult:!0}):function D1(e,n,t,r){return Ke(e).pipe(mt(o=>function O1(e,n,t,r,o){const i=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return i&&0!==i.length?ge(i.map(l=>{const u=Sa(n)??o,h=Wi(l,u);return co(function I1(e){return e&&Ma(e.canDeactivate)}(h)?h.canDeactivate(e,n,t,r):u.runInContext(()=>h(e,n,t,r))).pipe(Oo())})).pipe(Zi()):ge(!0)}(o.component,o.route,t,n,r)),Oo(o=>!0!==o,!0))}(s,r,o,e).pipe(mt(l=>l&&function _1(e){return"boolean"==typeof e}(l)?function b1(e,n,t,r){return Ke(n).pipe(ao(o=>cp(function R1(e,n){return null!==e&&n&&n(new YL(e)),ge(!0)}(o.route.parent,r),function M1(e,n){return null!==e&&n&&n(new JL(e)),ge(!0)}(o.route,r),function N1(e,n,t){const r=n[n.length-1],i=n.slice(0,n.length-1).reverse().map(s=>function m1(e){const n=e.routeConfig?e.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:e,guards:n}:null}(s)).filter(s=>null!==s).map(s=>nI(()=>ge(s.guards.map(u=>{const h=Sa(s.node)??t,p=Wi(u,h);return co(function w1(e){return e&&Ma(e.canActivateChild)}(p)?p.canActivateChild(r,e):h.runInContext(()=>p(r,e))).pipe(Oo())})).pipe(Zi())));return ge(i).pipe(Zi())}(e,o.path,t),function k1(e,n,t){const r=n.routeConfig?n.routeConfig.canActivate:null;if(!r||0===r.length)return ge(!0);const o=r.map(i=>nI(()=>{const s=Sa(n)??t,l=Wi(i,s);return co(function E1(e){return e&&Ma(e.canActivate)}(l)?l.canActivate(n,e):s.runInContext(()=>l(n,e))).pipe(Oo())}));return ge(o).pipe(Zi())}(e,o.route,t))),Oo(o=>!0!==o,!0))}(r,i,e,n):ge(l)),R(l=>({...t,guardsResult:l})))})}(this.environmentInjector,u=>this.events.next(u)),Bt(u=>{if(i.guardsResult=u.guardsResult,xo(u.guardsResult))throw xI(0,u.guardsResult);const h=new zL(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(h)}),pn(u=>!!u.guardsResult||(this.cancelNavigationTransition(u,"",3),!1)),Dp(u=>{if(u.guards.canActivateChecks.length)return ge(u).pipe(Bt(h=>{const p=new KL(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}),G(h=>{let p=!1;return ge(h).pipe(function Q1(e,n){return mt(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return ge(t);let i=0;return Ke(o).pipe(ao(s=>function J1(e,n,t,r){const o=e.routeConfig,i=e._resolve;return void 0!==o?.title&&!WI(o)&&(i[ma]=o.title),function X1(e,n,t,r){const o=function eU(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}(e);if(0===o.length)return ge({});const i={};return Ke(o).pipe(mt(s=>function tU(e,n,t,r){const o=Sa(n)??r,i=Wi(e,o);return co(i.resolve?i.resolve(n,t):o.runInContext(()=>i(n,t)))}(e[s],n,t,r).pipe(Oo(),Bt(l=>{i[s]=l}))),up(1),function gL(e){return R(()=>e)}(i),xr(s=>BI(s)?on:pa(s)))}(i,e,n,r).pipe(R(s=>(e._resolvedData=s,e.data=RI(e,t).resolve,o&&WI(o)&&(e.data[ma]=o.title),null)))}(s.route,r,e,n)),Bt(()=>i++),up(1),mt(s=>i===o.length?ge(t):on))})}(t.paramsInheritanceStrategy,this.environmentInjector),Bt({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(h,"",2)}}))}),Bt(h=>{const p=new qL(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}))}),Dp(u=>{const h=p=>{const v=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&v.push(this.configLoader.loadComponent(p.routeConfig).pipe(Bt(E=>{p.component=E}),R(()=>{})));for(const E of p.children)v.push(...h(E));return v};return ap(h(u.targetSnapshot.root)).pipe(eu(),Fr(1))}),Dp(()=>this.afterPreactivation()),R(u=>{const h=function o1(e,n,t){const r=Aa(e,n._root,t?t._root:void 0);return new bI(r,n)}(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=i={...u,targetRouterState:h},i}),Bt(()=>{this.events.next(new mp)}),((e,n,t,r)=>R(o=>(new p1(n,o.targetRouterState,o.currentRouterState,t,r).activate(e),o)))(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Fr(1),Bt({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new lo(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),t.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),iI(this.transitionAbortSubject.pipe(Bt(u=>{throw u}))),ga(()=>{s||l||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),xr(u=>{if(l=!0,LI(u))this.events.next(new Ia(i.id,this.urlSerializer.serialize(i.extractedUrl),u.message,u.cancellationCode)),function a1(e){return LI(e)&&xo(e.url)}(u)?this.events.next(new yp(u.url)):i.resolve(!1);else{this.events.next(new cu(i.id,this.urlSerializer.serialize(i.extractedUrl),u,i.targetSnapshot??void 0));try{i.resolve(t.errorHandler(u))}catch(h){i.reject(h)}}return on}))}))}cancelNavigationTransition(t,r,o){const i=new Ia(t.id,this.urlSerializer.serialize(t.extractedUrl),r,o);this.events.next(i),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=me({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function YI(e){return e!==wa}let QI=(()=>{class e{buildTitle(t){let r,o=t.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(i=>i.outlet===Fe);return r}getResolvedTitleForRoute(t){return t.data[ma]}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=me({token:e,factory:function(){return he(oU)},providedIn:"root"})}return e})(),oU=(()=>{class e extends QI{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||e)(ue(zw))};static#t=this.\u0275prov=me({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),iU=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=me({token:e,factory:function(){return he(aU)},providedIn:"root"})}return e})();class sU{shouldDetach(n){return!1}store(n,t){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,t){return n.routeConfig===t.routeConfig}}let aU=(()=>{class e extends sU{static#e=this.\u0275fac=function(){let t;return function(o){return(t||(t=function Pt(e){return vr(()=>{const n=e.prototype.constructor,t=n[_r]||Ad(n),r=Object.prototype;let o=Object.getPrototypeOf(e.prototype).constructor;for(;o&&o!==r;){const i=o[_r]||Ad(o);if(i&&i!==t)return i;o=Object.getPrototypeOf(o)}return i=>new i})}(e)))(o||e)}}();static#t=this.\u0275prov=me({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const mu=new de("",{providedIn:"root",factory:()=>({})});let cU=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=me({token:e,factory:function(){return he(lU)},providedIn:"root"})}return e})(),lU=(()=>{class e{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=me({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Ra=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(Ra||{});function JI(e,n){e.events.pipe(pn(t=>t instanceof lo||t instanceof Ia||t instanceof cu||t instanceof zi),R(t=>t instanceof lo||t instanceof zi?Ra.COMPLETE:t instanceof Ia&&(0===t.code||1===t.code)?Ra.REDIRECTING:Ra.FAILED),pn(t=>t!==Ra.REDIRECTING),Fr(1)).subscribe(()=>{n()})}function uU(e){throw e}function dU(e,n,t){return n.parse("/")}const hU={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},fU={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Sn=(()=>{class e{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=he(EE),this.isNgZoneEnabled=!1,this._events=new at,this.options=he(mu,{optional:!0})||{},this.pendingTasks=he(kl),this.errorHandler=this.options.errorHandler||uU,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||dU,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=he(cU),this.routeReuseStrategy=he(iU),this.titleStrategy=he(QI),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=he(Qi,{optional:!0})?.flat()??[],this.navigationTransitions=he(gu),this.urlSerializer=he(va),this.location=he(Vi),this.componentInputBindingEnabled=!!he(uu,{optional:!0}),this.eventsSubscription=new L,this.isNgZoneEnabled=he(rt)instanceof rt&&rt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Gi,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=MI(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:o}=this.navigationTransitions;if(null===o)return void(XI(r)&&this._events.next(r));if(r instanceof au)YI(o.source)&&(this.browserUrlTree=o.extractedUrl);else if(r instanceof zi)this.rawUrlTree=o.rawUrl;else if(r instanceof AI){if("eager"===this.urlUpdateStrategy){if(!o.extras.skipLocationChange){const i=this.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl);this.setBrowserUrl(i,o)}this.browserUrlTree=o.urlAfterRedirects}}else if(r instanceof mp)this.currentUrlTree=o.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),this.routerState=o.targetRouterState,"deferred"===this.urlUpdateStrategy&&(o.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,o),this.browserUrlTree=o.urlAfterRedirects);else if(r instanceof Ia)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(o);else if(r instanceof yp){const i=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),s={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||YI(o.source)};this.scheduleNavigation(i,wa,null,s,{resolve:o.resolve,reject:o.reject,promise:o.promise})}r instanceof cu&&this.restoreHistory(o,!0),r instanceof lo&&(this.navigated=!0),XI(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),wa,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,o){const i={replaceUrl:!0},s=o?.navigationId?o:null;if(o){const u={...o};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(i.state=u)}const l=this.parseUrl(t);this.scheduleNavigation(l,r,s,i)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Tp),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:o,queryParams:i,fragment:s,queryParamsHandling:l,preserveFragment:u}=r,h=u?this.currentUrlTree.fragment:s;let v,p=null;switch(l){case"merge":p={...this.currentUrlTree.queryParams,...i};break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=i||null}null!==p&&(p=this.removeEmptyProps(p));try{v=vI(o?o.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),v=this.currentUrlTree.root}return _I(v,t,p,h??null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=xo(t)?t:this.parseUrl(t),i=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(i,wa,null,r)}navigate(t,r={skipLocationChange:!1}){return function pU(e){for(let n=0;n<e.length;n++)if(null==e[n])throw new q(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?{...hU}:!1===r?{...fU}:r,xo(t))return lI(this.currentUrlTree,t,o);const i=this.parseUrl(t);return lI(this.currentUrlTree,i,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const i=t[o];return null!=i&&(r[o]=i),r},{})}scheduleNavigation(t,r,o,i,s){if(this.disposed)return Promise.resolve(!1);let l,u,h;s?(l=s.resolve,u=s.reject,h=s.promise):h=new Promise((v,E)=>{l=v,u=E});const p=this.pendingTasks.add();return JI(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:i,resolve:l,reject:u,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(v=>Promise.reject(v))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(o,"",s)}else{const i={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(o,"",i)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-this.browserPageId;0!==i?this.location.historyGo(i):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=me({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function XI(e){return!(e instanceof mp||e instanceof yp)}class eT{}let yU=(()=>{class e{constructor(t,r,o,i,s){this.router=t,this.injector=o,this.preloadingStrategy=i,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(pn(t=>t instanceof lo),ao(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const i of r){i.providers&&!i._injector&&(i._injector=nf(i.providers,t,`Route: ${i.path}`));const s=i._injector??t,l=i._loadedInjector??s;(i.loadChildren&&!i._loadedRoutes&&void 0===i.canLoad||i.loadComponent&&!i._loadedComponent)&&o.push(this.preloadConfig(s,i)),(i.children||i._loadedRoutes)&&o.push(this.processRoutes(l,i.children??i._loadedRoutes))}return Ke(o).pipe(jr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):ge(null);const i=o.pipe(mt(s=>null===s?ge(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));return r.loadComponent&&!r._loadedComponent?Ke([i,this.loader.loadComponent(r)]).pipe(jr()):i})}static#e=this.\u0275fac=function(r){return new(r||e)(ue(Sn),ue(wE),ue(En),ue(eT),ue(bp))};static#t=this.\u0275prov=me({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const Rp=new de("");let tT=(()=>{class e{constructor(t,r,o,i,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=o,this.zone=i,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof au?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof lo?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof zi&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof SI&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new SI(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function pv(){throw new Error("invalid")}()};static#t=this.\u0275prov=me({token:e,factory:e.\u0275fac})}return e})();function Ur(e,n){return{\u0275kind:e,\u0275providers:n}}function rT(){const e=he(In);return n=>{const t=e.get(Hi);if(n!==t.components[0])return;const r=e.get(Sn),o=e.get(oT);1===e.get(kp)&&r.initialNavigation(),e.get(iT,null,Be.Optional)?.setUpPreloading(),e.get(Rp,null,Be.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}const oT=new de("",{factory:()=>new at}),kp=new de("",{providedIn:"root",factory:()=>1}),iT=new de("");function EU(e){return Ur(0,[{provide:iT,useExisting:yU},{provide:eT,useExisting:e}])}const sT=new de("ROUTER_FORROOT_GUARD"),IU=[Vi,{provide:va,useClass:dp},Sn,Ta,{provide:qi,useFactory:function nT(e){return e.routerState.root},deps:[Sn]},bp,[]];function TU(){return new ME("Router",Sn)}let aT=(()=>{class e{constructor(t){}static forRoot(t,r){return{ngModule:e,providers:[IU,[],{provide:Qi,multi:!0,useValue:t},{provide:sT,useFactory:bU,deps:[[Sn,new Nc,new Oc]]},{provide:mu,useValue:r||{}},r?.useHash?{provide:No,useClass:OP}:{provide:No,useClass:iw},{provide:Rp,useFactory:()=>{const e=he(Qx),n=he(rt),t=he(mu),r=he(gu),o=he(va);return t.scrollOffset&&e.setOffset(t.scrollOffset),new tT(o,r,e,n,t)}},r?.preloadingStrategy?EU(r.preloadingStrategy).\u0275providers:[],{provide:ME,multi:!0,useFactory:TU},r?.initialNavigation?MU(r):[],r?.bindToComponentInputs?Ur(8,[PI,{provide:uu,useExisting:PI}]).\u0275providers:[],[{provide:cT,useFactory:rT},{provide:Sf,multi:!0,useExisting:cT}]]}}static forChild(t){return{ngModule:e,providers:[{provide:Qi,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||e)(ue(sT,8))};static#t=this.\u0275mod=Qn({type:e});static#n=this.\u0275inj=Ln({})}return e})();function bU(e){return"guarded"}function MU(e){return["disabled"===e.initialNavigation?Ur(3,[{provide:vf,multi:!0,useFactory:()=>{const n=he(Sn);return()=>{n.setUpLocationChangeListener()}}},{provide:kp,useValue:2}]).\u0275providers:[],"enabledBlocking"===e.initialNavigation?Ur(2,[{provide:kp,useValue:0},{provide:vf,multi:!0,deps:[In],useFactory:n=>{const t=n.get(kP,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const o=n.get(Sn),i=n.get(oT);JI(o,()=>{r(!0)}),n.get(gu).afterPreactivation=()=>(r(!0),i.closed?ge(void 0):i),o.initialNavigation()}))}}]).\u0275providers:[]]}const cT=new de(""),lT="@azure/msal-angular",Np="3.0.6",yu=new de("MSAL_INSTANCE"),uT=new de("MSAL_GUARD_CONFIG"),Op=new de("MSAL_INTERCEPTOR_CONFIG"),kU=new de("MSAL_BROADCAST_CONFIG");let uo=(()=>{class e{constructor(t,r){this.instance=t,this.location=r;const o=this.location.path(!0).split("#").pop();o&&(this.redirectHash=`#${o}`),this.instance.initializeWrapperLibrary(ze.lA.Angular,Np)}initialize(){return Ke(this.instance.initialize())}acquireTokenPopup(t){return Ke(this.instance.acquireTokenPopup(t))}acquireTokenRedirect(t){return Ke(this.instance.acquireTokenRedirect(t))}acquireTokenSilent(t){return Ke(this.instance.acquireTokenSilent(t))}handleRedirectObservable(t){return Ke(this.instance.initialize().then(()=>this.instance.handleRedirectPromise(t||this.redirectHash)))}loginPopup(t){return Ke(this.instance.loginPopup(t))}loginRedirect(t){return Ke(this.instance.loginRedirect(t))}logout(t){return Ke(this.instance.logout(t))}logoutRedirect(t){return Ke(this.instance.logoutRedirect(t))}logoutPopup(t){return Ke(this.instance.logoutPopup(t))}ssoSilent(t){return Ke(this.instance.ssoSilent(t))}getLogger(){return this.logger||(this.logger=this.instance.getLogger().clone(lT,Np)),this.logger}setLogger(t){this.logger=t.clone(lT,Np),this.instance.setLogger(t)}}return e.\u0275fac=function(t){return new(t||e)(ue(yu),ue(Vi))},e.\u0275prov=me({token:e,factory:e.\u0275fac}),e})(),ka=(()=>{class e{constructor(t,r,o){this.msalInstance=t,this.authService=r,this.msalBroadcastConfig=o,this.msalBroadcastConfig&&this.msalBroadcastConfig.eventsToReplay>0?(this.authService.getLogger().verbose(`BroadcastService - eventsToReplay set on BroadcastConfig, replaying the last ${this.msalBroadcastConfig.eventsToReplay} events`),this._msalSubject=new XF(this.msalBroadcastConfig.eventsToReplay)):this._msalSubject=new at,this.msalSubject$=this._msalSubject.asObservable(),this._inProgress=new $t(ze.$H.Startup),this.inProgress$=this._inProgress.asObservable(),this.msalInstance.addEventCallback(i=>{this._msalSubject.next(i);const s=QF.getInteractionStatusFromEvent(i,this._inProgress.value);null!==s&&(this.authService.getLogger().verbose(`BroadcastService - ${i.eventType} results in setting inProgress from ${this._inProgress.value} to ${s}`),this._inProgress.next(s))})}}return e.\u0275fac=function(t){return new(t||e)(ue(yu),ue(uo),ue(kU,8))},e.\u0275prov=me({token:e,factory:e.\u0275fac}),e})(),NU=(()=>{class e{constructor(t,r,o,i,s){this.msalGuardConfig=t,this.msalBroadcastService=r,this.authService=o,this.location=i,this.router=s,this.msalBroadcastService.inProgress$.subscribe()}parseUrl(t){return this.router.parseUrl(t)}getDestinationUrl(t){this.authService.getLogger().verbose("Guard - getting destination url");const r=document.getElementsByTagName("base"),o=this.location.normalize(r.length?r[0].href:window.location.origin),i=this.location.prepareExternalUrl(t);return i.startsWith("#")?(this.authService.getLogger().verbose("Guard - destination by hash routing"),`${o}/${i}`):`${o}${t}`}loginInteractively(t){const r="function"==typeof this.msalGuardConfig.authRequest?this.msalGuardConfig.authRequest(this.authService,t):{...this.msalGuardConfig.authRequest};if(this.msalGuardConfig.interactionType===ze.s_.Popup)return this.authService.getLogger().verbose("Guard - logging in by popup"),this.authService.loginPopup(r).pipe(R(i=>(this.authService.getLogger().verbose("Guard - login by popup successful, can activate, setting active account"),this.authService.instance.setActiveAccount(i.account),!0)));this.authService.getLogger().verbose("Guard - logging in by redirect");const o=this.getDestinationUrl(t.url);return this.authService.loginRedirect({redirectStartPage:o,...r}).pipe(R(()=>!1))}activateHelper(t){if(this.msalGuardConfig.interactionType!==ze.s_.Popup&&this.msalGuardConfig.interactionType!==ze.s_.Redirect)throw new Zw.WK("invalid_interaction_type","Invalid interaction type provided to MSAL Guard. InteractionType.Popup or InteractionType.Redirect must be provided in the MsalGuardConfiguration");if(this.authService.getLogger().verbose("MSAL Guard activated"),!(typeof window<"u"))return this.authService.getLogger().info("Guard - window is undefined, MSAL does not support server-side token acquisition"),ge(!0);if(sp.G.hashContainsKnownProperties(window.location.hash)&&JF.zd()&&!this.authService.instance.getConfiguration().system.allowRedirectInIframe)return this.authService.getLogger().warning("Guard - redirectUri set to page with MSAL Guard. It is recommended to not set redirectUri to a page that requires authentication."),ge(!1);this.msalGuardConfig.loginFailedRoute&&(this.loginFailedRoute=this.parseUrl(this.msalGuardConfig.loginFailedRoute));const r=this.location.path(!0);return this.authService.initialize().pipe(ao(()=>this.authService.handleRedirectObservable()),ao(()=>{if(!this.authService.instance.getAllAccounts().length)return t?(this.authService.getLogger().verbose("Guard - no accounts retrieved, log in required to activate"),this.loginInteractively(t)):(this.authService.getLogger().verbose("Guard - no accounts retrieved, no state, cannot load"),ge(!1));if(this.authService.getLogger().verbose("Guard - at least 1 account exists, can activate or load"),t){const o=this.includesCode(t.url),i=!!t.root&&!!t.root.fragment&&this.includesCode(`#${t.root.fragment}`),s=0===this.location.prepareExternalUrl(t.url).indexOf("#");if(o&&(i||s))return this.authService.getLogger().info("Guard - Hash contains known code response, stopping navigation."),r.indexOf("#")>-1?ge(this.parseUrl(this.location.path())):ge(this.parseUrl(""))}return ge(!0)}),xr(o=>(this.authService.getLogger().error("Guard - error while logging in, unable to activate"),this.authService.getLogger().errorPii(`Guard - error: ${o.message}`),this.loginFailedRoute&&t?(this.authService.getLogger().verbose("Guard - loginFailedRoute set, redirecting"),ge(this.loginFailedRoute)):ge(!1))))}includesCode(t){return t.lastIndexOf("/code")>-1&&t.lastIndexOf("/code")===t.length-5||t.indexOf("#code=")>-1||t.indexOf("&code=")>-1}canActivate(t,r){return this.authService.getLogger().verbose("Guard - canActivate"),this.activateHelper(r)}canActivateChild(t,r){return this.authService.getLogger().verbose("Guard - canActivateChild"),this.activateHelper(r)}canMatch(){return this.authService.getLogger().verbose("Guard - canLoad"),this.activateHelper()}}return e.\u0275fac=function(t){return new(t||e)(ue(uT),ue(ka),ue(uo),ue(Vi),ue(Sn))},e.\u0275prov=me({token:e,factory:e.\u0275fac}),e})(),OU=(()=>{class e{constructor(t,r,o,i,s){this.msalInterceptorConfig=t,this.authService=r,this.location=o,this.msalBroadcastService=i,this._document=s}intercept(t,r){if(this.msalInterceptorConfig.interactionType!==ze.s_.Popup&&this.msalInterceptorConfig.interactionType!==ze.s_.Redirect)throw new Zw.WK("invalid_interaction_type","Invalid interaction type provided to MSAL Interceptor. InteractionType.Popup, InteractionType.Redirect must be provided in the msalInterceptorConfiguration");this.authService.getLogger().verbose("MSAL Interceptor activated");const o=this.getScopesForEndpoint(t.url,t.method);if(!o||0===o.length)return this.authService.getLogger().verbose("Interceptor - no scopes for endpoint"),r.handle(t);let i;this.authService.instance.getActiveAccount()?(this.authService.getLogger().verbose("Interceptor - active account selected"),i=this.authService.instance.getActiveAccount()):(this.authService.getLogger().verbose("Interceptor - no active account, fallback to first account"),i=this.authService.instance.getAllAccounts()[0]);const s="function"==typeof this.msalInterceptorConfig.authRequest?this.msalInterceptorConfig.authRequest(this.authService,t,{account:i}):{...this.msalInterceptorConfig.authRequest,account:i};return this.authService.getLogger().info(`Interceptor - ${o.length} scopes found for endpoint`),this.authService.getLogger().infoPii(`Interceptor - [${o}] scopes found for ${t.url}`),this.acquireToken(s,o,i).pipe(G(l=>{this.authService.getLogger().verbose("Interceptor - setting authorization headers");const u=t.headers.set("Authorization",`Bearer ${l.accessToken}`),h=t.clone({headers:u});return r.handle(h)}))}acquireToken(t,r,o){return this.authService.acquireTokenSilent({...t,scopes:r,account:o}).pipe(xr(()=>(this.authService.getLogger().error("Interceptor - acquireTokenSilent rejected with error. Invoking interaction to resolve."),this.msalBroadcastService.inProgress$.pipe(Fr(1),G(i=>i===ze.$H.None?this.acquireTokenInteractively(t,r):this.msalBroadcastService.inProgress$.pipe(pn(s=>s===ze.$H.None),Fr(1),G(()=>this.acquireToken(t,r,o))))))),G(i=>i.accessToken?ge(i):(this.authService.getLogger().error("Interceptor - acquireTokenSilent resolved with null access token. Known issue with B2C tenants, invoking interaction to resolve."),this.msalBroadcastService.inProgress$.pipe(pn(s=>s===ze.$H.None),Fr(1),G(()=>this.acquireTokenInteractively(t,r))))))}acquireTokenInteractively(t,r){if(this.msalInterceptorConfig.interactionType===ze.s_.Popup)return this.authService.getLogger().verbose("Interceptor - error acquiring token silently, acquiring by popup"),this.authService.acquireTokenPopup({...t,scopes:r});this.authService.getLogger().verbose("Interceptor - error acquiring token silently, acquiring by redirect");const o=window.location.href;return this.authService.acquireTokenRedirect({...t,scopes:r,redirectStartPage:o}),on}getScopesForEndpoint(t,r){this.authService.getLogger().verbose("Interceptor - getting scopes for endpoint");const o=this.location.normalize(t),i=Array.from(this.msalInterceptorConfig.protectedResourceMap.keys()),s=this.matchResourcesToEndpoint(i,o);return s.absoluteResources.length>0?this.matchScopesToEndpoint(this.msalInterceptorConfig.protectedResourceMap,s.absoluteResources,r):s.relativeResources.length>0?this.matchScopesToEndpoint(this.msalInterceptorConfig.protectedResourceMap,s.relativeResources,r):null}matchResourcesToEndpoint(t,r){const o={absoluteResources:[],relativeResources:[]};return t.forEach(i=>{const s=this.location.normalize(i);Yw.x.matchPattern(s,r)&&o.absoluteResources.push(i);const l=this.getAbsoluteUrl(i),u=new sp.G(l).getUrlComponents(),h=this.getAbsoluteUrl(r),p=new sp.G(h).getUrlComponents(),v=u.QueryString?`${u.AbsolutePath}?${u.QueryString}`:this.location.normalize(u.AbsolutePath);u.HostNameAndPort===p.HostNameAndPort&&Yw.x.matchPattern(v,h)&&""!==v&&"/*"!==v&&o.relativeResources.push(i)}),o}getAbsoluteUrl(t){const r=this._document.createElement("a");return r.href=t,r.href}matchScopesToEndpoint(t,r,o){const i=[];return r.forEach(s=>{const l=[],u=t.get(s);null!==u?(u.forEach(h=>{if("string"==typeof h)l.push(h);else{const p=o.toLowerCase();h.httpMethod.toLowerCase()===p&&(null===h.scopes?i.push(null):h.scopes.forEach(E=>{l.push(E)}))}}),l.length>0&&i.push(l)):i.push(null)}),i.length>0?(i.length>1&&this.authService.getLogger().warning("Interceptor - More than 1 matching scopes for endpoint found."),i[0]):null}}return e.\u0275fac=function(t){return new(t||e)(ue(Op),ue(uo),ue(Vi),ue(ka),ue(fn))},e.\u0275prov=me({token:e,factory:e.\u0275fac}),e})(),PU=(()=>{class e{constructor(t){this.authService=t}ngOnInit(){this.authService.getLogger().verbose("MsalRedirectComponent activated"),this.authService.handleRedirectObservable().subscribe()}}return e.\u0275fac=function(t){return new(t||e)(Q(uo))},e.\u0275cmp=fs({type:e,selectors:[["app-redirect"]],decls:0,vars:0,template:function(t,r){},encapsulation:2}),e})(),xU=(()=>{class e{static forRoot(t,r,o){return{ngModule:e,providers:[{provide:yu,useValue:t},{provide:uT,useValue:r},{provide:Op,useValue:o},uo]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Qn({type:e}),e.\u0275inj=Ln({providers:[NU,ka],imports:[Tw]}),e})();var dr=S(861),dT=S(630),FU=S(803),vu=S(580);class hT{constructor(n){this.browserEnvironment=typeof window<"u",this.config=(0,FU._7)(n,this.browserEnvironment),this.logger=new dT.Y(this.config.system.loggerOptions,vu.u,vu.i),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}let LU=(()=>{class e{static initializeNestedAppAuthBridge(){return(0,dr.Z)(function*(){if(void 0===window)throw new Error("window is undefined");if(void 0===window.nestedAppAuthBridge)throw new Error("window.nestedAppAuthBridge is undefined");if(void 0===window.crypto)throw new Error("window.crypto is undefined");try{return e.crypto=window.crypto,window.nestedAppAuthBridge.addEventListener("message",r=>{const o=JSON.parse(r),i=e.bridgeRequests.find(s=>s.requestId===o.requestId);void 0!==i&&(e.bridgeRequests.splice(e.bridgeRequests.indexOf(i),1),o.success?i.resolve(o.body):i.reject(o.body))}),new Promise((r,o)=>{const i={messageType:"NestedAppAuthRequest",method:"GetInitContext",requestId:e.getRandomId()};e.bridgeRequests.push({requestId:i.requestId,method:i.method,resolve:r,reject:o}),window.nestedAppAuthBridge.postMessage(JSON.stringify(i))})}catch(t){throw window.console.log(t),t}})()}static getRandomId(){return e.crypto.randomUUID()}getTokenInteractive(t){return this.sendRequest("GetTokenPopup",t)}getTokenSilent(t){return this.sendRequest("GetToken",t)}getAccountInfo(t){let r="GetAccountByHomeId";return void 0!==t.homeAccountId&&(r="GetAccountByHomeId"),void 0!==t.localAccountId&&(r="GetAccountByLocalId"),void 0!==t.username&&(r="GetAccountByUsername"),this.sendRequest(r,t)}getActiveAccount(){return this.sendRequest("GetActiveAccount",void 0)}sendRequest(t,r){const o={messageType:"NestedAppAuthRequest",method:t,requestId:e.getRandomId(),body:r};return new Promise((s,l)=>{e.bridgeRequests.push({requestId:o.requestId,method:o.method,resolve:s,reject:l}),window.nestedAppAuthBridge.postMessage(JSON.stringify(o))})}constructor(t,r,o){this.sdkName=t,this.sdkVersion=r,this.capabilities=o}static create(){return(0,dr.Z)(function*(){const t=yield e.initializeNestedAppAuthBridge();return new e(t.sdkName,t.sdkVersion,t.capabilities)})()}}return e.bridgeRequests=[],e})(),UU=(()=>{class e extends hT{constructor(){super(...arguments),this.bridgeProxy=void 0,this.activeAccount=void 0}getModuleName(){return e.MODULE_NAME}getId(){return e.ID}getBridgeProxy(){return this.bridgeProxy}getActiveAccount(){return this.activeAccount}setActiveAccount(t){this.activeAccount=t}initialize(){var t=this;return(0,dr.Z)(function*(){try{if(typeof window<"u"){const r=yield LU.create();try{t.activeAccount=yield r.getActiveAccount()}catch{t.activeAccount=void 0}t.bridgeProxy=r,t.available=void 0!==r}else t.available=!1}catch{t.available=!1}finally{return t.available}})()}}return e.MODULE_NAME="",e.ID="TeamsAppOperatingContext",e})(),Pp=(()=>{class e extends hT{getModuleName(){return e.MODULE_NAME}getId(){return e.ID}initialize(){var t=this;return(0,dr.Z)(function*(){return t.available=typeof window<"u",t.available})()}}return e.MODULE_NAME="",e.ID="StandardOperatingContext",e})();class HU{constructor(n){this.config=n,this.logger=new dT.Y({loggerCallback:void 0,piiLoggingEnabled:!1,logLevel:void 0,correlationId:void 0},vu.u,vu.i)}createV3Controller(){var n=this;return(0,dr.Z)(function*(){const t=new Pp(n.config);return yield t.initialize(),yield(yield Promise.resolve().then(S.bind(S,291))).StandardController.createController(t)})()}createController(){var n=this;return(0,dr.Z)(function*(){const t=new Pp(n.config),r=new UU(n.config),o=[t.initialize(),r.initialize()];return yield Promise.all(o),r.isAvailable()&&r.getConfig().auth.supportsNestedAppAuth?yield(yield S.e(250).then(S.bind(S,250))).NestedAppAuthController.createController(r):t.isAvailable()?yield(yield Promise.resolve().then(S.bind(S,291))).StandardController.createController(t):null})()}}var BU=S(291);class xp{static createPublicClientApplication(n){return(0,dr.Z)(function*(){const r=yield new HU(n).createV3Controller();return new xp(n,r)})()}constructor(n,t){if(t)this.controller=t;else{const r=new Pp(n);this.controller=new BU.StandardController(r)}}initialize(){var n=this;return(0,dr.Z)(function*(){return n.controller.initialize()})()}acquireTokenPopup(n){var t=this;return(0,dr.Z)(function*(){return t.controller.acquireTokenPopup(n)})()}acquireTokenRedirect(n){return this.controller.acquireTokenRedirect(n)}acquireTokenSilent(n){return this.controller.acquireTokenSilent(n)}acquireTokenByCode(n){return this.controller.acquireTokenByCode(n)}addEventCallback(n){return this.controller.addEventCallback(n)}removeEventCallback(n){return this.controller.removeEventCallback(n)}addPerformanceCallback(n){return this.controller.addPerformanceCallback(n)}removePerformanceCallback(n){return this.controller.removePerformanceCallback(n)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(n){return this.controller.getAccount(n)}getAccountByHomeId(n){return this.controller.getAccountByHomeId(n)}getAccountByLocalId(n){return this.controller.getAccountByLocalId(n)}getAccountByUsername(n){return this.controller.getAccountByUsername(n)}getAllAccounts(n){return this.controller.getAllAccounts(n)}handleRedirectPromise(n){return this.controller.handleRedirectPromise(n)}loginPopup(n){return this.controller.loginPopup(n)}loginRedirect(n){return this.controller.loginRedirect(n)}logout(n){return this.controller.logout(n)}logoutRedirect(n){return this.controller.logoutRedirect(n)}logoutPopup(n){return this.controller.logoutPopup(n)}ssoSilent(n){return this.controller.ssoSilent(n)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(n){this.controller.setLogger(n)}setActiveAccount(n){this.controller.setActiveAccount(n)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(n,t){return this.controller.initializeWrapperLibrary(n,t)}setNavigationClient(n){this.controller.setNavigationClient(n)}getConfiguration(){return this.controller.getConfiguration()}hydrateCache(n,t){var r=this;return(0,dr.Z)(function*(){return r.controller.hydrateCache(n,t)})()}clearCache(n){return this.controller.clearCache(n)}}const VU=[];let jU=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Qn({type:e});static#n=this.\u0275inj=Ln({imports:[aT.forRoot(VU),aT]})}return e})();function TT(e){return null!=e}function AT(e){return Qs(e)?Ke(e):e}function ST(e){let n={};return e.forEach(t=>{n=null!=t?{...n,...t}:n}),0===Object.keys(n).length?null:n}function DT(e,n){return n.map(t=>t(e))}function bT(e){return e.map(n=>function ZU(e){return!e.validate}(n)?n:t=>n.validate(t))}function Lp(e){return null!=e?function MT(e){if(!e)return null;const n=e.filter(TT);return 0==n.length?null:function(t){return ST(DT(t,n))}}(bT(e)):null}function Up(e){return null!=e?function RT(e){if(!e)return null;const n=e.filter(TT);return 0==n.length?null:function(t){return function $U(...e){const n=rc(e),{args:t,keys:r}=Jw(e),o=new Ee(i=>{const{length:s}=t;if(!s)return void i.complete();const l=new Array(s);let u=s,h=s;for(let p=0;p<s;p++){let v=!1;jt(t[p]).subscribe(Ge(i,E=>{v||(v=!0,h--),l[p]=E},()=>u--,void 0,()=>{(!u||!v)&&(h||i.next(r?eI(r,l):l),i.complete())}))}});return n?o.pipe(Xw(n)):o}(DT(t,n).map(AT)).pipe(R(ST))}}(bT(e)):null}function Hp(e){return e?Array.isArray(e)?e:[e]:[]}function Cu(e,n){return Array.isArray(e)?e.includes(n):e===n}function PT(e,n){const t=Hp(n);return Hp(e).forEach(o=>{Cu(t,o)||t.push(o)}),t}function xT(e,n){return Hp(n).filter(t=>!Cu(e,t))}const Na="VALID",wu="INVALID",Ji="PENDING",Oa="DISABLED";function Iu(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class VT{constructor(n,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(n),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get valid(){return this.status===Na}get invalid(){return this.status===wu}get pending(){return this.status==Ji}get disabled(){return this.status===Oa}get enabled(){return this.status!==Oa}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._assignValidators(n)}setAsyncValidators(n){this._assignAsyncValidators(n)}addValidators(n){this.setValidators(PT(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(PT(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(xT(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(xT(n,this._rawAsyncValidators))}hasValidator(n){return Cu(this._rawValidators,n)}hasAsyncValidator(n){return Cu(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){this.touched=!0,this._parent&&!n.onlySelf&&this._parent.markAsTouched(n)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(n=>n.markAllAsTouched())}markAsUntouched(n={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}markAsDirty(n={}){this.pristine=!1,this._parent&&!n.onlySelf&&this._parent.markAsDirty(n)}markAsPristine(n={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}markAsPending(n={}){this.status=Ji,!1!==n.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!n.onlySelf&&this._parent.markAsPending(n)}disable(n={}){const t=this._parentMarkedDirty(n.onlySelf);this.status=Oa,this.errors=null,this._forEachChild(r=>{r.disable({...n,onlySelf:!0})}),this._updateValue(),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...n,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(n={}){const t=this._parentMarkedDirty(n.onlySelf);this.status=Na,this._forEachChild(r=>{r.enable({...n,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors({...n,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(n){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Na||this.status===Ji)&&this._runAsyncValidator(n.emitEvent)),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(n)}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Oa:Na}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n){if(this.asyncValidator){this.status=Ji,this._hasOwnPendingAsyncValidator=!0;const t=AT(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:n})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(n,t={}){this.errors=n,this._updateControlsErrors(!1!==t.emitEvent)}get(n){let t=n;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,o)=>r&&r._find(o),this)}getError(n,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[n]:null}hasError(n,t){return!!this.getError(n,t)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(n)}_initObservables(){this.valueChanges=new pt,this.statusChanges=new pt}_calculateStatus(){return this._allControlsDisabled()?Oa:this.errors?wu:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ji)?Ji:this._anyControlsHaveStatus(wu)?wu:Na}_anyControlsHaveStatus(n){return this._anyControls(t=>t.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n={}){this.pristine=!this._anyControlsDirty(),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}_updateTouched(n={}){this.touched=this._anyControlsTouched(),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){Iu(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(n){return null}_assignValidators(n){this._rawValidators=Array.isArray(n)?n.slice():n,this._composedValidatorFn=function tH(e){return Array.isArray(e)?Lp(e):e||null}(this._rawValidators)}_assignAsyncValidators(n){this._rawAsyncValidators=Array.isArray(n)?n.slice():n,this._composedAsyncValidatorFn=function nH(e){return Array.isArray(e)?Up(e):e||null}(this._rawAsyncValidators)}}function zT(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}function KT(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}const Qp=class extends VT{constructor(n=null,t,r){super(function jp(e){return(Iu(e)?e.validators:e)||null}(t),function $p(e,n){return(Iu(n)?n.asyncValidators:e)||null}(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Iu(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=KT(n)?n.value:n)}setValue(n,t={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(n,t={}){this.setValue(n,t)}reset(n=this.defaultValue,t={}){this._applyFormState(n),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){zT(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){zT(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){KT(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}};class bu{}class Mu{}class fr{constructor(n){this.normalizedNames=new Map,this.lazyUpdate=null,n?"string"==typeof n?this.lazyInit=()=>{this.headers=new Map,n.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const o=t.slice(0,r),i=o.toLowerCase(),s=t.slice(r+1).trim();this.maybeSetNormalizedName(o,i),this.headers.has(i)?this.headers.get(i).push(s):this.headers.set(i,[s])}})}:typeof Headers<"u"&&n instanceof Headers?(this.headers=new Map,n.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(n).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();const t=this.headers.get(n.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,t){return this.clone({name:n,value:t,op:"a"})}set(n,t){return this.clone({name:n,value:t,op:"s"})}delete(n,t){return this.clone({name:n,value:t,op:"d"})}maybeSetNormalizedName(n,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,n)}init(){this.lazyInit&&(this.lazyInit instanceof fr?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(t=>{this.headers.set(t,n.headers.get(t)),this.normalizedNames.set(t,n.normalizedNames.get(t))})}clone(n){const t=new fr;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof fr?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([n]),t}applyUpdate(n){const t=n.name.toLowerCase();switch(n.op){case"a":case"s":let r=n.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(n.name,t);const o=("a"===n.op?this.headers.get(t):void 0)||[];o.push(...r),this.headers.set(t,o);break;case"d":const i=n.value;if(i){let s=this.headers.get(t);if(!s)return;s=s.filter(l=>-1===i.indexOf(l)),0===s.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(n,t){const r=(Array.isArray(t)?t:[t]).map(i=>i.toString()),o=n.toLowerCase();this.headers.set(o,r),this.maybeSetNormalizedName(n,o)}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>n(this.normalizedNames.get(t),this.headers.get(t)))}}class jH{encodeKey(n){return gA(n)}encodeValue(n){return gA(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}}const GH=/%(\d[a-f0-9])/gi,zH={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function gA(e){return encodeURIComponent(e).replace(GH,(n,t)=>zH[t]??n)}function Ru(e){return`${e}`}class go{constructor(n={}){if(this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new jH,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function $H(e,n){const t=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(o=>{const i=o.indexOf("="),[s,l]=-1==i?[n.decodeKey(o),""]:[n.decodeKey(o.slice(0,i)),n.decodeValue(o.slice(i+1))],u=t.get(s)||[];u.push(l),t.set(s,u)}),t}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(t=>{const r=n.fromObject[t],o=Array.isArray(r)?r.map(Ru):[Ru(r)];this.map.set(t,o)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();const t=this.map.get(n);return t?t[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,t){return this.clone({param:n,value:t,op:"a"})}appendAll(n){const t=[];return Object.keys(n).forEach(r=>{const o=n[r];Array.isArray(o)?o.forEach(i=>{t.push({param:r,value:i,op:"a"})}):t.push({param:r,value:o,op:"a"})}),this.clone(t)}set(n,t){return this.clone({param:n,value:t,op:"s"})}delete(n,t){return this.clone({param:n,value:t,op:"d"})}toString(){return this.init(),this.keys().map(n=>{const t=this.encoder.encodeKey(n);return this.map.get(n).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(n=>""!==n).join("&")}clone(n){const t=new go({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(n),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":const t=("a"===n.op?this.map.get(n.param):void 0)||[];t.push(Ru(n.value)),this.map.set(n.param,t);break;case"d":if(void 0===n.value){this.map.delete(n.param);break}{let r=this.map.get(n.param)||[];const o=r.indexOf(Ru(n.value));-1!==o&&r.splice(o,1),r.length>0?this.map.set(n.param,r):this.map.delete(n.param)}}}),this.cloneFrom=this.updates=null)}}class KH{constructor(){this.map=new Map}set(n,t){return this.map.set(n,t),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}}function mA(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function yA(e){return typeof Blob<"u"&&e instanceof Blob}function vA(e){return typeof FormData<"u"&&e instanceof FormData}class La{constructor(n,t,r,o){let i;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=n.toUpperCase(),function qH(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==r?r:null,i=o):i=r,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params)),this.headers||(this.headers=new fr),this.context||(this.context=new KH),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=t;else{const l=t.indexOf("?");this.urlWithParams=t+(-1===l?"?":l<t.length-1?"&":"")+s}}else this.params=new go,this.urlWithParams=t}serializeBody(){return null===this.body?null:mA(this.body)||yA(this.body)||vA(this.body)||function WH(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof go?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||vA(this.body)?null:yA(this.body)?this.body.type||null:mA(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof go?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(n={}){const t=n.method||this.method,r=n.url||this.url,o=n.responseType||this.responseType,i=void 0!==n.body?n.body:this.body,s=void 0!==n.withCredentials?n.withCredentials:this.withCredentials,l=void 0!==n.reportProgress?n.reportProgress:this.reportProgress;let u=n.headers||this.headers,h=n.params||this.params;const p=n.context??this.context;return void 0!==n.setHeaders&&(u=Object.keys(n.setHeaders).reduce((v,E)=>v.set(E,n.setHeaders[E]),u)),n.setParams&&(h=Object.keys(n.setParams).reduce((v,E)=>v.set(E,n.setParams[E]),h)),new La(t,r,i,{params:h,headers:u,context:p,reportProgress:l,responseType:o,withCredentials:s})}}var Xi=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(Xi||{});class og{constructor(n,t=200,r="OK"){this.headers=n.headers||new fr,this.status=void 0!==n.status?n.status:t,this.statusText=n.statusText||r,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}}class ig extends og{constructor(n={}){super(n),this.type=Xi.ResponseHeader}clone(n={}){return new ig({headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class es extends og{constructor(n={}){super(n),this.type=Xi.Response,this.body=void 0!==n.body?n.body:null}clone(n={}){return new es({body:void 0!==n.body?n.body:this.body,headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class _A extends og{constructor(n){super(n,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${n.url||"(unknown url)"}`:`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}}function sg(e,n){return{body:n,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}let CA=(()=>{class e{constructor(t){this.handler=t}request(t,r,o={}){let i;if(t instanceof La)i=t;else{let u,h;u=o.headers instanceof fr?o.headers:new fr(o.headers),o.params&&(h=o.params instanceof go?o.params:new go({fromObject:o.params})),i=new La(t,r,void 0!==o.body?o.body:null,{headers:u,context:o.context,params:h,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const s=ge(i).pipe(ao(u=>this.handler.handle(u)));if(t instanceof La||"events"===o.observe)return s;const l=s.pipe(pn(u=>u instanceof es));switch(o.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return l.pipe(R(u=>{if(null!==u.body&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return l.pipe(R(u=>{if(null!==u.body&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return l.pipe(R(u=>{if(null!==u.body&&"string"!=typeof u.body)throw new Error("Response is not a string.");return u.body}));default:return l.pipe(R(u=>u.body))}case"response":return l;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new go).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,o={}){return this.request("PATCH",t,sg(o,r))}post(t,r,o={}){return this.request("POST",t,sg(o,r))}put(t,r,o={}){return this.request("PUT",t,sg(o,r))}static#e=this.\u0275fac=function(r){return new(r||e)(ue(bu))};static#t=this.\u0275prov=me({token:e,factory:e.\u0275fac})}return e})();function IA(e,n){return n(e)}function YH(e,n){return(t,r)=>n.intercept(t,{handle:o=>e(o,r)})}const TA=new de(""),Ua=new de(""),AA=new de("");function JH(){let e=null;return(n,t)=>{null===e&&(e=(he(TA,{optional:!0})??[]).reduceRight(YH,IA));const r=he(kl),o=r.add();return e(n,t).pipe(ga(()=>r.remove(o)))}}let SA=(()=>{class e extends bu{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=he(kl)}handle(t){if(null===this.chain){const o=Array.from(new Set([...this.injector.get(Ua),...this.injector.get(AA,[])]));this.chain=o.reduceRight((i,s)=>function QH(e,n,t){return(r,o)=>t.runInContext(()=>n(r,i=>e(i,o)))}(i,s,this.injector),IA)}const r=this.pendingTasks.add();return this.chain(t,o=>this.backend.handle(o)).pipe(ga(()=>this.pendingTasks.remove(r)))}static#e=this.\u0275fac=function(r){return new(r||e)(ue(Mu),ue(En))};static#t=this.\u0275prov=me({token:e,factory:e.\u0275fac})}return e})();const nB=/^\)\]\}',?\n/;let bA=(()=>{class e{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new q(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?Ke(r.\u0275loadImpl()):ge(null)).pipe(G(()=>new Ee(i=>{const s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((U,$)=>s.setRequestHeader(U,$.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const U=t.detectContentTypeHeader();null!==U&&s.setRequestHeader("Content-Type",U)}if(t.responseType){const U=t.responseType.toLowerCase();s.responseType="json"!==U?U:"text"}const l=t.serializeBody();let u=null;const h=()=>{if(null!==u)return u;const U=s.statusText||"OK",$=new fr(s.getAllResponseHeaders()),ee=function rB(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(s)||t.url;return u=new ig({headers:$,status:s.status,statusText:U,url:ee}),u},p=()=>{let{headers:U,status:$,statusText:ee,url:V}=h(),fe=null;204!==$&&(fe=typeof s.response>"u"?s.responseText:s.response),0===$&&($=fe?200:0);let _e=$>=200&&$<300;if("json"===t.responseType&&"string"==typeof fe){const Le=fe;fe=fe.replace(nB,"");try{fe=""!==fe?JSON.parse(fe):null}catch(Mt){fe=Le,_e&&(_e=!1,fe={error:Mt,text:fe})}}_e?(i.next(new es({body:fe,headers:U,status:$,statusText:ee,url:V||void 0})),i.complete()):i.error(new _A({error:fe,headers:U,status:$,statusText:ee,url:V||void 0}))},v=U=>{const{url:$}=h(),ee=new _A({error:U,status:s.status||0,statusText:s.statusText||"Unknown Error",url:$||void 0});i.error(ee)};let E=!1;const D=U=>{E||(i.next(h()),E=!0);let $={type:Xi.DownloadProgress,loaded:U.loaded};U.lengthComputable&&($.total=U.total),"text"===t.responseType&&s.responseText&&($.partialText=s.responseText),i.next($)},x=U=>{let $={type:Xi.UploadProgress,loaded:U.loaded};U.lengthComputable&&($.total=U.total),i.next($)};return s.addEventListener("load",p),s.addEventListener("error",v),s.addEventListener("timeout",v),s.addEventListener("abort",v),t.reportProgress&&(s.addEventListener("progress",D),null!==l&&s.upload&&s.upload.addEventListener("progress",x)),s.send(l),i.next({type:Xi.Sent}),()=>{s.removeEventListener("error",v),s.removeEventListener("abort",v),s.removeEventListener("load",p),s.removeEventListener("timeout",v),t.reportProgress&&(s.removeEventListener("progress",D),null!==l&&s.upload&&s.upload.removeEventListener("progress",x)),s.readyState!==s.DONE&&s.abort()}})))}static#e=this.\u0275fac=function(r){return new(r||e)(ue(Dw))};static#t=this.\u0275prov=me({token:e,factory:e.\u0275fac})}return e})();const ag=new de("XSRF_ENABLED"),MA=new de("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),RA=new de("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class kA{}let sB=(()=>{class e{constructor(t,r,o){this.doc=t,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=gw(t,this.cookieName),this.lastCookieString=t),this.lastToken}static#e=this.\u0275fac=function(r){return new(r||e)(ue(fn),ue(So),ue(MA))};static#t=this.\u0275prov=me({token:e,factory:e.\u0275fac})}return e})();function aB(e,n){const t=e.url.toLowerCase();if(!he(ag)||"GET"===e.method||"HEAD"===e.method||t.startsWith("http://")||t.startsWith("https://"))return n(e);const r=he(kA).getToken(),o=he(RA);return null!=r&&!e.headers.has(o)&&(e=e.clone({headers:e.headers.set(o,r)})),n(e)}var mo=function(e){return e[e.Interceptors=0]="Interceptors",e[e.LegacyInterceptors=1]="LegacyInterceptors",e[e.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",e[e.NoXsrfProtection=3]="NoXsrfProtection",e[e.JsonpSupport=4]="JsonpSupport",e[e.RequestsMadeViaParent=5]="RequestsMadeViaParent",e[e.Fetch=6]="Fetch",e}(mo||{});function cB(...e){const n=[CA,bA,SA,{provide:bu,useExisting:SA},{provide:Mu,useExisting:bA},{provide:Ua,useValue:aB,multi:!0},{provide:ag,useValue:!0},{provide:kA,useClass:sB}];for(const t of e)n.push(...t.\u0275providers);return function Jd(e){return{\u0275providers:e}}(n)}const NA=new de("LEGACY_INTERCEPTOR_FN");function lB(){return function Uo(e,n){return{\u0275kind:e,\u0275providers:n}}(mo.LegacyInterceptors,[{provide:NA,useFactory:JH},{provide:Ua,useExisting:NA,multi:!0}])}let uB=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Qn({type:e});static#n=this.\u0275inj=Ln({providers:[cB(lB())]})}return e})();function mB(e,n){if(1&e){const t=Ys();ht(0,"button",1),Ct("click",function(){return Er(t),wr(It().login())}),Zt(1,"Log in"),St()}}function yB(e,n){1&e&&no(0,"img",28),2&e&&Cl("src","assets/",It().$implicit,".jpg",Zc)}function vB(e,n){1&e&&no(0,"img",28),2&e&&sr("src",It().$implicit,Zc)}function _B(e,n){if(1&e){const t=Ys();ht(0,"div",25),to(1,yB,1,1,"img",26),to(2,vB,1,1,"img",26),ht(3,"button",27),Ct("click",function(){const i=Er(t).$implicit,s=It().index,l=It().index;return wr(It(2).removeImage(l,s,i))}),Zt(4,"X"),St()()}if(2&e){const t=n.index,r=It().index,o=It().index,i=It(2);jn(1),sr("ngIf",!i.StockFotos[o][r][t]),jn(1),sr("ngIf",i.StockFotos[o][r][t])}}function CB(e,n){if(1&e){const t=Ys();ht(0,"div")(1,"div",12)(2,"p",4),Zt(3),St(),no(4,"input",20)(5,"br"),St(),ht(6,"button",11),Ct("click",function(){Er(t);const o=It().index;return wr(It(2).removePage(o))}),Zt(7,"\xd7"),St(),ht(8,"div",21),to(9,_B,5,2,"div",22),ht(10,"div",23)(11,"button",24),Ct("click",function(){const i=Er(t).index,s=It().index;return wr(It(2).addImage(s,i))}),Zt(12,"+"),St()()()()}if(2&e){const t=n.$implicit,r=n.index,o=It().index;jn(3),Xs("Bladsy ",2*o+1+r,""),jn(1),$h("id",o),jn(5),sr("ngForOf",t)}}function EB(e,n){if(1&e&&(ht(0,"div",18),to(1,CB,13,3,"div",19),St()),2&e){const t=n.$implicit;jn(1),sr("ngForOf",t)}}function wB(e,n){if(1&e){const t=Ys();ht(0,"section")(1,"div",3)(2,"h1",4),Zt(3),St()(),ht(4,"div",3),to(5,EB,2,1,"div",5),ht(6,"div",6)(7,"button",7),Ct("click",function(){return Er(t),wr(It().addPage())}),Zt(8,"+ Bladsy"),St()()(),ht(9,"div",8)(10,"div",9)(11,"div",10)(12,"button",11),Ct("click",function(){return Er(t),wr(It().showModal="none")}),Zt(13,"\xd7"),St(),ht(14,"p"),Zt(15,"Sleutel die nommer van die foto in"),St(),ht(16,"div",12),no(17,"input",13,14),ht(19,"button",15),Ct("click",function(){Er(t);const o=_l(18);return It().newImage(o.value),wr(o.value="")}),Zt(20,"Kies foto"),St()(),ht(21,"p"),Zt(22,"OF"),St(),ht(23,"p"),Zt(24,"Kies jou eie foto"),St(),ht(25,"div",12),no(26,"input",16,17),ht(28,"button",15),Ct("click",function(){Er(t);const o=_l(27),i=_l(18);return It().newCustomImage(o),wr(i.value="")}),Zt(29,"Kies Eie foto"),St()()()()()()}if(2&e){const t=It();jn(3),Xs("",null==t.profile?null:t.profile.givenName," se Jaarboek"),jn(2),sr("ngForOf",t.FotoBoek),jn(4),function j_(e,n,t){ar(Si(Z(),e,n,t))}("display: ",t.showModal,"")}}let IB=(()=>{class e{constructor(t,r,o){this.authService=t,this.broadcastService=r,this.http=o,this.FotoBoek=[[["1","3"],[]]],this.StockFotos=[[[!1,!1],[]]],this.isIframe=!1,this.loginDisplay=!1,this._destroying$=new at,this.showModal="none",this.fotos=new Qp(""),this.page=0,this.part=0}ngOnInit(){this.broadcastService.inProgress$.pipe(pn(t=>t===ze.$H.None),iI(this._destroying$)).subscribe(()=>{this.setLoginDisplay(),this.getProfile()})}getProfile(){this.http.get("https://graph.microsoft.com/v1.0/me").subscribe(t=>{this.profile=t})}getFiles(){this.http.post("https://durbanvillehs-my.sharepoint.com/_layouts/15/FilePicker.aspx",{selection:{mode:"single"}}).subscribe(t=>{this.file=t,console.log(t)})}login(){this.authService.loginRedirect()}setLoginDisplay(){this.loginDisplay=this.authService.instance.getAllAccounts().length>0}ngOnDestroy(){this._destroying$.next(void 0),this._destroying$.complete()}addImage(t,r){this.showModal="block",this.page=t,this.part=r}removeImage(t,r,o){const i=this.FotoBoek[t][r].indexOf(o,0);this.FotoBoek[t][r].splice(i,1),this.StockFotos[t][r].splice(i,1)}newImage(t){this.FotoBoek[this.page][this.part].push(t),this.StockFotos[this.page][this.part].push(!1),this.showModal="none"}newCustomImage(t){var r=t.files[0];const o=new FileReader;o.onload=i=>{this.imageSrc=o.result,this.FotoBoek[this.page][this.part].push(o.result)},o.readAsDataURL(r),this.StockFotos[this.page][this.part].push(!0)}addPage(){this.FotoBoek.push([[],[]]),this.StockFotos.push([[],[]])}removePage(t){this.i=-1,this.FotoBoek.splice(t,1),this.StockFotos.splice(t,1)}static#e=this.\u0275fac=function(r){return new(r||e)(Q(uo),Q(ka),Q(CA))};static#t=this.\u0275cmp=fs({type:e,selectors:[["app-root"]],decls:4,vars:2,consts:[[3,"click",4,"ngIf"],[3,"click"],[4,"ngIf"],[1,"w3-container"],[1,"w3-text"],["class","w3-display-container w3-border w3-padding w3-row-padding",4,"ngFor","ngForOf"],[1,"w3-col","w3-display-container","w3-padding",2,"min-height","100px"],[1,"w3-btn","w3-round-large","w3-black","w3-xlarge","w3-display-middle",2,"margin","auto","min-height","50",3,"click"],[1,"w3-modal"],[1,"w3-modal-content"],[1,"w3-container","w3-padding"],[1,"w3-button","w3-display-topright",3,"click"],[1,"w3-row"],["type","text",1,"w3-input","w3-threequarter"],["fotoNommer",""],[1,"w3-button","w3-padding","w3-black",3,"click"],["type","file","accept","image/*",1,"w3-input","w3-threequarter"],["fotoCustom",""],[1,"w3-display-container","w3-border","w3-padding","w3-row-padding"],[4,"ngFor","ngForOf"],["type","text","placeholder","Opskrif vir die bladsy",1,"w3-input","w3-border",3,"id"],[2,"display","flex","flex-wrap","wrap"],["class","w3-display-container w3-col m4 s6 w3-card-4",4,"ngFor","ngForOf"],[1,"w3-col","s6","m4","w3-display-container","w3-padding",2,"min-height","100px"],[1,"w3-btn","w3-circle","w3-black","w3-xlarge","w3-display-middle",2,"margin","auto","min-height","50",3,"click"],[1,"w3-display-container","w3-col","m4","s6","w3-card-4"],["style","width: 100%;",3,"src",4,"ngIf"],[1,"w3-display-topleft","w3-btn","w3-margin","w3-circle","w3-black",3,"click"],[2,"width","100%",3,"src"]],template:function(r,o){1&r&&(to(0,mB,2,0,"button",0),ht(1,"button",1),Ct("click",function(){return o.getFiles()}),Zt(2,"Pick File"),St(),to(3,wB,30,5,"section",2)),2&r&&(sr("ngIf",!o.loginDisplay),jn(3),sr("ngIf",o.loginDisplay))},dependencies:[vw,Cw]})}return e})(),TB=(()=>{class e{constructor(t,r){this.authService=t,this.msalBroadcastService=r,this.loginDisplay=!1}ngOnInit(){this.msalBroadcastService.msalSubject$.pipe(pn(t=>t.eventType===Xt.t.LOGIN_SUCCESS)).subscribe(t=>{console.log(t)}),this.msalBroadcastService.inProgress$.pipe(pn(t=>t===ze.$H.None)).subscribe(()=>{this.setLoginDisplay()})}setLoginDisplay(){this.loginDisplay=this.authService.instance.getAllAccounts().length>0}static#e=this.\u0275fac=function(r){return new(r||e)(Q(uo),Q(ka))};static#t=this.\u0275cmp=fs({type:e,selectors:[["app-login"]],decls:0,vars:0,template:function(r,o){}})}return e})();function AB(){return new xp({auth:{clientId:"ae87628e-acd1-414d-b004-275ffe43e2d1",authority:"https://login.microsoftonline.com/4073cc9b-b7f3-4d1c-bac6-19cbe891b0a2",redirectUri:"http://localhost:4200",postLogoutRedirectUri:"http://localhost:4200"},cache:{cacheLocation:ze.Ix.LocalStorage},system:{allowNativeBroker:!1}})}function SB(){const e=new Map;return e.set("https://graph.microsoft.com/v1.0/me",["user.read","files.read"]),{interactionType:ze.s_.Redirect,protectedResourceMap:e}}let DB=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Qn({type:e,bootstrap:[TB,IB,PU]});static#n=this.\u0275inj=Ln({providers:[{provide:TA,useClass:OU,multi:!0},{provide:yu,useFactory:AB},{provide:Op,useFactory:SB},uo],imports:[GF,uB,jU,xU]})}return e})();jF().bootstrapModule(DB).catch(e=>console.error(e))},475:(Se,ne,S)=>{S.d(ne,{k:()=>C});class C{constructor(){this.cache=new Map}getItem(M){return this.cache.get(M)||null}setItem(M,O){this.cache.set(M,O)}removeItem(M){this.cache.delete(M)}getKeys(){const M=[];return this.cache.forEach((O,L)=>{M.push(L)}),M}containsKey(M){return this.cache.has(M)}clear(){this.cache.clear()}}},803:(Se,ne,S)=>{S.d(ne,{Is:()=>De,_7:()=>ce});var C=S(500),m=S(132),M=S(286),O=S(630),L=S(703),H=S(140),F=S(841);const y={sendGetRequestAsync:()=>Promise.reject((0,H.zP)(F.M2)),sendPostRequestAsync:()=>Promise.reject((0,H.zP)(F.M2))};var I=S(979);class P{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class B{generateId(){return"callback-id"}startMeasurement(j,X){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:I.$L.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:j,startTimeMs:Date.now(),correlationId:X||""},measurement:new P}}startPerformanceMeasurement(){return new P}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}var te=S(680),T=S(299),b=S(593);class z{navigateInternal(j,X){return z.defaultNavigateWindow(j,X)}navigateExternal(j,X){return z.defaultNavigateWindow(j,X)}static defaultNavigateWindow(j,X){return X.noHistory?window.location.replace(j):window.location.assign(j),new Promise(ie=>{setTimeout(()=>{ie(!0)},X.timeout)})}}var J=S(861),A=S(293),re=S(377);class Y{sendGetRequestAsync(j,X){var ie=this;return(0,J.Z)(function*(){let Ce;try{Ce=yield fetch(j,{method:b.EC.GET,headers:ie.getFetchHeaders(X)})}catch{throw window.navigator.onLine?(0,A.Z_)(re.C8):(0,A.Z_)(re.Mq)}try{return{headers:ie.getHeaderDict(Ce.headers),body:yield Ce.json(),status:Ce.status}}catch{throw(0,A.Z_)(re.w6)}})()}sendPostRequestAsync(j,X){var ie=this;return(0,J.Z)(function*(){const Ce=X&&X.body||C.gT.EMPTY_STRING;let ve;try{ve=yield fetch(j,{method:b.EC.POST,headers:ie.getFetchHeaders(X),body:Ce})}catch{throw window.navigator.onLine?(0,A.Z_)(re.Dc):(0,A.Z_)(re.Mq)}try{return{headers:ie.getHeaderDict(ve.headers),body:yield ve.json(),status:ve.status}}catch{throw(0,A.Z_)(re.w6)}})()}getFetchHeaders(j){const X=new Headers;if(!j||!j.headers)return X;const ie=j.headers;return Object.keys(ie).forEach(Ce=>{X.append(Ce,ie[Ce])}),X}getHeaderDict(j){const X={};return j.forEach((ie,Ce)=>{X[Ce]=ie}),X}}const Ue=6e4,De=6e3,se=3e4,we=2e3;function ce({auth:W,cache:j,system:X,telemetry:ie},Ce){const ve={clientId:C.gT.EMPTY_STRING,authority:`${C.gT.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:C.gT.EMPTY_STRING,authorityMetadata:C.gT.EMPTY_STRING,redirectUri:C.gT.EMPTY_STRING,postLogoutRedirectUri:C.gT.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:m.A.AAD,OIDCOptions:{serverResponseType:C.rg.FRAGMENT,defaultScopes:[C.gT.OPENID_SCOPE,C.gT.PROFILE_SCOPE,C.gT.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:M.z.None,tenant:C.gT.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1},xe={cacheLocation:b.Ix.SessionStorage,temporaryCacheLocation:b.Ix.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!(!j||j.cacheLocation!==b.Ix.LocalStorage),claimsBasedCachingEnabled:!1},ke={loggerCallback:()=>{},logLevel:O.i.Info,piiLoggingEnabled:!1},Ye={...{...L.z,loggerOptions:ke,networkClient:Ce?new Y:y,navigationClient:new z,loadFrameTimeout:0,windowHashTimeout:X?.loadFrameTimeout||Ue,iframeHashTimeout:X?.loadFrameTimeout||De,navigateFrameWait:0,redirectNavigationTimeout:se,asyncPopups:!1,allowRedirectInIframe:!1,allowNativeBroker:!1,nativeBrokerHandshakeTimeout:X?.nativeBrokerHandshakeTimeout||we,pollIntervalMilliseconds:b.qx.DEFAULT_POLL_INTERVAL_MS},...X,loggerOptions:X?.loggerOptions||ke},ut={application:{appName:C.gT.EMPTY_STRING,appVersion:C.gT.EMPTY_STRING},client:new B};if(W?.protocolMode!==m.A.OIDC&&W?.OIDCOptions&&new O.Y(Ye.loggerOptions).warning(JSON.stringify((0,te.ei)(T.qz))),W?.protocolMode&&W.protocolMode!==m.A.AAD&&Ye?.allowNativeBroker)throw(0,te.ei)(T.Ol);return{auth:{...ve,...W,OIDCOptions:{...ve.OIDCOptions,...W?.OIDCOptions}},cache:{...xe,...j},system:Ye,telemetry:{...ut,...ie}}}},291:(Se,ne,S)=>{S.r(ne),S.d(ne,{StandardController:()=>yo});var C=S(861),m=S(341),M=S(214),O=S(63),H=S(581),F=S(140),y=S(500),I=S(322),P=S(680),B=S(132),te=S(441);class T{constructor(){this.expiresAt=te.I.nowSeconds()+y.QU.REFRESH_TIME_SECONDS}updateCloudDiscoveryMetadata(a,c){this.aliases=a.aliases,this.preferred_cache=a.preferred_cache,this.preferred_network=a.preferred_network,this.aliasesFromNetwork=c}updateEndpointMetadata(a,c){this.authorization_endpoint=a.authorization_endpoint,this.token_endpoint=a.token_endpoint,this.end_session_endpoint=a.end_session_endpoint,this.issuer=a.issuer,this.endpointsFromNetwork=c,this.jwks_uri=a.jwks_uri}updateCanonicalAuthority(a){this.canonical_authority=a}resetExpiresAt(){this.expiresAt=te.I.nowSeconds()+y.QU.REFRESH_TIME_SECONDS}isExpired(){return this.expiresAt<=te.I.nowSeconds()}static isAuthorityMetadataEntity(a,c){return!!c&&0===a.indexOf(y.QU.CACHE_KEY)&&c.hasOwnProperty("aliases")&&c.hasOwnProperty("preferred_cache")&&c.hasOwnProperty("preferred_network")&&c.hasOwnProperty("canonical_authority")&&c.hasOwnProperty("authorization_endpoint")&&c.hasOwnProperty("token_endpoint")&&c.hasOwnProperty("issuer")&&c.hasOwnProperty("aliasesFromNetwork")&&c.hasOwnProperty("endpointsFromNetwork")&&c.hasOwnProperty("expiresAt")&&c.hasOwnProperty("jwks_uri")}}var b=S(286),A=S(979);const re=(G,a,c,d,f)=>(...g)=>{c.trace(`Executing function ${a}`);const _=d?.startMeasurement(a,f);try{const w=G(...g);return _?.end({success:!0}),c.trace(`Returning result from ${a}`),w}catch(w){c.trace(`Error occurred in ${a}`);try{c.trace(JSON.stringify(w))}catch{c.trace("Unable to print error message.")}throw _?.end({success:!1}),w}},Y=(G,a,c,d,f)=>(...g)=>{c.trace(`Executing function ${a}`);const _=d?.startMeasurement(a,f);return d?.setPreQueueTime(a,f),G(...g).then(w=>(c.trace(`Returning result from ${a}`),_?.end({success:!0}),w)).catch(w=>{c.trace(`Error occurred in ${a}`);try{c.trace(JSON.stringify(w))}catch{c.trace("Unable to print error message.")}throw _?.end({success:!1}),w})};let Ue=(()=>{class G{constructor(c,d,f,g){this.networkInterface=c,this.logger=d,this.performanceClient=f,this.correlationId=g}detectRegion(c,d){var f=this;return(0,C.Z)(function*(){f.performanceClient?.addQueueMeasurement(A.Ak.RegionDiscoveryDetectRegion,f.correlationId);let g=c;if(g)d.region_source=y.W.ENVIRONMENT_VARIABLE;else{const _=G.IMDS_OPTIONS;try{const w=yield Y(f.getRegionFromIMDS.bind(f),A.Ak.RegionDiscoveryGetRegionFromIMDS,f.logger,f.performanceClient,f.correlationId)(y.gT.IMDS_VERSION,_);if(w.status===y.YY.httpSuccess&&(g=w.body,d.region_source=y.W.IMDS),w.status===y.YY.httpBadRequest){const N=yield Y(f.getCurrentVersion.bind(f),A.Ak.RegionDiscoveryGetCurrentVersion,f.logger,f.performanceClient,f.correlationId)(_);if(!N)return d.region_source=y.W.FAILED_AUTO_DETECTION,null;const k=yield Y(f.getRegionFromIMDS.bind(f),A.Ak.RegionDiscoveryGetRegionFromIMDS,f.logger,f.performanceClient,f.correlationId)(N,_);k.status===y.YY.httpSuccess&&(g=k.body,d.region_source=y.W.IMDS)}}catch{return d.region_source=y.W.FAILED_AUTO_DETECTION,null}}return g||(d.region_source=y.W.FAILED_AUTO_DETECTION),g||null})()}getRegionFromIMDS(c,d){var f=this;return(0,C.Z)(function*(){return f.performanceClient?.addQueueMeasurement(A.Ak.RegionDiscoveryGetRegionFromIMDS,f.correlationId),f.networkInterface.sendGetRequestAsync(`${y.gT.IMDS_ENDPOINT}?api-version=${c}&format=text`,d,y.gT.IMDS_TIMEOUT)})()}getCurrentVersion(c){var d=this;return(0,C.Z)(function*(){d.performanceClient?.addQueueMeasurement(A.Ak.RegionDiscoveryGetCurrentVersion,d.correlationId);try{const f=yield d.networkInterface.sendGetRequestAsync(`${y.gT.IMDS_ENDPOINT}?format=json`,c);return f.status===y.YY.httpBadRequest&&f.body&&f.body["newest-versions"]&&f.body["newest-versions"].length>0?f.body["newest-versions"][0]:null}catch{return null}})()}}return G.IMDS_OPTIONS={headers:{Metadata:"true"}},G})();var De=S(481),se=S(841),we=S(299);class ce{constructor(a,c,d,f,g,_,w){this.canonicalAuthority=a,this._canonicalAuthority.validateAsUri(),this.networkInterface=c,this.cacheManager=d,this.authorityOptions=f,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=g,this.performanceClient=_,this.correlationId=w,this.regionDiscovery=new Ue(c,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(a){if(a.HostNameAndPort.endsWith(y.gT.CIAM_AUTH_URL))return O.a.Ciam;const c=a.PathSegments;if(c.length)switch(c[0].toLowerCase()){case y.gT.ADFS:return O.a.Adfs;case y.gT.DSTS:return O.a.Dsts}return O.a.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(a){this._canonicalAuthority=new H.G(a),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw(0,F.zP)(se.HO)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw(0,F.zP)(se.HO)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw(0,F.zP)(se.HO)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw(0,F.zP)(se.ig);return this.replacePath(this.metadata.end_session_endpoint)}throw(0,F.zP)(se.HO)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw(0,F.zP)(se.HO)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw(0,F.zP)(se.HO)}canReplaceTenant(a){return 1===a.PathSegments.length&&!ce.reservedTenantDomains.has(a.PathSegments[0])&&this.getAuthorityType(a)===O.a.Default&&this.protocolMode===B.A.AAD}replaceTenant(a){return a.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(a){let c=a;const f=new H.G(this.metadata.canonical_authority).getUrlComponents(),g=f.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((w,N)=>{let k=g[N];if(0===N&&this.canReplaceTenant(f)){const K=new H.G(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];k!==K&&(this.logger.verbose(`Replacing tenant domain name ${k} with id ${K}`),k=K)}w!==k&&(c=c.replace(`/${k}/`,`/${w}/`))}),this.replaceTenant(c)}get defaultOpenIdConfigurationEndpoint(){const a=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===O.a.Adfs||this.protocolMode!==B.A.AAD&&!this.isAliasOfKnownMicrosoftAuthority(a)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}resolveEndpointsAsync(){var a=this;return(0,C.Z)(function*(){a.performanceClient?.addQueueMeasurement(A.Ak.AuthorityResolveEndpointsAsync,a.correlationId);const c=a.getCurrentMetadataEntity(),d=yield Y(a.updateCloudDiscoveryMetadata.bind(a),A.Ak.AuthorityUpdateCloudDiscoveryMetadata,a.logger,a.performanceClient,a.correlationId)(c);a.canonicalAuthority=a.canonicalAuthority.replace(a.hostnameAndPort,c.preferred_network);const f=yield Y(a.updateEndpointMetadata.bind(a),A.Ak.AuthorityUpdateEndpointMetadata,a.logger,a.performanceClient,a.correlationId)(c);a.updateCachedMetadata(c,d,{source:f})})()}getCurrentMetadataEntity(){let a=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return a||(a=new T,a.updateCanonicalAuthority(this.canonicalAuthority)),a}updateCachedMetadata(a,c,d){c!==y.pQ.CACHE&&d?.source!==y.pQ.CACHE&&(a.resetExpiresAt(),a.updateCanonicalAuthority(this.canonicalAuthority));const f=this.cacheManager.generateAuthorityMetadataCacheKey(a.preferred_cache);this.cacheManager.setAuthorityMetadata(f,a),this.metadata=a}updateEndpointMetadata(a){var c=this;return(0,C.Z)(function*(){c.performanceClient?.addQueueMeasurement(A.Ak.AuthorityUpdateEndpointMetadata,c.correlationId);const d=c.updateEndpointMetadataFromLocalSources(a);if(d){if(d.source===y.pQ.HARDCODED_VALUES&&c.authorityOptions.azureRegionConfiguration?.azureRegion&&d.metadata){const g=yield Y(c.updateMetadataWithRegionalInformation.bind(c),A.Ak.AuthorityUpdateMetadataWithRegionalInformation,c.logger,c.performanceClient,c.correlationId)(d.metadata);a.updateEndpointMetadata(g,!1)}return d.source}let f=yield Y(c.getEndpointMetadataFromNetwork.bind(c),A.Ak.AuthorityGetEndpointMetadataFromNetwork,c.logger,c.performanceClient,c.correlationId)();if(f)return c.authorityOptions.azureRegionConfiguration?.azureRegion&&(f=yield Y(c.updateMetadataWithRegionalInformation.bind(c),A.Ak.AuthorityUpdateMetadataWithRegionalInformation,c.logger,c.performanceClient,c.correlationId)(f)),a.updateEndpointMetadata(f,!0),y.pQ.NETWORK;throw(0,F.zP)(se.Ce,c.defaultOpenIdConfigurationEndpoint)})()}updateEndpointMetadataFromLocalSources(a){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const c=this.getEndpointMetadataFromConfig();if(c)return this.logger.verbose("Found endpoint metadata in authority configuration"),a.updateEndpointMetadata(c,!1),{source:y.pQ.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const f=this.getEndpointMetadataFromHardcodedValues();if(f)return a.updateEndpointMetadata(f,!1),{source:y.pQ.HARDCODED_VALUES,metadata:f};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const d=a.isExpired();return this.isAuthoritySameType(a)&&a.endpointsFromNetwork&&!d?(this.logger.verbose("Found endpoint metadata in the cache."),{source:y.pQ.CACHE}):(d&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(a){return new H.G(a.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw(0,P.ei)(we.zx)}return null}getEndpointMetadataFromNetwork(){var a=this;return(0,C.Z)(function*(){a.performanceClient?.addQueueMeasurement(A.Ak.AuthorityGetEndpointMetadataFromNetwork,a.correlationId);const c={},d=a.defaultOpenIdConfigurationEndpoint;a.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${d}`);try{const f=yield a.networkInterface.sendGetRequestAsync(d,c);return function L(G){return G.hasOwnProperty("authorization_endpoint")&&G.hasOwnProperty("token_endpoint")&&G.hasOwnProperty("issuer")&&G.hasOwnProperty("jwks_uri")}(f.body)?f.body:(a.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(f){return a.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${f}`),null}})()}getEndpointMetadataFromHardcodedValues(){return this.canonicalAuthority in I.Qh?I.Qh[this.canonicalAuthority]:null}updateMetadataWithRegionalInformation(a){var c=this;return(0,C.Z)(function*(){c.performanceClient?.addQueueMeasurement(A.Ak.AuthorityUpdateMetadataWithRegionalInformation,c.correlationId);const d=c.authorityOptions.azureRegionConfiguration?.azureRegion;if(d){if(d!==y.gT.AZURE_REGION_AUTO_DISCOVER_FLAG)return c.regionDiscoveryMetadata.region_outcome=y.ki.CONFIGURED_NO_AUTO_DETECTION,c.regionDiscoveryMetadata.region_used=d,ce.replaceWithRegionalInformation(a,d);const f=yield Y(c.regionDiscovery.detectRegion.bind(c.regionDiscovery),A.Ak.RegionDiscoveryDetectRegion,c.logger,c.performanceClient,c.correlationId)(c.authorityOptions.azureRegionConfiguration?.environmentRegion,c.regionDiscoveryMetadata);if(f)return c.regionDiscoveryMetadata.region_outcome=y.ki.AUTO_DETECTION_REQUESTED_SUCCESSFUL,c.regionDiscoveryMetadata.region_used=f,ce.replaceWithRegionalInformation(a,f);c.regionDiscoveryMetadata.region_outcome=y.ki.AUTO_DETECTION_REQUESTED_FAILED}return a})()}updateCloudDiscoveryMetadata(a){var c=this;return(0,C.Z)(function*(){c.performanceClient?.addQueueMeasurement(A.Ak.AuthorityUpdateCloudDiscoveryMetadata,c.correlationId);const d=c.updateCloudDiscoveryMetadataFromLocalSources(a);if(d)return d;const f=yield Y(c.getCloudDiscoveryMetadataFromNetwork.bind(c),A.Ak.AuthorityGetCloudDiscoveryMetadataFromNetwork,c.logger,c.performanceClient,c.correlationId)();if(f)return a.updateCloudDiscoveryMetadata(f,!0),y.pQ.NETWORK;throw(0,P.ei)(we.o_)})()}updateCloudDiscoveryMetadataFromLocalSources(a){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||y.gT.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||y.gT.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${a.canonical_authority||y.gT.NOT_APPLICABLE}`);const c=this.getCloudDiscoveryMetadataFromConfig();if(c)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),a.updateCloudDiscoveryMetadata(c,!1),y.pQ.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const f=(0,I.ix)(this.canonicalAuthority);if(f)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),a.updateCloudDiscoveryMetadata(f,!1),y.pQ.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}const d=a.isExpired();return this.isAuthoritySameType(a)&&a.aliasesFromNetwork&&!d?(this.logger.verbose("Found cloud discovery metadata in the cache."),y.pQ.CACHE):(d&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===O.a.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),ce.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const a=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),c=(0,I.eM)(a.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),c)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),c;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),(0,P.ei)(we.E)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),ce.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}getCloudDiscoveryMetadataFromNetwork(){var a=this;return(0,C.Z)(function*(){a.performanceClient?.addQueueMeasurement(A.Ak.AuthorityGetCloudDiscoveryMetadataFromNetwork,a.correlationId);const c=`${y.gT.AAD_INSTANCE_DISCOVERY_ENDPT}${a.canonicalAuthority}oauth2/v2.0/authorize`,d={};let f=null;try{const g=yield a.networkInterface.sendGetRequestAsync(c,d);let _,w;if(function z(G){return G.hasOwnProperty("tenant_discovery_endpoint")&&G.hasOwnProperty("metadata")}(g.body))_=g.body,w=_.metadata,a.logger.verbosePii(`tenant_discovery_endpoint is: ${_.tenant_discovery_endpoint}`);else{if(!function J(G){return G.hasOwnProperty("error")&&G.hasOwnProperty("error_description")}(g.body))return a.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;if(a.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${g.status}`),_=g.body,_.error===y.gT.INVALID_INSTANCE)return a.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;a.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${_.error}`),a.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${_.error_description}`),a.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),w=[]}a.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),f=(0,I.eM)(w,a.hostnameAndPort)}catch(g){return a.logger.error(g instanceof De.l4?`There was a network error while attempting to get the cloud discovery instance metadata.\nError: ${g.errorCode}\nError Description: ${g.errorMessage}`:`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.\nError: ${g.name}\nError Description: ${g.message}`),null}return f||(a.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),a.logger.verbose("Creating custom Authority for custom domain scenario."),f=ce.createCloudDiscoveryMetadataFromHost(a.hostnameAndPort)),f})()}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(c=>H.G.getDomainFromUrl(c).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(a,c){let d;return c&&c.azureCloudInstance!==b.z.None&&(d=`${c.azureCloudInstance}/${c.tenant?c.tenant:y.gT.DEFAULT_COMMON_TENANT}/`),d||a}static createCloudDiscoveryMetadataFromHost(a){return{preferred_network:a,preferred_cache:a,aliases:[a]}}getPreferredCache(){if(this.discoveryComplete())return this.metadata.preferred_cache;throw(0,F.zP)(se.HO)}isAlias(a){return this.metadata.aliases.indexOf(a)>-1}isAliasOfKnownMicrosoftAuthority(a){return I.wn.has(a)}static isPublicCloudAuthority(a){return y.gT.KNOWN_PUBLIC_CLOUDS.indexOf(a)>=0}static buildRegionalAuthorityString(a,c,d){const f=new H.G(a);f.validateAsUri();const g=f.getUrlComponents();let _=`${c}.${g.HostNameAndPort}`;this.isPublicCloudAuthority(g.HostNameAndPort)&&(_=`${c}.${y.gT.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const w=H.G.constructAuthorityUriFromObject({...f.getUrlComponents(),HostNameAndPort:_}).urlString;return d?`${w}?${d}`:w}static replaceWithRegionalInformation(a,c){const d={...a};return d.authorization_endpoint=ce.buildRegionalAuthorityString(d.authorization_endpoint,c),d.token_endpoint=ce.buildRegionalAuthorityString(d.token_endpoint,c,y.gT.REGIONAL_AUTH_NON_MSI_QUERY_STRING),d.end_session_endpoint&&(d.end_session_endpoint=ce.buildRegionalAuthorityString(d.end_session_endpoint,c)),d}static transformCIAMAuthority(a){let c=a;const f=new H.G(a).getUrlComponents();return 0===f.PathSegments.length&&f.HostNameAndPort.endsWith(y.gT.CIAM_AUTH_URL)&&(c=`${c}${f.HostNameAndPort.split(".")[0]}${y.gT.AAD_TENANT_DOMAIN_SUFFIX}`),c}}function W(G){return G.endsWith(y.gT.FORWARD_SLASH)?G:`${G}${y.gT.FORWARD_SLASH}`}ce.reservedTenantDomains=new Set(["{tenant}","{tenantid}",y.Nb.COMMON,y.Nb.CONSUMERS,y.Nb.ORGANIZATIONS]);var X=S(544),ie=S(603),Ce=S(498),ve=S(723);class xe{generateAccountId(){return xe.generateAccountIdForCacheKey(this.homeAccountId,this.environment)}generateCredentialId(){return xe.generateCredentialIdForCacheKey(this.credentialType,this.clientId,this.realm,this.familyId)}generateTarget(){return xe.generateTargetForCacheKey(this.target)}generateCredentialKey(){return xe.generateCredentialCacheKey(this.homeAccountId,this.environment,this.credentialType,this.clientId,this.realm,this.target,this.familyId,this.tokenType,this.requestedClaimsHash)}generateType(){switch(this.credentialType){case y.d3.ID_TOKEN:return y.LL.ID_TOKEN;case y.d3.ACCESS_TOKEN:case y.d3.ACCESS_TOKEN_WITH_AUTH_SCHEME:return y.LL.ACCESS_TOKEN;case y.d3.REFRESH_TOKEN:return y.LL.REFRESH_TOKEN;default:throw(0,F.zP)(se.cy)}}static generateCredentialCacheKey(a,c,d,f,g,_,w,N,k){return[this.generateAccountIdForCacheKey(a,c),this.generateCredentialIdForCacheKey(d,f,g,w),this.generateTargetForCacheKey(_),this.generateClaimsHashForCacheKey(k),this.generateSchemeForCacheKey(N)].join(y.Bv.CACHE_KEY_SEPARATOR).toLowerCase()}static generateAccountIdForCacheKey(a,c){return[a,c].join(y.Bv.CACHE_KEY_SEPARATOR).toLowerCase()}static generateCredentialIdForCacheKey(a,c,d,f){return[a,a===y.d3.REFRESH_TOKEN&&f||c,d||y.gT.EMPTY_STRING].join(y.Bv.CACHE_KEY_SEPARATOR).toLowerCase()}static generateTargetForCacheKey(a){return(a||y.gT.EMPTY_STRING).toLowerCase()}static generateClaimsHashForCacheKey(a){return(a||y.gT.EMPTY_STRING).toLowerCase()}static generateSchemeForCacheKey(a){return a&&a.toLowerCase()!==y.hO.BEARER.toLowerCase()?a.toLowerCase():y.gT.EMPTY_STRING}}class ke extends xe{static createIdTokenEntity(a,c,d,f,g){const _=new ke;return _.credentialType=y.d3.ID_TOKEN,_.homeAccountId=a,_.environment=c,_.clientId=f,_.secret=d,_.realm=g,_}static isIdTokenEntity(a){return!!a&&a.hasOwnProperty("homeAccountId")&&a.hasOwnProperty("environment")&&a.hasOwnProperty("credentialType")&&a.hasOwnProperty("realm")&&a.hasOwnProperty("clientId")&&a.hasOwnProperty("secret")&&a.credentialType===y.d3.ID_TOKEN}}var Ee=S(82);class Ye extends xe{static createAccessTokenEntity(a,c,d,f,g,_,w,N,k,K,le,be,Qe,q,yt){const oe=new Ye;oe.homeAccountId=a,oe.credentialType=y.d3.ACCESS_TOKEN,oe.secret=d;const Oe=te.I.nowSeconds();if(oe.cachedAt=Oe.toString(),oe.expiresOn=w.toString(),oe.extendedExpiresOn=N.toString(),K&&(oe.refreshOn=K.toString()),oe.environment=c,oe.clientId=f,oe.realm=g,oe.target=_,oe.userAssertionHash=be,oe.tokenType=le||y.hO.BEARER,q&&(oe.requestedClaims=q,oe.requestedClaimsHash=yt),oe.tokenType?.toLowerCase()!==y.hO.BEARER.toLowerCase())switch(oe.credentialType=y.d3.ACCESS_TOKEN_WITH_AUTH_SCHEME,oe.tokenType){case y.hO.POP:const mn=(0,Ee.Z_)(d,k.base64Decode);if(!mn?.cnf?.kid)throw(0,F.zP)(se.P_);oe.keyId=mn.cnf.kid;break;case y.hO.SSH:oe.keyId=Qe}return oe}static isAccessTokenEntity(a){return!!a&&a.hasOwnProperty("homeAccountId")&&a.hasOwnProperty("environment")&&a.hasOwnProperty("credentialType")&&a.hasOwnProperty("realm")&&a.hasOwnProperty("clientId")&&a.hasOwnProperty("secret")&&a.hasOwnProperty("target")&&(a.credentialType===y.d3.ACCESS_TOKEN||a.credentialType===y.d3.ACCESS_TOKEN_WITH_AUTH_SCHEME)}}class ut extends xe{static createRefreshTokenEntity(a,c,d,f,g,_){const w=new ut;return w.clientId=f,w.credentialType=y.d3.REFRESH_TOKEN,w.environment=c,w.homeAccountId=a,w.secret=d,w.userAssertionHash=_,g&&(w.familyId=g),w}static isRefreshTokenEntity(a){return!!a&&a.hasOwnProperty("homeAccountId")&&a.hasOwnProperty("environment")&&a.hasOwnProperty("credentialType")&&a.hasOwnProperty("clientId")&&a.hasOwnProperty("secret")&&a.credentialType===y.d3.REFRESH_TOKEN}}class bt{generateAppMetadataKey(){return bt.generateAppMetadataCacheKey(this.environment,this.clientId)}static generateAppMetadataCacheKey(a,c){return[y.dg,a,c].join(y.Bv.CACHE_KEY_SEPARATOR).toLowerCase()}static createAppMetadataEntity(a,c,d){const f=new bt;return f.clientId=a,f.environment=c,d&&(f.familyId=d),f}static isAppMetadataEntity(a,c){return!!c&&0===a.indexOf(y.dg)&&c.hasOwnProperty("clientId")&&c.hasOwnProperty("environment")}}class gn{constructor(){this.failedRequests=[],this.errors=[],this.cacheHits=0}static isServerTelemetryEntity(a,c){const d=0===a.indexOf(y.HN.CACHE_KEY);let f=!0;return c&&(f=c.hasOwnProperty("failedRequests")&&c.hasOwnProperty("errors")&&c.hasOwnProperty("cacheHits")),d&&f}}class at{static isThrottlingEntity(a,c){let d=!1;a&&(d=0===a.indexOf(y.bb.THROTTLING_PREFIX));let f=!0;return c&&(f=c.hasOwnProperty("throttleTime")),d&&f}}var tn=S(92);class wt{static setRequestState(a,c,d){const f=wt.generateLibraryState(a,d);return c?`${f}${y.gT.RESOURCE_DELIM}${c}`:f}static generateLibraryState(a,c){if(!a)throw(0,F.zP)(se.QL);const d={id:a.createNewGuid()};c&&(d.meta=c);const f=JSON.stringify(d);return a.base64Encode(f)}static parseRequestState(a,c){if(!a)throw(0,F.zP)(se.QL);if(!c)throw(0,F.zP)(se.r8);try{const d=c.split(y.gT.RESOURCE_DELIM),f=d[0],g=d.length>1?d.slice(1).join(y.gT.RESOURCE_DELIM):y.gT.EMPTY_STRING,_=a.base64Decode(f),w=JSON.parse(_);return{userRequestState:g||y.gT.EMPTY_STRING,libraryState:w}}catch{throw(0,F.zP)(se.r8)}}}class Ge{constructor(a,c,d,f,g){this.account=a||null,this.idToken=c||null,this.accessToken=d||null,this.refreshToken=f||null,this.appMetadata=g||null}}var pe=S(293),R=S(593),Hr=S(325),Ha=S(94);class Bo{constructor(a){this.validateWindowStorage(a),this.windowStorage=window[a]}validateWindowStorage(a){if(a!==R.Ix.LocalStorage&&a!==R.Ix.SessionStorage||!window[a])throw(0,Hr.Z1)(Ha.m4)}getItem(a){return this.windowStorage.getItem(a)}setItem(a,c){this.windowStorage.setItem(a,c)}removeItem(a){this.windowStorage.removeItem(a)}getKeys(){return Object.keys(this.windowStorage)}containsKey(a){return this.windowStorage.hasOwnProperty(a)}}var Ba=S(475);class Va{static extractBrowserRequestState(a,c){if(!c)return null;try{return wt.parseRequestState(a,c).libraryState.meta}catch{throw(0,F.zP)(se.r8)}}static parseServerResponseFromHash(a){if(!a)return{};const c=new H.G(a);return H.G.getDeserializedHash(c.getHash())}}var Vo=S(787),ja=S(173),ye=S(377);class $a extends ve.L{constructor(a,c,d,f,g){super(a,d,f,g),this.COOKIE_LIFE_MULTIPLIER=864e5,this.cacheConfig=c,this.logger=f,this.internalStorage=new Ba.k,this.browserStorage=this.setupBrowserStorage(this.cacheConfig.cacheLocation),this.temporaryCacheStorage=this.setupTemporaryCacheStorage(this.cacheConfig.temporaryCacheLocation,this.cacheConfig.cacheLocation),c.cacheMigrationEnabled&&(this.migrateCacheEntries(),this.createKeyMaps())}setupBrowserStorage(a){switch(a){case R.Ix.LocalStorage:case R.Ix.SessionStorage:try{return new Bo(a)}catch(c){this.logger.verbose(c);break}}return this.cacheConfig.cacheLocation=R.Ix.MemoryStorage,new Ba.k}setupTemporaryCacheStorage(a,c){switch(c){case R.Ix.LocalStorage:case R.Ix.SessionStorage:try{return new Bo(a||R.Ix.SessionStorage)}catch(d){return this.logger.verbose(d),this.internalStorage}default:return this.internalStorage}}migrateCacheEntries(){const c=`${y.gT.CACHE_PREFIX}.${y.Vi.CLIENT_INFO}`,d=`${y.gT.CACHE_PREFIX}.${y.Vi.ERROR}`,f=`${y.gT.CACHE_PREFIX}.${y.Vi.ERROR_DESC}`,k=[this.browserStorage.getItem(`${y.gT.CACHE_PREFIX}.${y.Vi.ID_TOKEN}`),this.browserStorage.getItem(c),this.browserStorage.getItem(d),this.browserStorage.getItem(f)];[y.Vi.ID_TOKEN,y.Vi.CLIENT_INFO,y.Vi.ERROR,y.Vi.ERROR_DESC].forEach((le,be)=>this.migrateCacheEntry(le,k[be]))}migrateCacheEntry(a,c){c&&this.setTemporaryCache(a,c,!0)}createKeyMaps(){this.logger.trace("BrowserCacheManager - createKeyMaps called.");const a=this.getItem(R.Oq.ACCOUNT_KEYS),c=this.getItem(`${R.Oq.TOKEN_KEYS}.${this.clientId}`);a&&c?this.logger.verbose("BrowserCacheManager:createKeyMaps - account and token key maps already exist, skipping migration."):this.browserStorage.getKeys().forEach(f=>{if(this.isCredentialKey(f)){const g=this.getItem(f);if(g){const _=this.validateAndParseJson(g);if(_&&_.hasOwnProperty("credentialType"))switch(_.credentialType){case y.d3.ID_TOKEN:if(ke.isIdTokenEntity(_)){this.logger.trace("BrowserCacheManager:createKeyMaps - idToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - idToken with key: ${f} found, saving key to token key map`);const w=ve.L.toObject(new ke,_),N=this.updateCredentialCacheKey(f,w);return void this.addTokenKey(N,y.d3.ID_TOKEN)}this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching idToken schema with value containing idToken credentialType field but value failed IdTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed idToken validation on key: ${f}`);break;case y.d3.ACCESS_TOKEN:case y.d3.ACCESS_TOKEN_WITH_AUTH_SCHEME:if(Ye.isAccessTokenEntity(_)){this.logger.trace("BrowserCacheManager:createKeyMaps - accessToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - accessToken with key: ${f} found, saving key to token key map`);const w=ve.L.toObject(new Ye,_),N=this.updateCredentialCacheKey(f,w);return void this.addTokenKey(N,y.d3.ACCESS_TOKEN)}this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching accessToken schema with value containing accessToken credentialType field but value failed AccessTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed accessToken validation on key: ${f}`);break;case y.d3.REFRESH_TOKEN:if(ut.isRefreshTokenEntity(_)){this.logger.trace("BrowserCacheManager:createKeyMaps - refreshToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - refreshToken with key: ${f} found, saving key to token key map`);const w=ve.L.toObject(new ut,_),N=this.updateCredentialCacheKey(f,w);return void this.addTokenKey(N,y.d3.REFRESH_TOKEN)}this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching refreshToken schema with value containing refreshToken credentialType field but value failed RefreshTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed refreshToken validation on key: ${f}`)}}}if(this.isAccountKey(f)){const g=this.getItem(f);if(g){const _=this.validateAndParseJson(g);_&&ie.r.isAccountEntity(_)&&(this.logger.trace("BrowserCacheManager:createKeyMaps - account found, saving key to account key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - account with key: ${f} found, saving key to account key map`),this.addAccountKeyToMap(f))}}})}validateAndParseJson(a){try{const c=JSON.parse(a);return c&&"object"==typeof c?c:null}catch{return null}}getItem(a){return this.browserStorage.getItem(a)}setItem(a,c){this.browserStorage.setItem(a,c)}getAccount(a){this.logger.trace("BrowserCacheManager.getAccount called");const c=this.getItem(a);if(!c)return this.removeAccountKeyFromMap(a),null;const d=this.validateAndParseJson(c);return d&&ie.r.isAccountEntity(d)?ve.L.toObject(new ie.r,d):(this.removeAccountKeyFromMap(a),null)}setAccount(a){this.logger.trace("BrowserCacheManager.setAccount called");const c=a.generateAccountKey();this.setItem(c,JSON.stringify(a)),this.addAccountKeyToMap(c)}getAccountKeys(){this.logger.trace("BrowserCacheManager.getAccountKeys called");const a=this.getItem(R.Oq.ACCOUNT_KEYS);return a?JSON.parse(a):(this.logger.verbose("BrowserCacheManager.getAccountKeys - No account keys found"),[])}addAccountKeyToMap(a){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${a}`);const c=this.getAccountKeys();-1===c.indexOf(a)?(c.push(a),this.setItem(R.Oq.ACCOUNT_KEYS,JSON.stringify(c)),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added")):this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map")}removeAccountKeyFromMap(a){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${a}`);const c=this.getAccountKeys(),d=c.indexOf(a);d>-1?(c.splice(d,1),this.setItem(R.Oq.ACCOUNT_KEYS,JSON.stringify(c)),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}removeAccount(a){var c=()=>super.removeAccount,d=this;return(0,C.Z)(function*(){c().call(d,a),d.removeAccountKeyFromMap(a)})()}removeIdToken(a){super.removeIdToken(a),this.removeTokenKey(a,y.d3.ID_TOKEN)}removeAccessToken(a){var c=()=>super.removeAccessToken,d=this;return(0,C.Z)(function*(){c().call(d,a),d.removeTokenKey(a,y.d3.ACCESS_TOKEN)})()}removeRefreshToken(a){super.removeRefreshToken(a),this.removeTokenKey(a,y.d3.REFRESH_TOKEN)}getTokenKeys(){this.logger.trace("BrowserCacheManager.getTokenKeys called");const a=this.getItem(`${R.Oq.TOKEN_KEYS}.${this.clientId}`);if(a){const c=this.validateAndParseJson(a);if(c&&c.hasOwnProperty("idToken")&&c.hasOwnProperty("accessToken")&&c.hasOwnProperty("refreshToken"))return c;this.logger.error("BrowserCacheManager.getTokenKeys - Token keys found but in an unknown format. Returning empty key map.")}else this.logger.verbose("BrowserCacheManager.getTokenKeys - No token keys found");return{idToken:[],accessToken:[],refreshToken:[]}}addTokenKey(a,c){this.logger.trace("BrowserCacheManager addTokenKey called");const d=this.getTokenKeys();switch(c){case y.d3.ID_TOKEN:-1===d.idToken.indexOf(a)&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),d.idToken.push(a));break;case y.d3.ACCESS_TOKEN:-1===d.accessToken.indexOf(a)&&(this.logger.info("BrowserCacheManager: addTokenKey - accessToken added to map"),d.accessToken.push(a));break;case y.d3.REFRESH_TOKEN:-1===d.refreshToken.indexOf(a)&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),d.refreshToken.push(a));break;default:throw this.logger.error(`BrowserCacheManager:addTokenKey - CredentialType provided invalid. CredentialType: ${c}`),(0,F.zP)(se.cy)}this.setItem(`${R.Oq.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(d))}removeTokenKey(a,c){this.logger.trace("BrowserCacheManager removeTokenKey called");const d=this.getTokenKeys();switch(c){case y.d3.ID_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove idToken with key: ${a} from map`);const f=d.idToken.indexOf(a);f>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - idToken removed from map"),d.idToken.splice(f,1)):this.logger.info("BrowserCacheManager: removeTokenKey - idToken does not exist in map. Either it was previously removed or it was never added.");break;case y.d3.ACCESS_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove accessToken with key: ${a} from map`);const g=d.accessToken.indexOf(a);g>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - accessToken removed from map"),d.accessToken.splice(g,1)):this.logger.info("BrowserCacheManager: removeTokenKey - accessToken does not exist in map. Either it was previously removed or it was never added.");break;case y.d3.REFRESH_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove refreshToken with key: ${a} from map`);const _=d.refreshToken.indexOf(a);_>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken removed from map"),d.refreshToken.splice(_,1)):this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken does not exist in map. Either it was previously removed or it was never added.");break;default:throw this.logger.error(`BrowserCacheManager:removeTokenKey - CredentialType provided invalid. CredentialType: ${c}`),(0,F.zP)(se.cy)}this.setItem(`${R.Oq.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(d))}getIdTokenCredential(a){const c=this.getItem(a);if(!c)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(a,y.d3.ID_TOKEN),null;const d=this.validateAndParseJson(c);return d&&ke.isIdTokenEntity(d)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),ve.L.toObject(new ke,d)):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(a,y.d3.ID_TOKEN),null)}setIdTokenCredential(a){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const c=a.generateCredentialKey();this.setItem(c,JSON.stringify(a)),this.addTokenKey(c,y.d3.ID_TOKEN)}getAccessTokenCredential(a){const c=this.getItem(a);if(!c)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(a,y.d3.ACCESS_TOKEN),null;const d=this.validateAndParseJson(c);return d&&Ye.isAccessTokenEntity(d)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),ve.L.toObject(new Ye,d)):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(a,y.d3.ACCESS_TOKEN),null)}setAccessTokenCredential(a){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const c=a.generateCredentialKey();this.setItem(c,JSON.stringify(a)),this.addTokenKey(c,y.d3.ACCESS_TOKEN)}getRefreshTokenCredential(a){const c=this.getItem(a);if(!c)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(a,y.d3.REFRESH_TOKEN),null;const d=this.validateAndParseJson(c);return d&&ut.isRefreshTokenEntity(d)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),ve.L.toObject(new ut,d)):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(a,y.d3.REFRESH_TOKEN),null)}setRefreshTokenCredential(a){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const c=a.generateCredentialKey();this.setItem(c,JSON.stringify(a)),this.addTokenKey(c,y.d3.REFRESH_TOKEN)}getAppMetadata(a){const c=this.getItem(a);if(!c)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const d=this.validateAndParseJson(c);return d&&bt.isAppMetadataEntity(a,d)?(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),ve.L.toObject(new bt,d)):(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null)}setAppMetadata(a){this.logger.trace("BrowserCacheManager.setAppMetadata called");const c=a.generateAppMetadataKey();this.setItem(c,JSON.stringify(a))}getServerTelemetry(a){const c=this.getItem(a);if(!c)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const d=this.validateAndParseJson(c);return d&&gn.isServerTelemetryEntity(a,d)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),ve.L.toObject(new gn,d)):(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null)}setServerTelemetry(a,c){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(a,JSON.stringify(c))}getAuthorityMetadata(a){const c=this.internalStorage.getItem(a);if(!c)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const d=this.validateAndParseJson(c);return d&&T.isAuthorityMetadataEntity(a,d)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),ve.L.toObject(new T,d)):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(c=>this.isAuthorityMetadata(c))}setWrapperMetadata(a,c){this.internalStorage.setItem(R.Bs.WRAPPER_SKU,a),this.internalStorage.setItem(R.Bs.WRAPPER_VER,c)}getWrapperMetadata(){return[this.internalStorage.getItem(R.Bs.WRAPPER_SKU)||y.gT.EMPTY_STRING,this.internalStorage.getItem(R.Bs.WRAPPER_VER)||y.gT.EMPTY_STRING]}setAuthorityMetadata(a,c){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(a,JSON.stringify(c))}getActiveAccount(){const a=this.generateCacheKey(y.Vi.ACTIVE_ACCOUNT_FILTERS),c=this.getItem(a);if(!c){this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters cache schema found, looking for legacy schema");const f=this.generateCacheKey(y.Vi.ACTIVE_ACCOUNT),g=this.getItem(f);if(!g)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null;const _=this.getAccountInfoFilteredBy({localAccountId:g});return _?(this.logger.trace("BrowserCacheManager.getActiveAccount: Legacy active account cache schema found"),this.logger.trace("BrowserCacheManager.getActiveAccount: Adding active account filters cache schema"),this.setActiveAccount(_),_):null}const d=this.validateAndParseJson(c);return d?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:d.homeAccountId,localAccountId:d.localAccountId})):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(a){const c=this.generateCacheKey(y.Vi.ACTIVE_ACCOUNT_FILTERS),d=this.generateCacheKey(y.Vi.ACTIVE_ACCOUNT);a?(this.logger.verbose("setActiveAccount: Active account set"),this.browserStorage.setItem(c,JSON.stringify({homeAccountId:a.homeAccountId,localAccountId:a.localAccountId})),this.browserStorage.setItem(d,a.localAccountId)):(this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(c),this.browserStorage.removeItem(d))}getThrottlingCache(a){const c=this.getItem(a);if(!c)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const d=this.validateAndParseJson(c);return d&&at.isThrottlingEntity(a,d)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),ve.L.toObject(new at,d)):(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null)}setThrottlingCache(a,c){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(a,JSON.stringify(c))}getTemporaryCache(a,c){const d=c?this.generateCacheKey(a):a;if(this.cacheConfig.storeAuthStateInCookie){const g=this.getItemCookie(d);if(g)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),g}const f=this.temporaryCacheStorage.getItem(d);if(!f){if(this.cacheConfig.cacheLocation===R.Ix.LocalStorage){const g=this.browserStorage.getItem(d);if(g)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),g}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),f}setTemporaryCache(a,c,d){const f=d?this.generateCacheKey(a):a;this.temporaryCacheStorage.setItem(f,c),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.setItemCookie(f,c))}removeItem(a){this.browserStorage.removeItem(a),this.temporaryCacheStorage.removeItem(a),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.clearItemCookie(a))}containsKey(a){return this.browserStorage.containsKey(a)||this.temporaryCacheStorage.containsKey(a)}getKeys(){return[...this.browserStorage.getKeys(),...this.temporaryCacheStorage.getKeys()]}clear(){var a=this;return(0,C.Z)(function*(){yield a.removeAllAccounts(),a.removeAppMetadata(),a.getKeys().forEach(c=>{(a.browserStorage.containsKey(c)||a.temporaryCacheStorage.containsKey(c))&&(-1!==c.indexOf(y.gT.CACHE_PREFIX)||-1!==c.indexOf(a.clientId))&&a.removeItem(c)}),a.internalStorage.clear()})()}clearTokensAndKeysWithClaims(a){var c=this;return(0,C.Z)(function*(){a.addQueueMeasurement(A.Ak.ClearTokensAndKeysWithClaims);const d=c.getTokenKeys(),f=[];d.accessToken.forEach(g=>{const _=c.getAccessTokenCredential(g);_?.requestedClaimsHash&&g.includes(_.requestedClaimsHash.toLowerCase())&&f.push(c.removeAccessToken(g))}),yield Promise.all(f),f.length>0&&c.logger.warning(`${f.length} access tokens with claims in the cache keys have been removed from the cache.`)})()}setItemCookie(a,c,d){let f=`${encodeURIComponent(a)}=${encodeURIComponent(c)};path=/;SameSite=Lax;`;d&&(f+=`expires=${this.getCookieExpirationTime(d)};`),this.cacheConfig.secureCookies&&(f+="Secure;"),document.cookie=f}getItemCookie(a){const c=`${encodeURIComponent(a)}=`,d=document.cookie.split(";");for(let f=0;f<d.length;f++){let g=d[f];for(;" "===g.charAt(0);)g=g.substring(1);if(0===g.indexOf(c))return decodeURIComponent(g.substring(c.length,g.length))}return y.gT.EMPTY_STRING}clearMsalCookies(){const a=`${y.gT.CACHE_PREFIX}.${this.clientId}`;document.cookie.split(";").forEach(d=>{for(;" "===d.charAt(0);)d=d.substring(1);if(0===d.indexOf(a)){const f=d.split("=")[0];this.clearItemCookie(f)}})}clearItemCookie(a){this.setItemCookie(a,y.gT.EMPTY_STRING,-1)}getCookieExpirationTime(a){return new Date((new Date).getTime()+a*this.COOKIE_LIFE_MULTIPLIER).toUTCString()}getCache(){return this.browserStorage}setCache(){}generateCacheKey(a){return this.validateAndParseJson(a)?JSON.stringify(a):tn.x.startsWith(a,y.gT.CACHE_PREFIX)||tn.x.startsWith(a,y.Vi.ADAL_ID_TOKEN)?a:`${y.gT.CACHE_PREFIX}.${this.clientId}.${a}`}generateAuthorityKey(a){const{libraryState:{id:c}}=wt.parseRequestState(this.cryptoImpl,a);return this.generateCacheKey(`${R.c4.AUTHORITY}.${c}`)}generateNonceKey(a){const{libraryState:{id:c}}=wt.parseRequestState(this.cryptoImpl,a);return this.generateCacheKey(`${R.c4.NONCE_IDTOKEN}.${c}`)}generateStateKey(a){const{libraryState:{id:c}}=wt.parseRequestState(this.cryptoImpl,a);return this.generateCacheKey(`${R.c4.REQUEST_STATE}.${c}`)}getCachedAuthority(a){const c=this.generateStateKey(a),d=this.getTemporaryCache(c);if(!d)return null;const f=this.generateAuthorityKey(d);return this.getTemporaryCache(f)}updateCacheEntries(a,c,d,f,g){this.logger.trace("BrowserCacheManager.updateCacheEntries called");const _=this.generateStateKey(a);this.setTemporaryCache(_,a,!1);const w=this.generateNonceKey(a);this.setTemporaryCache(w,c,!1);const N=this.generateAuthorityKey(a);this.setTemporaryCache(N,d,!1),g?this.setTemporaryCache(R.c4.CCS_CREDENTIAL,JSON.stringify({credential:g.homeAccountId,type:"home_account_id"}),!0):f&&this.setTemporaryCache(R.c4.CCS_CREDENTIAL,JSON.stringify({credential:f,type:"UPN"}),!0)}resetRequestCache(a){this.logger.trace("BrowserCacheManager.resetRequestCache called"),a&&(this.getKeys().forEach(c=>{-1!==c.indexOf(a)&&this.removeItem(c)}),this.removeItem(this.generateStateKey(a)),this.removeItem(this.generateNonceKey(a)),this.removeItem(this.generateAuthorityKey(a))),this.removeItem(this.generateCacheKey(R.c4.REQUEST_PARAMS)),this.removeItem(this.generateCacheKey(R.c4.ORIGIN_URI)),this.removeItem(this.generateCacheKey(R.c4.URL_HASH)),this.removeItem(this.generateCacheKey(R.c4.CORRELATION_ID)),this.removeItem(this.generateCacheKey(R.c4.CCS_CREDENTIAL)),this.removeItem(this.generateCacheKey(R.c4.NATIVE_REQUEST)),this.setInteractionInProgress(!1)}cleanRequestByState(a){if(this.logger.trace("BrowserCacheManager.cleanRequestByState called"),a){const c=this.generateStateKey(a),d=this.temporaryCacheStorage.getItem(c);this.logger.infoPii(`BrowserCacheManager.cleanRequestByState: Removing temporary cache items for state: ${d}`),this.resetRequestCache(d||y.gT.EMPTY_STRING)}this.clearMsalCookies()}cleanRequestByInteractionType(a){this.logger.trace("BrowserCacheManager.cleanRequestByInteractionType called"),this.getKeys().forEach(c=>{if(-1===c.indexOf(R.c4.REQUEST_STATE))return;const d=this.temporaryCacheStorage.getItem(c);if(!d)return;const f=Va.extractBrowserRequestState(this.cryptoImpl,d);f&&f.interactionType===a&&(this.logger.infoPii(`BrowserCacheManager.cleanRequestByInteractionType: Removing temporary cache items for state: ${d}`),this.resetRequestCache(d))}),this.clearMsalCookies(),this.setInteractionInProgress(!1)}cacheCodeRequest(a){this.logger.trace("BrowserCacheManager.cacheCodeRequest called");const c=(0,ja.h$)(JSON.stringify(a));this.setTemporaryCache(R.c4.REQUEST_PARAMS,c,!0)}getCachedRequest(a){this.logger.trace("BrowserCacheManager.getCachedRequest called");const c=this.getTemporaryCache(R.c4.REQUEST_PARAMS,!0);if(!c)throw(0,pe.Z_)(ye.QO);let d;try{d=JSON.parse((0,Vo.t)(c))}catch(f){throw this.logger.errorPii(`Attempted to parse: ${c}`),this.logger.error(`Parsing cached token request threw with error: ${f}`),(0,pe.Z_)(ye.e$)}if(this.removeItem(this.generateCacheKey(R.c4.REQUEST_PARAMS)),!d.authority){const f=this.generateAuthorityKey(a),g=this.getTemporaryCache(f);if(!g)throw(0,pe.Z_)(ye.dT);d.authority=g}return d}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const a=this.getTemporaryCache(R.c4.NATIVE_REQUEST,!0);return a?this.validateAndParseJson(a)||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null):(this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null)}isInteractionInProgress(a){const c=this.getInteractionInProgress();return a?c===this.clientId:!!c}getInteractionInProgress(){return this.getTemporaryCache(`${y.gT.CACHE_PREFIX}.${R.c4.INTERACTION_STATUS_KEY}`,!1)}setInteractionInProgress(a){const c=`${y.gT.CACHE_PREFIX}.${R.c4.INTERACTION_STATUS_KEY}`;if(a){if(this.getInteractionInProgress())throw(0,pe.Z_)(ye.Ck);this.setTemporaryCache(c,this.clientId,!1)}else!a&&this.getInteractionInProgress()===this.clientId&&this.removeItem(c)}getLegacyLoginHint(){const a=this.getTemporaryCache(y.Vi.ADAL_ID_TOKEN);a&&(this.browserStorage.removeItem(y.Vi.ADAL_ID_TOKEN),this.logger.verbose("Cached ADAL id token retrieved."));const c=this.getTemporaryCache(y.Vi.ID_TOKEN,!0);c&&(this.removeItem(this.generateCacheKey(y.Vi.ID_TOKEN)),this.logger.verbose("Cached MSAL.js v1 id token retrieved"));const d=c||a;if(d){const f=Ee.Z_(d,Vo.t);if(f.preferred_username)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 preferred_username as loginHint"),f.preferred_username;if(f.upn)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 upn as loginHint"),f.upn;this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, however, no account hint claim found. Enable preferred_username or upn id token claim to get SSO.")}return null}updateCredentialCacheKey(a,c){const d=c.generateCredentialKey();if(a!==d){const f=this.getItem(a);if(f)return this.removeItem(a),this.setItem(d,f),this.logger.verbose(`Updated an outdated ${c.credentialType} cache key`),d;this.logger.error(`Attempted to update an outdated ${c.credentialType} cache key but no item matching the outdated key was found in storage`)}return a}getRedirectRequestContext(){return this.getTemporaryCache(R.c4.REDIRECT_CONTEXT,!0)}setRedirectRequestContext(a){this.setTemporaryCache(R.c4.REDIRECT_CONTEXT,a,!0)}hydrateCache(a,c){var d=this;return(0,C.Z)(function*(){const f=ke.createIdTokenEntity(a.account?.homeAccountId,a.account?.environment,a.idToken,d.clientId,a.tenantId);let g;c.claims&&(g=yield d.cryptoImpl.hashString(c.claims));const _=Ye.createAccessTokenEntity(a.account?.homeAccountId,a.account.environment,a.accessToken,d.clientId,a.tenantId,a.scopes.join(" "),a.expiresOn?.getTime()||0,a.extExpiresOn?.getTime()||0,d.cryptoImpl,void 0,a.tokenType,void 0,c.sshKid,c.claims,g),w=new Ge(void 0,f,_);return d.saveCacheRecord(w)})()}}var st=S(484),Ie=S(97),Nu=S(76);class nn{static generateThrottlingStorageKey(a){return`${y.bb.THROTTLING_PREFIX}.${JSON.stringify(a)}`}static preProcess(a,c){const d=nn.generateThrottlingStorageKey(c),f=a.getThrottlingCache(d);if(f){if(f.throttleTime<Date.now())return void a.removeItem(d);throw new Ce.n(f.errorCodes?.join(" ")||y.gT.EMPTY_STRING,f.errorMessage,f.subError)}}static postProcess(a,c,d){if(nn.checkResponseStatus(d)||nn.checkResponseForRetryAfter(d)){const f={throttleTime:nn.calculateThrottleTime(parseInt(d.headers[y.SZ.RETRY_AFTER])),error:d.body.error,errorCodes:d.body.error_codes,errorMessage:d.body.error_description,subError:d.body.suberror};a.setThrottlingCache(nn.generateThrottlingStorageKey(c),f)}}static checkResponseStatus(a){return 429===a.status||a.status>=500&&a.status<600}static checkResponseForRetryAfter(a){return!!a.headers&&a.headers.hasOwnProperty(y.SZ.RETRY_AFTER)&&(a.status<200||a.status>=300)}static calculateThrottleTime(a){const c=a<=0?0:a,d=Date.now()/1e3;return Math.floor(1e3*Math.min(d+(c||y.bb.DEFAULT_THROTTLE_TIME_SECONDS),d+y.bb.DEFAULT_MAX_THROTTLE_TIME_SECONDS))}static removeThrottle(a,c,d,f){const _=this.generateThrottlingStorageKey({clientId:c,authority:d.authority,scopes:d.scopes,homeAccountIdentifier:f,claims:d.claims,authenticationScheme:d.authenticationScheme,resourceRequestMethod:d.resourceRequestMethod,resourceRequestUri:d.resourceRequestUri,shrClaims:d.shrClaims,sshKid:d.sshKid});a.removeItem(_)}}var jo=S(703);class ts{constructor(a,c){this.networkClient=a,this.cacheManager=c}sendPostRequest(a,c,d){var f=this;return(0,C.Z)(function*(){let g;nn.preProcess(f.cacheManager,a);try{g=yield f.networkClient.sendPostRequestAsync(c,d)}catch(_){throw _ instanceof De.l4?_:(0,F.zP)(se.EF)}return nn.postProcess(f.cacheManager,a,g),g})()}}var Ga=S(630),za=S(667),xn=S(758),rn=S(795);class xt{static validateRedirectUri(a){if(!a)throw(0,P.ei)(we.RV)}static validatePrompt(a){const c=[];for(const d in y.NJ)c.push(y.NJ[d]);if(c.indexOf(a)<0)throw(0,P.ei)(we.z_)}static validateClaims(a){try{JSON.parse(a)}catch{throw(0,P.ei)(we.nm)}}static validateCodeChallengeParams(a,c){if(!a||!c)throw(0,P.ei)(we.TU);this.validateCodeChallengeMethod(c)}static validateCodeChallengeMethod(a){if([y.VX.PLAIN,y.VX.S256].indexOf(a)<0)throw(0,P.ei)(we.d6)}static sanitizeEQParams(a,c){return a?(c.forEach((d,f)=>{a[f]&&delete a[f]}),Object.fromEntries(Object.entries(a).filter(d=>""!==d[1]))):{}}}class Br{constructor(){this.parameters=new Map}addResponseTypeCode(){this.parameters.set(y.Fo.RESPONSE_TYPE,encodeURIComponent(y.gT.CODE_RESPONSE_TYPE))}addResponseTypeForTokenAndIdToken(){this.parameters.set(y.Fo.RESPONSE_TYPE,encodeURIComponent(`${y.gT.TOKEN_RESPONSE_TYPE} ${y.gT.ID_TOKEN_RESPONSE_TYPE}`))}addResponseMode(a){this.parameters.set(y.Fo.RESPONSE_MODE,encodeURIComponent(a||y.vw.QUERY))}addNativeBroker(){this.parameters.set(y.Fo.NATIVE_BROKER,encodeURIComponent("1"))}addScopes(a,c=!0,d=y.f_){c&&!d.includes("openid")&&!a.includes("openid")&&d.push("openid");const f=c?[...a||[],...d]:a||[],g=new rn.i(f);this.parameters.set(y.Fo.SCOPE,encodeURIComponent(g.printScopes()))}addClientId(a){this.parameters.set(y.Fo.CLIENT_ID,encodeURIComponent(a))}addRedirectUri(a){xt.validateRedirectUri(a),this.parameters.set(y.Fo.REDIRECT_URI,encodeURIComponent(a))}addPostLogoutRedirectUri(a){xt.validateRedirectUri(a),this.parameters.set(y.Fo.POST_LOGOUT_URI,encodeURIComponent(a))}addIdTokenHint(a){this.parameters.set(y.Fo.ID_TOKEN_HINT,encodeURIComponent(a))}addDomainHint(a){this.parameters.set(y.VO.DOMAIN_HINT,encodeURIComponent(a))}addLoginHint(a){this.parameters.set(y.VO.LOGIN_HINT,encodeURIComponent(a))}addCcsUpn(a){this.parameters.set(y.SZ.CCS_HEADER,encodeURIComponent(`UPN:${a}`))}addCcsOid(a){this.parameters.set(y.SZ.CCS_HEADER,encodeURIComponent(`Oid:${a.uid}@${a.utid}`))}addSid(a){this.parameters.set(y.VO.SID,encodeURIComponent(a))}addClaims(a,c){const d=this.addClientCapabilitiesToClaims(a,c);xt.validateClaims(d),this.parameters.set(y.Fo.CLAIMS,encodeURIComponent(d))}addCorrelationId(a){this.parameters.set(y.Fo.CLIENT_REQUEST_ID,encodeURIComponent(a))}addLibraryInfo(a){this.parameters.set(y.Fo.X_CLIENT_SKU,a.sku),this.parameters.set(y.Fo.X_CLIENT_VER,a.version),a.os&&this.parameters.set(y.Fo.X_CLIENT_OS,a.os),a.cpu&&this.parameters.set(y.Fo.X_CLIENT_CPU,a.cpu)}addApplicationTelemetry(a){a?.appName&&this.parameters.set(y.Fo.X_APP_NAME,a.appName),a?.appVersion&&this.parameters.set(y.Fo.X_APP_VER,a.appVersion)}addPrompt(a){xt.validatePrompt(a),this.parameters.set(`${y.Fo.PROMPT}`,encodeURIComponent(a))}addState(a){a&&this.parameters.set(y.Fo.STATE,encodeURIComponent(a))}addNonce(a){this.parameters.set(y.Fo.NONCE,encodeURIComponent(a))}addCodeChallengeParams(a,c){if(xt.validateCodeChallengeParams(a,c),!a||!c)throw(0,P.ei)(we.TU);this.parameters.set(y.Fo.CODE_CHALLENGE,encodeURIComponent(a)),this.parameters.set(y.Fo.CODE_CHALLENGE_METHOD,encodeURIComponent(c))}addAuthorizationCode(a){this.parameters.set(y.Fo.CODE,encodeURIComponent(a))}addDeviceCode(a){this.parameters.set(y.Fo.DEVICE_CODE,encodeURIComponent(a))}addRefreshToken(a){this.parameters.set(y.Fo.REFRESH_TOKEN,encodeURIComponent(a))}addCodeVerifier(a){this.parameters.set(y.Fo.CODE_VERIFIER,encodeURIComponent(a))}addClientSecret(a){this.parameters.set(y.Fo.CLIENT_SECRET,encodeURIComponent(a))}addClientAssertion(a){a&&this.parameters.set(y.Fo.CLIENT_ASSERTION,encodeURIComponent(a))}addClientAssertionType(a){a&&this.parameters.set(y.Fo.CLIENT_ASSERTION_TYPE,encodeURIComponent(a))}addOboAssertion(a){this.parameters.set(y.Fo.OBO_ASSERTION,encodeURIComponent(a))}addRequestTokenUse(a){this.parameters.set(y.Fo.REQUESTED_TOKEN_USE,encodeURIComponent(a))}addGrantType(a){this.parameters.set(y.Fo.GRANT_TYPE,encodeURIComponent(a))}addClientInfo(){this.parameters.set(y.sR,"1")}addExtraQueryParameters(a){const c=xt.sanitizeEQParams(a,this.parameters);Object.keys(c).forEach(d=>{this.parameters.set(d,a[d])})}addClientCapabilitiesToClaims(a,c){let d;if(a)try{d=JSON.parse(a)}catch{throw(0,P.ei)(we.nm)}else d={};return c&&c.length>0&&(d.hasOwnProperty(y.As.ACCESS_TOKEN)||(d[y.As.ACCESS_TOKEN]={}),d[y.As.ACCESS_TOKEN][y.As.XMS_CC]={values:c}),JSON.stringify(d)}addUsername(a){this.parameters.set(y.Ge.username,encodeURIComponent(a))}addPassword(a){this.parameters.set(y.Ge.password,encodeURIComponent(a))}addPopToken(a){a&&(this.parameters.set(y.Fo.TOKEN_TYPE,y.hO.POP),this.parameters.set(y.Fo.REQ_CNF,encodeURIComponent(a)))}addSshJwk(a){a&&(this.parameters.set(y.Fo.TOKEN_TYPE,y.hO.SSH),this.parameters.set(y.Fo.REQ_CNF,encodeURIComponent(a)))}addServerTelemetry(a){this.parameters.set(y.Fo.X_CLIENT_CURR_TELEM,a.generateCurrentRequestHeaderValue()),this.parameters.set(y.Fo.X_CLIENT_LAST_TELEM,a.generateLastRequestHeaderValue())}addThrottling(){this.parameters.set(y.Fo.X_MS_LIB_CAPABILITY,y.bb.X_MS_LIB_CAPABILITY_VALUE)}addLogoutHint(a){this.parameters.set(y.Fo.LOGOUT_HINT,encodeURIComponent(a))}createQueryString(){const a=new Array;return this.parameters.forEach((c,d)=>{a.push(`${d}=${c}`)}),a.join("&")}}class ns{constructor(a,c){this.config=(0,jo.j6)(a),this.logger=new Ga.Y(this.config.loggerOptions,za.u,za.i),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.networkManager=new ts(this.networkClient,this.cacheManager),this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=c}createTokenRequestHeaders(a){const c={};if(c[y.SZ.CONTENT_TYPE]=y.gT.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&a)switch(a.type){case"home_account_id":try{const d=(0,xn.j)(a.credential);c[y.SZ.CCS_HEADER]=`Oid:${d.uid}@${d.utid}`}catch(d){this.logger.verbose("Could not parse home account ID for CCS Header: "+d)}break;case"UPN":c[y.SZ.CCS_HEADER]=`UPN: ${a.credential}`}return c}executePostToTokenEndpoint(a,c,d,f,g,_){var w=this;return(0,C.Z)(function*(){_&&w.performanceClient?.addQueueMeasurement(_,g);const N=yield w.networkManager.sendPostRequest(f,a,{body:c,headers:d});return w.performanceClient?.addFields({refreshTokenSize:N.body.refresh_token?.length||0,httpVerToken:N.headers?.[y.SZ.X_MS_HTTP_VERSION]||""},g),w.config.serverTelemetryManager&&N.status<500&&429!==N.status&&w.config.serverTelemetryManager.clearTelemetryCache(),N})()}updateAuthority(a){if(!a.discoveryComplete())throw(0,F.zP)(se.HO);this.authority=a}createTokenQueryParameters(a){const c=new Br;return a.tokenQueryParameters&&c.addExtraQueryParameters(a.tokenQueryParameters),c.createQueryString()}}class Vr{constructor(a,c){this.cryptoUtils=a,this.performanceClient=c}generateCnf(a,c){var d=this;return(0,C.Z)(function*(){d.performanceClient?.addQueueMeasurement(A.Ak.PopTokenGenerateCnf,a.correlationId);const f=yield Y(d.generateKid.bind(d),A.Ak.PopTokenGenerateCnf,c,d.performanceClient,a.correlationId)(a),g=d.cryptoUtils.base64Encode(JSON.stringify(f));return{kid:f.kid,reqCnfString:g,reqCnfHash:yield d.cryptoUtils.hashString(g)}})()}generateKid(a){var c=this;return(0,C.Z)(function*(){return c.performanceClient?.addQueueMeasurement(A.Ak.PopTokenGenerateKid,a.correlationId),{kid:yield c.cryptoUtils.getPublicKeyThumbprint(a),xms_ksl:"sw"}})()}signPopToken(a,c,d){var f=this;return(0,C.Z)(function*(){return f.signPayload(a,c,d)})()}signPayload(a,c,d,f){var g=this;return(0,C.Z)(function*(){const{resourceRequestMethod:_,resourceRequestUri:w,shrClaims:N,shrNonce:k}=d,le=(w?new H.G(w):void 0)?.getUrlComponents();return yield g.cryptoUtils.signJwt({at:a,ts:te.I.nowSeconds(),m:_?.toUpperCase(),u:le?.HostNameAndPort,nonce:k||g.cryptoUtils.createNewGuid(),p:le?.AbsolutePath,q:le?.QueryString?[[],le.QueryString]:void 0,client_claims:N||void 0,...f},c,d.correlationId)})()}}class Ou{constructor(a,c){this.cache=a,this.hasChanged=c}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}class gr{constructor(a,c,d,f,g,_,w){this.clientId=a,this.cacheStorage=c,this.cryptoObj=d,this.logger=f,this.serializableCache=g,this.persistencePlugin=_,this.performanceClient=w}validateServerAuthorizationCodeResponse(a,c,d){if(!a.state||!c)throw(0,F.zP)(se.LV,a.state?"Cached State":"Server State");let f,g;try{f=decodeURIComponent(a.state)}catch{throw(0,F.zP)(se.r8,a.state)}try{g=decodeURIComponent(c)}catch{throw(0,F.zP)(se.r8,a.state)}if(f!==g)throw(0,F.zP)(se.Tu);if(a.error||a.error_description||a.suberror)throw(0,X.Cf)(a.error,a.error_description,a.suberror)?new X.Yo(a.error||y.gT.EMPTY_STRING,a.error_description,a.suberror,a.timestamp||y.gT.EMPTY_STRING,a.trace_id||y.gT.EMPTY_STRING,a.correlation_id||y.gT.EMPTY_STRING,a.claims||y.gT.EMPTY_STRING):new Ce.n(a.error||y.gT.EMPTY_STRING,a.error_description,a.suberror);a.client_info&&(0,xn.B)(a.client_info,d)}validateTokenResponse(a,c){if(a.error||a.error_description||a.suberror){const f=new Ce.n(a.error,`${a.error_codes} - [${a.timestamp}]: ${a.error_description} - Correlation ID: ${a.correlation_id} - Trace ID: ${a.trace_id}`,a.suberror);if(c&&a.status&&a.status>=y.oj.SERVER_ERROR_RANGE_START&&a.status<=y.oj.SERVER_ERROR_RANGE_END)return void this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.\n${f}`);if(c&&a.status&&a.status>=y.oj.CLIENT_ERROR_RANGE_START&&a.status<=y.oj.CLIENT_ERROR_RANGE_END)return void this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.\n${f}`);throw(0,X.Cf)(a.error,a.error_description,a.suberror)?new X.Yo(a.error,a.error_description,a.suberror,a.timestamp||y.gT.EMPTY_STRING,a.trace_id||y.gT.EMPTY_STRING,a.correlation_id||y.gT.EMPTY_STRING,a.claims||y.gT.EMPTY_STRING):f}}handleServerTokenResponse(a,c,d,f,g,_,w,N,k){var K=this;return(0,C.Z)(function*(){let le,be;if(K.performanceClient?.addQueueMeasurement(A.Ak.HandleServerTokenResponse,a.correlation_id),a.id_token){if(le=(0,Ee.Z_)(a.id_token||y.gT.EMPTY_STRING,K.cryptoObj.base64Decode),g&&g.nonce&&le.nonce!==g.nonce)throw(0,F.zP)(se.vR);if(f.maxAge||0===f.maxAge){const yt=le.auth_time;if(!yt)throw(0,F.zP)(se.w7);(0,Ee.ky)(yt,f.maxAge)}}K.homeAccountIdentifier=ie.r.generateHomeAccountId(a.client_info||y.gT.EMPTY_STRING,c.authorityType,K.logger,K.cryptoObj,le),g&&g.state&&(be=wt.parseRequestState(K.cryptoObj,g.state)),a.key_id=a.key_id||f.sshKid||void 0;const Qe=K.generateCacheRecord(a,c,d,f,le,_,g);let q;try{if(K.persistencePlugin&&K.serializableCache&&(K.logger.verbose("Persistence enabled, calling beforeCacheAccess"),q=new Ou(K.serializableCache,!0),yield K.persistencePlugin.beforeCacheAccess(q)),w&&!N&&Qe.account){const yt=Qe.account.generateAccountKey();if(!K.cacheStorage.getAccount(yt))return K.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),gr.generateAuthenticationResult(K.cryptoObj,c,Qe,!1,f,le,be,void 0,k)}yield K.cacheStorage.saveCacheRecord(Qe,f.storeInCache)}finally{K.persistencePlugin&&K.serializableCache&&q&&(K.logger.verbose("Persistence enabled, calling afterCacheAccess"),yield K.persistencePlugin.afterCacheAccess(q))}return gr.generateAuthenticationResult(K.cryptoObj,c,Qe,!1,f,le,be,a,k)})()}generateCacheRecord(a,c,d,f,g,_,w){const N=c.getPreferredCache();if(!N)throw(0,F.zP)(se.Q9);let k,K;a.id_token&&g&&(k=ke.createIdTokenEntity(this.homeAccountIdentifier,N,a.id_token,this.clientId,g.tid||""),K=ie.r.createAccount({homeAccountId:this.homeAccountIdentifier,idTokenClaims:g,clientInfo:a.client_info,cloudGraphHostName:w?.cloud_graph_host_name,msGraphHost:w?.msgraph_host},c));let le=null;if(a.access_token){const q=a.scope?rn.i.fromString(a.scope):new rn.i(f.scopes||[]),yt=("string"==typeof a.expires_in?parseInt(a.expires_in,10):a.expires_in)||0,oe=("string"==typeof a.ext_expires_in?parseInt(a.ext_expires_in,10):a.ext_expires_in)||0,Oe=("string"==typeof a.refresh_in?parseInt(a.refresh_in,10):a.refresh_in)||void 0,mn=d+yt,cs=mn+oe,vo=Oe&&Oe>0?d+Oe:void 0;le=Ye.createAccessTokenEntity(this.homeAccountIdentifier,N,a.access_token||y.gT.EMPTY_STRING,this.clientId,g?.tid||c.tenant,q.printScopes(),mn,cs,this.cryptoObj,vo,a.token_type,_,a.key_id,f.claims,f.requestedClaimsHash)}let be=null;a.refresh_token&&(be=ut.createRefreshTokenEntity(this.homeAccountIdentifier,N,a.refresh_token||y.gT.EMPTY_STRING,this.clientId,a.foci,_));let Qe=null;return a.foci&&(Qe=bt.createAppMetadataEntity(this.clientId,N,a.foci)),new Ge(K,k,le,be,Qe)}static generateAuthenticationResult(a,c,d,f,g,_,w,N,k){return(0,C.Z)(function*(){let Qe,q,K=y.gT.EMPTY_STRING,le=[],be=null,yt=y.gT.EMPTY_STRING;if(d.accessToken){if(d.accessToken.tokenType===y.hO.POP){const cs=new Vr(a),{secret:vo,keyId:Kr}=d.accessToken;if(!Kr)throw(0,F.zP)(se.Of);K=yield cs.signPopToken(vo,Kr,g)}else K=d.accessToken.secret;le=rn.i.fromString(d.accessToken.target).asArray(),be=new Date(1e3*Number(d.accessToken.expiresOn)),Qe=new Date(1e3*Number(d.accessToken.extendedExpiresOn)),d.accessToken.refreshOn&&(q=new Date(1e3*Number(d.accessToken.refreshOn)))}d.appMetadata&&(yt=d.appMetadata.familyId===y.ch?y.ch:"");const oe=_?.oid||_?.sub||"",Oe=_?.tid||"";N?.spa_accountid&&d.account&&(d.account.nativeAccountId=N?.spa_accountid);const mn=d.account?{...d.account.getAccountInfo(),idTokenClaims:_}:null;return{authority:c.canonicalAuthority,uniqueId:oe,tenantId:Oe,scopes:le,account:mn,idToken:d?.idToken?.secret||"",idTokenClaims:_||{},accessToken:K,fromCache:f,expiresOn:be,extExpiresOn:Qe,refreshOn:q,correlationId:g.correlationId,requestId:k||y.gT.EMPTY_STRING,familyId:yt,tokenType:d.accessToken?.tokenType||y.gT.EMPTY_STRING,state:w?w.userRequestState:y.gT.EMPTY_STRING,cloudGraphHostName:d.account?.cloudGraphHostName||y.gT.EMPTY_STRING,msGraphHost:d.account?.msGraphHost||y.gT.EMPTY_STRING,code:N?.spa_code,fromNativeBroker:!1}})()}}class qa extends ns{constructor(a,c){super(a,c),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}getAuthCodeUrl(a){var c=this;return(0,C.Z)(function*(){c.performanceClient?.addQueueMeasurement(A.Ak.GetAuthCodeUrl,a.correlationId);const d=yield Y(c.createAuthCodeUrlQueryString.bind(c),A.Ak.AuthClientCreateQueryString,c.logger,c.performanceClient,a.correlationId)(a);return H.G.appendQueryString(c.authority.authorizationEndpoint,d)})()}acquireToken(a,c){var d=this;return(0,C.Z)(function*(){if(d.performanceClient?.addQueueMeasurement(A.Ak.AuthClientAcquireToken,a.correlationId),!a.code)throw(0,F.zP)(se.FU);const f=te.I.nowSeconds(),g=yield Y(d.executeTokenRequest.bind(d),A.Ak.AuthClientExecuteTokenRequest,d.logger,d.performanceClient,a.correlationId)(d.authority,a),_=g.headers?.[y.SZ.X_MS_REQUEST_ID],w=new gr(d.config.authOptions.clientId,d.cacheManager,d.cryptoUtils,d.logger,d.config.serializableCache,d.config.persistencePlugin,d.performanceClient);return w.validateTokenResponse(g.body),Y(w.handleServerTokenResponse.bind(w),A.Ak.HandleServerTokenResponse,d.logger,d.performanceClient,a.correlationId)(g.body,d.authority,f,a,c,void 0,void 0,void 0,_)})()}handleFragmentResponse(a,c){const d=new gr(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,null,null),f=H.G.getDeserializedCodeResponse(this.config.authOptions.authority.options.OIDCOptions?.serverResponseType,a);if(d.validateServerAuthorizationCodeResponse(f,c,this.cryptoUtils),!f.code)throw(0,F.zP)(se.Zv);return{...f,code:f.code}}getLogoutUri(a){if(!a)throw(0,P.ei)(we.$h);const c=this.createLogoutUrlQueryString(a);return H.G.appendQueryString(this.authority.endSessionEndpoint,c)}executeTokenRequest(a,c){var d=this;return(0,C.Z)(function*(){d.performanceClient?.addQueueMeasurement(A.Ak.AuthClientExecuteTokenRequest,c.correlationId);const f=d.createTokenQueryParameters(c),g=H.G.appendQueryString(a.tokenEndpoint,f),_=yield Y(d.createTokenRequestBody.bind(d),A.Ak.AuthClientCreateTokenRequestBody,d.logger,d.performanceClient,c.correlationId)(c);let w;if(c.clientInfo)try{const K=(0,xn.B)(c.clientInfo,d.cryptoUtils);w={credential:`${K.uid}${y.Bv.CLIENT_INFO_SEPARATOR}${K.utid}`,type:"home_account_id"}}catch(K){d.logger.verbose("Could not parse client info for CCS Header: "+K)}const N=d.createTokenRequestHeaders(w||c.ccsCredential),k={clientId:c.tokenBodyParameters?.clientId||d.config.authOptions.clientId,authority:a.canonicalAuthority,scopes:c.scopes,claims:c.claims,authenticationScheme:c.authenticationScheme,resourceRequestMethod:c.resourceRequestMethod,resourceRequestUri:c.resourceRequestUri,shrClaims:c.shrClaims,sshKid:c.sshKid};return Y(d.executePostToTokenEndpoint.bind(d),A.Ak.AuthorizationCodeClientExecutePostToTokenEndpoint,d.logger,d.performanceClient,c.correlationId)(g,_,N,k,c.correlationId,A.Ak.AuthorizationCodeClientExecutePostToTokenEndpoint)})()}createTokenRequestBody(a){var c=this;return(0,C.Z)(function*(){c.performanceClient?.addQueueMeasurement(A.Ak.AuthClientCreateTokenRequestBody,a.correlationId);const d=new Br;if(d.addClientId(a.tokenBodyParameters?.[y.Fo.CLIENT_ID]||c.config.authOptions.clientId),c.includeRedirectUri?d.addRedirectUri(a.redirectUri):xt.validateRedirectUri(a.redirectUri),d.addScopes(a.scopes,!0,c.oidcDefaultScopes),d.addAuthorizationCode(a.code),d.addLibraryInfo(c.config.libraryInfo),d.addApplicationTelemetry(c.config.telemetry.application),d.addThrottling(),c.serverTelemetryManager&&!(0,jo.lh)(c.config)&&d.addServerTelemetry(c.serverTelemetryManager),a.codeVerifier&&d.addCodeVerifier(a.codeVerifier),c.config.clientCredentials.clientSecret&&d.addClientSecret(c.config.clientCredentials.clientSecret),c.config.clientCredentials.clientAssertion){const _=c.config.clientCredentials.clientAssertion;d.addClientAssertion(_.assertion),d.addClientAssertionType(_.assertionType)}if(d.addGrantType(y.qJ.AUTHORIZATION_CODE_GRANT),d.addClientInfo(),a.authenticationScheme===y.hO.POP){const _=new Vr(c.cryptoUtils,c.performanceClient),w=yield Y(_.generateCnf.bind(_),A.Ak.PopTokenGenerateCnf,c.logger,c.performanceClient,a.correlationId)(a,c.logger);d.addPopToken(w.reqCnfString)}else if(a.authenticationScheme===y.hO.SSH){if(!a.sshJwk)throw(0,P.ei)(we.dK);d.addSshJwk(a.sshJwk)}const f=a.correlationId||c.config.cryptoInterface.createNewGuid();let g;if(d.addCorrelationId(f),(!tn.x.isEmptyObj(a.claims)||c.config.authOptions.clientCapabilities&&c.config.authOptions.clientCapabilities.length>0)&&d.addClaims(a.claims,c.config.authOptions.clientCapabilities),a.clientInfo)try{const _=(0,xn.B)(a.clientInfo,c.cryptoUtils);g={credential:`${_.uid}${y.Bv.CLIENT_INFO_SEPARATOR}${_.utid}`,type:"home_account_id"}}catch(_){c.logger.verbose("Could not parse client info for CCS Header: "+_)}else g=a.ccsCredential;if(c.config.systemOptions.preventCorsPreflight&&g)switch(g.type){case"home_account_id":try{const _=(0,xn.j)(g.credential);d.addCcsOid(_)}catch(_){c.logger.verbose("Could not parse home account ID for CCS Header: "+_)}break;case"UPN":d.addCcsUpn(g.credential)}return a.tokenBodyParameters&&d.addExtraQueryParameters(a.tokenBodyParameters),a.enableSpaAuthorizationCode&&(!a.tokenBodyParameters||!a.tokenBodyParameters[y.Fo.RETURN_SPA_CODE])&&d.addExtraQueryParameters({[y.Fo.RETURN_SPA_CODE]:"1"}),d.createQueryString()})()}createAuthCodeUrlQueryString(a){var c=this;return(0,C.Z)(function*(){c.performanceClient?.addQueueMeasurement(A.Ak.AuthClientCreateQueryString,a.correlationId);const d=new Br;d.addClientId(a.extraQueryParameters?.[y.Fo.CLIENT_ID]||c.config.authOptions.clientId);const f=[...a.scopes||[],...a.extraScopesToConsent||[]];d.addScopes(f,!0,c.oidcDefaultScopes),d.addRedirectUri(a.redirectUri);const g=a.correlationId||c.config.cryptoInterface.createNewGuid();if(d.addCorrelationId(g),d.addResponseMode(a.responseMode),d.addResponseTypeCode(),d.addLibraryInfo(c.config.libraryInfo),(0,jo.lh)(c.config)||d.addApplicationTelemetry(c.config.telemetry.application),d.addClientInfo(),a.codeChallenge&&a.codeChallengeMethod&&d.addCodeChallengeParams(a.codeChallenge,a.codeChallengeMethod),a.prompt&&d.addPrompt(a.prompt),a.domainHint&&d.addDomainHint(a.domainHint),a.prompt!==y.NJ.SELECT_ACCOUNT)if(a.sid&&a.prompt===y.NJ.NONE)c.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),d.addSid(a.sid);else if(a.account){const _=c.extractAccountSid(a.account),w=c.extractLoginHint(a.account);if(w){c.logger.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),d.addLoginHint(w);try{const N=(0,xn.j)(a.account.homeAccountId);d.addCcsOid(N)}catch{c.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(_&&a.prompt===y.NJ.NONE){c.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),d.addSid(_);try{const N=(0,xn.j)(a.account.homeAccountId);d.addCcsOid(N)}catch{c.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(a.loginHint)c.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),d.addLoginHint(a.loginHint),d.addCcsUpn(a.loginHint);else if(a.account.username){c.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),d.addLoginHint(a.account.username);try{const N=(0,xn.j)(a.account.homeAccountId);d.addCcsOid(N)}catch{c.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else a.loginHint&&(c.logger.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),d.addLoginHint(a.loginHint),d.addCcsUpn(a.loginHint));else c.logger.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");if(a.nonce&&d.addNonce(a.nonce),a.state&&d.addState(a.state),(a.claims||c.config.authOptions.clientCapabilities&&c.config.authOptions.clientCapabilities.length>0)&&d.addClaims(a.claims,c.config.authOptions.clientCapabilities),a.extraQueryParameters&&d.addExtraQueryParameters(a.extraQueryParameters),a.nativeBroker&&(d.addNativeBroker(),a.authenticationScheme===y.hO.POP)){const _=new Vr(c.cryptoUtils),w=yield Y(_.generateCnf.bind(_),A.Ak.PopTokenGenerateCnf,c.logger,c.performanceClient,a.correlationId)(a,c.logger);d.addPopToken(w.reqCnfHash)}return d.createQueryString()})()}createLogoutUrlQueryString(a){const c=new Br;return a.postLogoutRedirectUri&&c.addPostLogoutRedirectUri(a.postLogoutRedirectUri),a.correlationId&&c.addCorrelationId(a.correlationId),a.idTokenHint&&c.addIdTokenHint(a.idTokenHint),a.state&&c.addState(a.state),a.logoutHint&&c.addLogoutHint(a.logoutHint),a.extraQueryParameters&&c.addExtraQueryParameters(a.extraQueryParameters),c.createQueryString()}extractAccountSid(a){return a.idTokenClaims?.sid||null}extractLoginHint(a){return a.idTokenClaims?.login_hint||null}}class mr{static createDiscoveredInstance(a,c,d,f,g,_,w){return(0,C.Z)(function*(){_?.addQueueMeasurement(A.Ak.AuthorityFactoryCreateDiscoveredInstance,w);const N=ce.transformCIAMAuthority(W(a)),k=mr.createInstance(N,c,d,f,g,_,w);try{return yield Y(k.resolveEndpointsAsync.bind(k),A.Ak.AuthorityResolveEndpointsAsync,g,_,w)(),k}catch{throw(0,F.zP)(se.HO)}})()}static createInstance(a,c,d,f,g,_,w){if(!a)throw(0,P.ei)(we.To);return new ce(a,c,d,f,g,_,w)}}class $o{constructor(a,c){this.cacheOutcome=y.To.NOT_APPLICABLE,this.cacheManager=c,this.apiId=a.apiId,this.correlationId=a.correlationId,this.wrapperSKU=a.wrapperSKU||y.gT.EMPTY_STRING,this.wrapperVer=a.wrapperVer||y.gT.EMPTY_STRING,this.telemetryCacheKey=y.HN.CACHE_KEY+y.Bv.CACHE_KEY_SEPARATOR+a.clientId}generateCurrentRequestHeaderValue(){const a=`${this.apiId}${y.HN.VALUE_SEPARATOR}${this.cacheOutcome}`,c=[this.wrapperSKU,this.wrapperVer].join(y.HN.VALUE_SEPARATOR),f=[a,this.getRegionDiscoveryFields()].join(y.HN.VALUE_SEPARATOR);return[y.HN.SCHEMA_VERSION,f,c].join(y.HN.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const a=this.getLastRequests(),c=$o.maxErrorsToSend(a),d=a.failedRequests.slice(0,2*c).join(y.HN.VALUE_SEPARATOR),f=a.errors.slice(0,c).join(y.HN.VALUE_SEPARATOR),g=a.errors.length,w=[g,c<g?y.HN.OVERFLOW_TRUE:y.HN.OVERFLOW_FALSE].join(y.HN.VALUE_SEPARATOR);return[y.HN.SCHEMA_VERSION,a.cacheHits,d,f,w].join(y.HN.CATEGORY_SEPARATOR)}cacheFailedRequest(a){const c=this.getLastRequests();c.errors.length>=y.HN.MAX_CACHED_ERRORS&&(c.failedRequests.shift(),c.failedRequests.shift(),c.errors.shift()),c.failedRequests.push(this.apiId,this.correlationId),a instanceof Error&&a&&a.toString()?c.errors.push(a instanceof De.l4?a.subError?a.subError:a.errorCode?a.errorCode:a.toString():a.toString()):c.errors.push(y.HN.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,c)}incrementCacheHits(){const a=this.getLastRequests();return a.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,a),a.cacheHits}getLastRequests(){const a=new gn;return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||a}clearTelemetryCache(){const a=this.getLastRequests(),c=$o.maxErrorsToSend(a);if(c===a.errors.length)this.cacheManager.removeItem(this.telemetryCacheKey);else{const f=new gn;f.failedRequests=a.failedRequests.slice(2*c),f.errors=a.errors.slice(c),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,f)}}static maxErrorsToSend(a){let c,d=0,f=0;const g=a.errors.length;for(c=0;c<g;c++){const w=a.failedRequests[2*c+1]||y.gT.EMPTY_STRING,N=a.errors[c]||y.gT.EMPTY_STRING;if(f+=(a.failedRequests[2*c]||y.gT.EMPTY_STRING).toString().length+w.toString().length+N.length+3,!(f<y.HN.MAX_LAST_HEADER_BYTES))break;d+=1}return d}getRegionDiscoveryFields(){const a=[];return a.push(this.regionUsed||y.gT.EMPTY_STRING),a.push(this.regionSource||y.gT.EMPTY_STRING),a.push(this.regionOutcome||y.gT.EMPTY_STRING),a.join(",")}updateRegionDiscoveryMetadata(a){this.regionUsed=a.region_used,this.regionSource=a.region_source,this.regionOutcome=a.region_outcome}setCacheOutcome(a){this.cacheOutcome=a}}var Wa=S(580),Zn=S(690);class Za{constructor(a,c,d,f,g,_,w,N,k){this.config=a,this.browserStorage=c,this.browserCrypto=d,this.networkClient=this.config.system.networkClient,this.eventHandler=g,this.navigationClient=_,this.nativeMessageHandler=N,this.correlationId=k||(0,Zn.nn)(),this.logger=f.clone(R.qx.MSAL_SKU,Wa.i,this.correlationId),this.performanceClient=w}clearCacheOnLogout(a){var c=this;return(0,C.Z)(function*(){if(a){ie.r.accountInfoIsEqual(a,c.browserStorage.getActiveAccount(),!1)&&(c.logger.verbose("Setting active account to null"),c.browserStorage.setActiveAccount(null));try{yield c.browserStorage.removeAccount(ie.r.generateAccountCacheKey(a)),c.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{c.logger.error("Account provided in logout request was not found. Local cache unchanged.")}}else try{c.logger.verbose("No account provided in logout request, clearing all cache items.",c.correlationId),yield c.browserStorage.clear(),yield c.browserCrypto.clearKeystore()}catch{c.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}})()}initializeBaseRequest(a,c){var d=this;return(0,C.Z)(function*(){d.performanceClient.addQueueMeasurement(A.Ak.InitializeBaseRequest,a.correlationId);const f=a.authority||d.config.auth.authority;c&&(yield d.validateRequestAuthority(f,c));const g=[...a&&a.scopes||[]],_={...a,correlationId:d.correlationId,authority:f,scopes:g};if(_.authenticationScheme){if(_.authenticationScheme===y.hO.SSH){if(!a.sshJwk)throw(0,P.ei)(we.dK);if(!a.sshKid)throw(0,P.ei)(we.hI)}d.logger.verbose(`Authentication Scheme set to "${_.authenticationScheme}" as configured in Auth request`)}else _.authenticationScheme=y.hO.BEARER,d.logger.verbose('Authentication Scheme wasn\'t explicitly set in request, defaulting to "Bearer" request');return d.config.cache.claimsBasedCachingEnabled&&a.claims&&!tn.x.isEmptyObj(a.claims)&&(_.requestedClaimsHash=yield d.browserCrypto.hashString(a.claims)),_})()}getRedirectUri(a){this.logger.verbose("getRedirectUri called");const c=a||this.config.auth.redirectUri||(0,st.Re)();return H.G.getAbsoluteUrl(c,(0,st.Re)())}validateRequestAuthority(a,c){var d=this;return(0,C.Z)(function*(){if(!(yield d.getDiscoveredAuthority(a)).isAlias(c.environment))throw(0,P.ei)(we.Hv)})()}initializeServerTelemetryManager(a,c){this.logger.verbose("initializeServerTelemetryManager called");const d={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:a,forceRefresh:c||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new $o(d,this.browserStorage)}getDiscoveredAuthority(a){var c=this;return(0,C.Z)(function*(){c.logger.verbose("getDiscoveredAuthority called");const d={protocolMode:c.config.auth.protocolMode,OIDCOptions:c.config.auth.OIDCOptions,knownAuthorities:c.config.auth.knownAuthorities,cloudDiscoveryMetadata:c.config.auth.cloudDiscoveryMetadata,authorityMetadata:c.config.auth.authorityMetadata};return a?(c.logger.verbose("Creating discovered authority with request authority"),yield mr.createDiscoveredInstance(a,c.config.system.networkClient,c.browserStorage,d,c.logger)):(c.logger.verbose("Creating discovered authority with configured authority"),yield mr.createDiscoveredInstance(c.config.auth.authority,c.config.system.networkClient,c.browserStorage,d,c.logger))})()}}const Pu=32;function ug(G,a,c){return Go.apply(this,arguments)}function Go(){return(Go=(0,C.Z)(function*(G,a,c){G.addQueueMeasurement(A.Ak.GeneratePkceCodes,c);const d=re(Ya,A.Ak.GenerateCodeVerifier,a,G,c)(G,a,c);return{verifier:d,challenge:yield Y(Qa,A.Ak.GenerateCodeChallengeFromVerifier,a,G,c)(d,G,a,c)}})).apply(this,arguments)}function Ya(G,a,c){try{const d=new Uint8Array(Pu);return re(Zn.PP,A.Ak.GetRandomValues,a,G,c)(d),(0,ja.Wy)(d)}catch{throw(0,pe.Z_)(ye.vD)}}function Qa(G,a,c,d){return zo.apply(this,arguments)}function zo(){return(zo=(0,C.Z)(function*(G,a,c,d){a.addQueueMeasurement(A.Ak.GenerateCodeChallengeFromVerifier,d);try{const f=yield Y(Zn.Fv,A.Ak.Sha256Digest,c,a,d)(G,a,d);return(0,ja.Wy)(new Uint8Array(f))}catch{throw(0,pe.Z_)(ye.vD)}})).apply(this,arguments)}class yr extends Za{initializeAuthorizationCodeRequest(a){var c=this;return(0,C.Z)(function*(){c.performanceClient.addQueueMeasurement(A.Ak.StandardInteractionClientInitializeAuthorizationCodeRequest,a.correlationId);const d=yield Y(ug,A.Ak.GeneratePkceCodes,c.logger,c.performanceClient,c.correlationId)(c.performanceClient,c.logger,c.correlationId),f={...a,redirectUri:a.redirectUri,code:y.gT.EMPTY_STRING,codeVerifier:d.verifier};return a.codeChallenge=d.challenge,a.codeChallengeMethod=y.gT.S256_CODE_CHALLENGE_METHOD,f})()}initializeLogoutRequest(a){this.logger.verbose("initializeLogoutRequest called",a?.correlationId);const c={correlationId:this.correlationId||(0,Zn.nn)(),...a};if(a)if(a.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(a.account){const d=this.getLogoutHintFromIdTokenClaims(a.account);d&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),c.logoutHint=d)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return a&&null===a.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",c.correlationId):a&&a.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",c.correlationId),c.postLogoutRedirectUri=H.G.getAbsoluteUrl(a.postLogoutRedirectUri,(0,st.Re)())):null===this.config.auth.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",c.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",c.correlationId),c.postLogoutRedirectUri=H.G.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,(0,st.Re)())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",c.correlationId),c.postLogoutRedirectUri=H.G.getAbsoluteUrl((0,st.Re)(),(0,st.Re)())),c}getLogoutHintFromIdTokenClaims(a){const c=a.idTokenClaims;if(c){if(c.login_hint)return c.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}createAuthCodeClient(a,c,d){var f=this;return(0,C.Z)(function*(){f.performanceClient.addQueueMeasurement(A.Ak.StandardInteractionClientCreateAuthCodeClient,f.correlationId);const g=yield Y(f.getClientConfiguration.bind(f),A.Ak.StandardInteractionClientGetClientConfiguration,f.logger,f.performanceClient,f.correlationId)(a,c,d);return new qa(g,f.performanceClient)})()}getClientConfiguration(a,c,d){var f=this;return(0,C.Z)(function*(){f.performanceClient.addQueueMeasurement(A.Ak.StandardInteractionClientGetClientConfiguration,f.correlationId);const g=yield Y(f.getDiscoveredAuthority.bind(f),A.Ak.StandardInteractionClientGetDiscoveredAuthority,f.logger,f.performanceClient,f.correlationId)(c,d),_=f.config.system.loggerOptions;return{authOptions:{clientId:f.config.auth.clientId,authority:g,clientCapabilities:f.config.auth.clientCapabilities},systemOptions:{tokenRenewalOffsetSeconds:f.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:_.loggerCallback,piiLoggingEnabled:_.piiLoggingEnabled,logLevel:_.logLevel,correlationId:f.correlationId},cacheOptions:{claimsBasedCachingEnabled:f.config.cache.claimsBasedCachingEnabled},cryptoInterface:f.browserCrypto,networkInterface:f.networkClient,storageInterface:f.browserStorage,serverTelemetryManager:a,libraryInfo:{sku:R.qx.MSAL_SKU,version:Wa.i,cpu:y.gT.EMPTY_STRING,os:y.gT.EMPTY_STRING},telemetry:f.config.telemetry}})()}validateAndExtractStateFromHash(a,c,d){if(this.logger.verbose("validateAndExtractStateFromHash called",d),!a.state)throw(0,pe.Z_)(ye.Xk);const f=Va.extractBrowserRequestState(this.browserCrypto,a.state);if(!f)throw(0,pe.Z_)(ye.$P);if(f.interactionType!==c)throw(0,pe.Z_)(ye.yK);return this.logger.verbose("Returning state from hash",d),a.state}getDiscoveredAuthority(a,c){var d=this;return(0,C.Z)(function*(){d.performanceClient.addQueueMeasurement(A.Ak.StandardInteractionClientGetDiscoveredAuthority,d.correlationId);const f={protocolMode:d.config.auth.protocolMode,OIDCOptions:d.config.auth.OIDCOptions,knownAuthorities:d.config.auth.knownAuthorities,cloudDiscoveryMetadata:d.config.auth.cloudDiscoveryMetadata,authorityMetadata:d.config.auth.authorityMetadata,skipAuthorityMetadataCache:d.config.auth.skipAuthorityMetadataCache},_=ce.generateAuthority(a||d.config.auth.authority,c||d.config.auth.azureCloudOptions);return yield Y(mr.createDiscoveredInstance.bind(mr),A.Ak.AuthorityFactoryCreateDiscoveredInstance,d.logger,d.performanceClient,d.correlationId)(_,d.config.system.networkClient,d.browserStorage,f,d.logger,d.performanceClient,d.correlationId)})()}initializeAuthorizationRequest(a,c){var d=this;return(0,C.Z)(function*(){d.performanceClient.addQueueMeasurement(A.Ak.StandardInteractionClientInitializeAuthorizationRequest,d.correlationId);const f=d.getRedirectUri(a.redirectUri),_=wt.setRequestState(d.browserCrypto,a&&a.state||y.gT.EMPTY_STRING,{interactionType:c}),N={...yield Y(d.initializeBaseRequest.bind(d),A.Ak.InitializeBaseRequest,d.logger,d.performanceClient,d.correlationId)(a),redirectUri:f,state:_,nonce:a.nonce||(0,Zn.nn)(),responseMode:d.config.auth.OIDCOptions.serverResponseType},k=a.account||d.browserStorage.getActiveAccount();if(k&&(d.logger.verbose("Setting validated request account",d.correlationId),d.logger.verbosePii(`Setting validated request account: ${k.homeAccountId}`,d.correlationId),N.account=k),!N.loginHint&&!k){const K=d.browserStorage.getLegacyLoginHint();K&&(N.loginHint=K)}return N})()}}var Ja=S(12),Ko=S(490);const rs="user_switch",Hu={[rs]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class Fn extends De.l4{constructor(a,c,d){super(a,c),Object.setPrototypeOf(this,Fn.prototype),this.name="NativeAuthError",this.ext=d}}function Ft(G){return!!(G.ext&&G.ext.status&&("PERSISTENT_ERROR"===G.ext.status||"DISABLED"===G.ext.status)||G.ext&&G.ext.error&&-2147186943===G.ext.error)||"ContentError"===G.errorCode}function os(G,a,c){if(c&&c.status)switch(c.status){case"ACCOUNT_UNAVAILABLE":return(0,X.ip)(Ko.QP);case"USER_INTERACTION_REQUIRED":return new X.Yo(G,a);case"USER_CANCEL":return(0,pe.Z_)(ye.h7);case"NO_NETWORK":return(0,pe.Z_)(ye.Mq)}return new Fn(G,Hu[G]||a,c)}class mt extends ns{constructor(a,c){super(a,c)}acquireToken(a){var c=this;return(0,C.Z)(function*(){c.performanceClient?.addQueueMeasurement(A.Ak.RefreshTokenClientAcquireToken,a.correlationId);const d=te.I.nowSeconds(),f=yield Y(c.executeTokenRequest.bind(c),A.Ak.RefreshTokenClientExecuteTokenRequest,c.logger,c.performanceClient,a.correlationId)(a,c.authority),g=f.headers?.[y.SZ.X_MS_REQUEST_ID],_=new gr(c.config.authOptions.clientId,c.cacheManager,c.cryptoUtils,c.logger,c.config.serializableCache,c.config.persistencePlugin);return _.validateTokenResponse(f.body),Y(_.handleServerTokenResponse.bind(_),A.Ak.HandleServerTokenResponse,c.logger,c.performanceClient,a.correlationId)(f.body,c.authority,d,a,void 0,void 0,!0,a.forceCache,g)})()}acquireTokenByRefreshToken(a){var c=this;return(0,C.Z)(function*(){if(!a)throw(0,P.ei)(we.dL);if(c.performanceClient?.addQueueMeasurement(A.Ak.RefreshTokenClientAcquireTokenByRefreshToken,a.correlationId),!a.account)throw(0,F.zP)(se.D7);if(c.cacheManager.isAppMetadataFOCI(a.account.environment))try{return Y(c.acquireTokenWithCachedRefreshToken.bind(c),A.Ak.RefreshTokenClientAcquireTokenWithCachedRefreshToken,c.logger,c.performanceClient,a.correlationId)(a,!0)}catch(f){if(f instanceof X.Yo&&f.errorCode===Ko.I2||f instanceof Ce.n&&f.errorCode===y.D1.INVALID_GRANT_ERROR&&f.subError===y.D1.CLIENT_MISMATCH_ERROR)return Y(c.acquireTokenWithCachedRefreshToken.bind(c),A.Ak.RefreshTokenClientAcquireTokenWithCachedRefreshToken,c.logger,c.performanceClient,a.correlationId)(a,!1);throw f}return Y(c.acquireTokenWithCachedRefreshToken.bind(c),A.Ak.RefreshTokenClientAcquireTokenWithCachedRefreshToken,c.logger,c.performanceClient,a.correlationId)(a,!1)})()}acquireTokenWithCachedRefreshToken(a,c){var d=this;return(0,C.Z)(function*(){d.performanceClient?.addQueueMeasurement(A.Ak.RefreshTokenClientAcquireTokenWithCachedRefreshToken,a.correlationId);const f=re(d.cacheManager.getRefreshToken.bind(d.cacheManager),A.Ak.CacheManagerGetRefreshToken,d.logger,d.performanceClient,a.correlationId)(a.account,c);if(!f)throw(0,X.ip)(Ko.I2);const g={...a,refreshToken:f.secret,authenticationScheme:a.authenticationScheme||y.hO.BEARER,ccsCredential:{credential:a.account.homeAccountId,type:"home_account_id"}};return Y(d.acquireToken.bind(d),A.Ak.RefreshTokenClientAcquireToken,d.logger,d.performanceClient,a.correlationId)(g)})()}executeTokenRequest(a,c){var d=this;return(0,C.Z)(function*(){d.performanceClient?.addQueueMeasurement(A.Ak.RefreshTokenClientExecuteTokenRequest,a.correlationId);const f=d.createTokenQueryParameters(a),g=H.G.appendQueryString(c.tokenEndpoint,f),_=yield Y(d.createTokenRequestBody.bind(d),A.Ak.RefreshTokenClientCreateTokenRequestBody,d.logger,d.performanceClient,a.correlationId)(a),w=d.createTokenRequestHeaders(a.ccsCredential),N={clientId:a.tokenBodyParameters?.clientId||d.config.authOptions.clientId,authority:c.canonicalAuthority,scopes:a.scopes,claims:a.claims,authenticationScheme:a.authenticationScheme,resourceRequestMethod:a.resourceRequestMethod,resourceRequestUri:a.resourceRequestUri,shrClaims:a.shrClaims,sshKid:a.sshKid};return Y(d.executePostToTokenEndpoint.bind(d),A.Ak.RefreshTokenClientExecutePostToTokenEndpoint,d.logger,d.performanceClient,a.correlationId)(g,_,w,N,a.correlationId,A.Ak.RefreshTokenClientExecutePostToTokenEndpoint)})()}createTokenRequestBody(a){var c=this;return(0,C.Z)(function*(){c.performanceClient?.addQueueMeasurement(A.Ak.RefreshTokenClientCreateTokenRequestBody,a.correlationId);const d=a.correlationId,f=new Br;if(f.addClientId(a.tokenBodyParameters?.[y.Fo.CLIENT_ID]||c.config.authOptions.clientId),a.redirectUri&&f.addRedirectUri(a.redirectUri),f.addScopes(a.scopes,!0,c.config.authOptions.authority.options.OIDCOptions?.defaultScopes),f.addGrantType(y.qJ.REFRESH_TOKEN_GRANT),f.addClientInfo(),f.addLibraryInfo(c.config.libraryInfo),f.addApplicationTelemetry(c.config.telemetry.application),f.addThrottling(),c.serverTelemetryManager&&!(0,jo.lh)(c.config)&&f.addServerTelemetry(c.serverTelemetryManager),f.addCorrelationId(d),f.addRefreshToken(a.refreshToken),c.config.clientCredentials.clientSecret&&f.addClientSecret(c.config.clientCredentials.clientSecret),c.config.clientCredentials.clientAssertion){const g=c.config.clientCredentials.clientAssertion;f.addClientAssertion(g.assertion),f.addClientAssertionType(g.assertionType)}if(a.authenticationScheme===y.hO.POP){const g=new Vr(c.cryptoUtils,c.performanceClient),_=yield Y(g.generateCnf.bind(g),A.Ak.PopTokenGenerateCnf,c.logger,c.performanceClient,a.correlationId)(a,c.logger);f.addPopToken(_.reqCnfString)}else if(a.authenticationScheme===y.hO.SSH){if(!a.sshJwk)throw(0,P.ei)(we.dK);f.addSshJwk(a.sshJwk)}if((!tn.x.isEmptyObj(a.claims)||c.config.authOptions.clientCapabilities&&c.config.authOptions.clientCapabilities.length>0)&&f.addClaims(a.claims,c.config.authOptions.clientCapabilities),c.config.systemOptions.preventCorsPreflight&&a.ccsCredential)switch(a.ccsCredential.type){case"home_account_id":try{const g=(0,xn.j)(a.ccsCredential.credential);f.addCcsOid(g)}catch(g){c.logger.verbose("Could not parse home account ID for CCS Header: "+g)}break;case"UPN":f.addCcsUpn(a.ccsCredential.credential)}return a.tokenBodyParameters&&f.addExtraQueryParameters(a.tokenBodyParameters),f.createQueryString()})()}}class jr extends ns{constructor(a,c){super(a,c)}acquireToken(a){var c=this;return(0,C.Z)(function*(){try{const[d,f]=yield c.acquireCachedToken(a);return f===y.To.PROACTIVELY_REFRESHED&&(c.logger.info("SilentFlowClient:acquireCachedToken - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),new mt(c.config,c.performanceClient).acquireTokenByRefreshToken(a).catch(()=>{})),d}catch(d){if(d instanceof F.er&&d.errorCode===se.s$)return new mt(c.config,c.performanceClient).acquireTokenByRefreshToken(a);throw d}})()}acquireCachedToken(a){var c=this;return(0,C.Z)(function*(){c.performanceClient?.addQueueMeasurement(A.Ak.SilentFlowClientAcquireCachedToken,a.correlationId);let d=y.To.NOT_APPLICABLE;if(a.forceRefresh||!c.config.cacheOptions.claimsBasedCachingEnabled&&!tn.x.isEmptyObj(a.claims))throw c.setCacheOutcome(y.To.FORCE_REFRESH_OR_CLAIMS,a.correlationId),(0,F.zP)(se.s$);if(!a.account)throw(0,F.zP)(se.D7);const f=a.authority||c.authority.getPreferredCache(),g=c.cacheManager.readCacheRecord(a.account,a,f);if(!g.accessToken)throw c.setCacheOutcome(y.To.NO_CACHED_ACCESS_TOKEN,a.correlationId),(0,F.zP)(se.s$);if(te.I.wasClockTurnedBack(g.accessToken.cachedAt)||te.I.isTokenExpired(g.accessToken.expiresOn,c.config.systemOptions.tokenRenewalOffsetSeconds))throw c.setCacheOutcome(y.To.CACHED_ACCESS_TOKEN_EXPIRED,a.correlationId),(0,F.zP)(se.s$);return g.accessToken.refreshOn&&te.I.isTokenExpired(g.accessToken.refreshOn,0)&&(d=y.To.PROACTIVELY_REFRESHED),c.setCacheOutcome(d,a.correlationId),c.config.serverTelemetryManager&&c.config.serverTelemetryManager.incrementCacheHits(),[yield Y(c.generateResultFromCacheRecord.bind(c),A.Ak.SilentFlowClientGenerateResultFromCacheRecord,c.logger,c.performanceClient,a.correlationId)(g,a),d]})()}setCacheOutcome(a,c){this.serverTelemetryManager?.setCacheOutcome(a),this.performanceClient?.addFields({cacheOutcome:a},c),this.logger.info(`Token refresh is required due to cache outcome: ${a}`)}generateResultFromCacheRecord(a,c){var d=this;return(0,C.Z)(function*(){let f;if(d.performanceClient?.addQueueMeasurement(A.Ak.SilentFlowClientGenerateResultFromCacheRecord,c.correlationId),a.idToken&&(f=(0,Ee.Z_)(a.idToken.secret,d.config.cryptoInterface.base64Decode)),c.maxAge||0===c.maxAge){const g=f?.auth_time;if(!g)throw(0,F.zP)(se.w7);(0,Ee.ky)(g,c.maxAge)}return yield gr.generateAuthenticationResult(d.cryptoUtils,d.authority,a,!0,c,f)})()}}class on extends yr{acquireToken(a){var c=this;return(0,C.Z)(function*(){c.performanceClient.addQueueMeasurement(A.Ak.SilentCacheClientAcquireToken,a.correlationId);const d=c.initializeServerTelemetryManager(R.WN.acquireTokenSilent_silentFlow),f=yield c.createSilentFlowClient(d,a.authority,a.azureCloudOptions);c.logger.verbose("Silent auth client created");try{const _=(yield Y(f.acquireCachedToken.bind(f),A.Ak.SilentFlowClientAcquireCachedToken,c.logger,c.performanceClient,a.correlationId)(a))[0];return c.performanceClient.addFields({fromCache:!0},a.correlationId),_}catch(g){throw g instanceof pe.Ut&&g.errorCode===ye.XM&&c.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),g}})()}logout(a){this.logger.verbose("logoutRedirect called");const c=this.initializeLogoutRequest(a);return this.clearCacheOnLogout(c?.account)}createSilentFlowClient(a,c,d){var f=this;return(0,C.Z)(function*(){const g=yield Y(f.getClientConfiguration.bind(f),A.Ak.StandardInteractionClientGetClientConfiguration,f.logger,f.performanceClient,f.correlationId)(a,c,d);return new jr(g,f.performanceClient)})()}initializeSilentRequest(a,c){var d=this;return(0,C.Z)(function*(){d.performanceClient.addQueueMeasurement(A.Ak.InitializeSilentRequest,d.correlationId);const f=yield Y(d.initializeBaseRequest.bind(d),A.Ak.InitializeBaseRequest,d.logger,d.performanceClient,d.correlationId)(a,c);return{...a,...f,account:c,forceRefresh:a.forceRefresh||!1}})()}}class $r extends Za{constructor(a,c,d,f,g,_,w,N,k,K,le,be){super(a,c,d,f,g,_,N,k,be),this.apiId=w,this.accountId=K,this.nativeMessageHandler=k,this.nativeStorageManager=le,this.silentCacheClient=new on(a,this.nativeStorageManager,d,f,g,_,N,k,be)}acquireToken(a){var c=this;return(0,C.Z)(function*(){c.performanceClient.addQueueMeasurement(A.Ak.NativeInteractionClientAcquireToken,a.correlationId),c.logger.trace("NativeInteractionClient - acquireToken called.");const d=c.performanceClient.startMeasurement(A.Ak.NativeInteractionClientAcquireToken,a.correlationId),f=te.I.nowSeconds(),g=yield c.initializeNativeRequest(a);try{const k=yield c.acquireTokensFromCache(c.accountId,g);return d.end({success:!0,isNativeBroker:!1,fromCache:!0}),k}catch{c.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const _={method:R.Ky.GetToken,request:g},w=yield c.nativeMessageHandler.sendMessage(_),N=c.validateNativeResponse(w);return c.handleNativeResponse(N,g,f).then(k=>(d.end({success:!0,isNativeBroker:!0,requestId:k.requestId}),k)).catch(k=>{throw d.end({success:!1,errorCode:k.errorCode,subErrorCode:k.subError,isNativeBroker:!0}),k})})()}createSilentCacheRequest(a,c){return{authority:a.authority,correlationId:this.correlationId,scopes:rn.i.fromString(a.scope).asArray(),account:c,forceRefresh:!1}}acquireTokensFromCache(a,c){var d=this;return(0,C.Z)(function*(){if(!a)throw d.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),(0,F.zP)(se.cX);const f=d.browserStorage.getBaseAccountInfo({nativeAccountId:a});if(!f)throw(0,F.zP)(se.cX);try{const g=d.createSilentCacheRequest(c,f),_=yield d.silentCacheClient.acquireToken(g),w={...f,idTokenClaims:_?.idTokenClaims};return{..._,account:w}}catch(g){throw g}})()}acquireTokenRedirect(a){var c=this;return(0,C.Z)(function*(){c.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const d=yield c.initializeNativeRequest(a),f={method:R.Ky.GetToken,request:d};try{const w=yield c.nativeMessageHandler.sendMessage(f);c.validateNativeResponse(w)}catch(w){if(w instanceof Fn&&Ft(w))throw w}c.browserStorage.setTemporaryCache(R.c4.NATIVE_REQUEST,JSON.stringify(d),!0);const g={apiId:R.WN.acquireTokenRedirect,timeout:c.config.system.redirectNavigationTimeout,noHistory:!1},_=c.config.auth.navigateToLoginRequestUrl?window.location.href:c.getRedirectUri(a.redirectUri);yield c.navigationClient.navigateExternal(_,g)})()}handleRedirectPromise(){var a=this;return(0,C.Z)(function*(){if(a.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!a.browserStorage.isInteractionInProgress(!0))return a.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const c=a.browserStorage.getCachedNativeRequest();if(!c)return a.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),null;const{prompt:d,...f}=c;d&&a.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),a.browserStorage.removeItem(a.browserStorage.generateCacheKey(R.c4.NATIVE_REQUEST));const g={method:R.Ky.GetToken,request:f},_=te.I.nowSeconds();try{a.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const w=yield a.nativeMessageHandler.sendMessage(g);a.validateNativeResponse(w);const N=a.handleNativeResponse(w,f,_);return a.browserStorage.setInteractionInProgress(!1),N}catch(w){throw a.browserStorage.setInteractionInProgress(!1),w}})()}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}handleNativeResponse(a,c,d){var f=this;return(0,C.Z)(function*(){if(f.logger.trace("NativeInteractionClient - handleNativeResponse called."),a.account.id!==c.accountId)throw os(rs);const g=yield f.getDiscoveredAuthority(c.authority),_=Ee.Z_(a.id_token,Vo.t),w=f.createHomeAccountIdentifier(a,_),N=ie.r.createAccount({homeAccountId:w,idTokenClaims:_,clientInfo:a.client_info,nativeAccountId:a.account.id},g),k=yield f.generateAuthenticationResult(a,c,_,N,g.canonicalAuthority,d);return f.cacheAccount(N),f.cacheNativeTokens(a,c,w,_,k.accessToken,k.tenantId,d),k})()}createHomeAccountIdentifier(a,c){return ie.r.generateHomeAccountId(a.client_info||y.gT.EMPTY_STRING,O.a.Default,this.logger,this.browserCrypto,c)}generateScopes(a,c){return rn.i.fromString(a.scope?a.scope:c.scope)}generatePopAccessToken(a,c){var d=this;return(0,C.Z)(function*(){if(c.tokenType===y.hO.POP){if(a.shr)return d.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),a.shr;const f=new Vr(d.browserCrypto),g={resourceRequestMethod:c.resourceRequestMethod,resourceRequestUri:c.resourceRequestUri,shrClaims:c.shrClaims,shrNonce:c.shrNonce};if(!c.keyId)throw(0,F.zP)(se.Of);return yield f.signPopToken(a.access_token,c.keyId,g)}return a.access_token})()}generateAuthenticationResult(a,c,d,f,g,_){var w=this;return(0,C.Z)(function*(){const N=w.addTelemetryFromNativeResponse(a),k=rn.i.fromString(a.scope?a.scope:c.scope),K=a.account.properties||{},le=K.UID||d.oid||d.sub||y.gT.EMPTY_STRING,be=K.TenantId||d.tid||y.gT.EMPTY_STRING,q=(d?Object.assign(new ie.r,{...f,idTokenClaims:d}):f).getAccountInfo(),yt=yield w.generatePopAccessToken(a,c),oe=c.tokenType===y.hO.POP?y.hO.POP:y.hO.BEARER;return{authority:g,uniqueId:le,tenantId:be,scopes:k.asArray(),account:q,idToken:a.id_token,idTokenClaims:d,accessToken:yt,fromCache:!!N&&w.isResponseFromCache(N),expiresOn:new Date(1e3*Number(_+a.expires_in)),tokenType:oe,correlationId:w.correlationId,state:a.state,fromNativeBroker:!0}})()}cacheAccount(a){this.browserStorage.setAccount(a),this.browserStorage.removeAccountContext(a).catch(c=>{this.logger.error(`Error occurred while removing account context from browser storage. ${c}`)})}cacheNativeTokens(a,c,d,f,g,_,w){const N=ke.createIdTokenEntity(d,c.authority,a.id_token||"",c.clientId,f.tid||""),K=w+(c.tokenType===y.hO.POP?y.gT.SHR_NONCE_VALIDITY:("string"==typeof a.expires_in?parseInt(a.expires_in,10):a.expires_in)||0),le=this.generateScopes(a,c),be=Ye.createAccessTokenEntity(d,c.authority,g,c.clientId,f.tid||_,le.printScopes(),K,0,this.browserCrypto),Qe=new Ge(void 0,N,be);this.nativeStorageManager.saveCacheRecord(Qe,c.storeInCache)}addTelemetryFromNativeResponse(a){const c=this.getMATSFromResponse(a);return c?(this.performanceClient.addFields({extensionId:this.nativeMessageHandler.getExtensionId(),extensionVersion:this.nativeMessageHandler.getExtensionVersion(),matsBrokerVersion:c.broker_version,matsAccountJoinOnStart:c.account_join_on_start,matsAccountJoinOnEnd:c.account_join_on_end,matsDeviceJoin:c.device_join,matsPromptBehavior:c.prompt_behavior,matsApiErrorCode:c.api_error_code,matsUiVisible:c.ui_visible,matsSilentCode:c.silent_code,matsSilentBiSubCode:c.silent_bi_sub_code,matsSilentMessage:c.silent_message,matsSilentStatus:c.silent_status,matsHttpStatus:c.http_status,matsHttpEventCount:c.http_event_count},this.correlationId),c):null}validateNativeResponse(a){if(a.hasOwnProperty("access_token")&&a.hasOwnProperty("id_token")&&a.hasOwnProperty("client_info")&&a.hasOwnProperty("account")&&a.hasOwnProperty("scope")&&a.hasOwnProperty("expires_in"))return a;throw(0,De.MD)(Ja.g,"Response missing expected properties.")}getMATSFromResponse(a){if(a.properties.MATS)try{return JSON.parse(a.properties.MATS)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(a){return typeof a.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!a.is_cached}initializeNativeRequest(a){var c=this;return(0,C.Z)(function*(){c.logger.trace("NativeInteractionClient - initializeNativeRequest called");const d=a.authority||c.config.auth.authority;a.account&&(yield c.validateRequestAuthority(d,a.account));const f=new H.G(d);f.validateAsUri();const{scopes:g,..._}=a,w=new rn.i(g||[]);w.appendScopes(y.f_);const k={..._,accountId:c.accountId,clientId:c.config.auth.clientId,authority:f.urlString,scope:w.printScopes(),redirectUri:c.getRedirectUri(a.redirectUri),prompt:(()=>{switch(c.apiId){case R.WN.ssoSilent:case R.WN.acquireTokenSilent_silentFlow:return c.logger.trace("initializeNativeRequest: silent request sets prompt to none"),y.NJ.NONE}if(a.prompt)switch(a.prompt){case y.NJ.NONE:case y.NJ.CONSENT:case y.NJ.LOGIN:return c.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),a.prompt;default:throw c.logger.trace(`initializeNativeRequest: prompt = ${a.prompt} is not compatible with native flow`),(0,pe.Z_)(ye.o9)}else c.logger.trace("initializeNativeRequest: prompt was not provided")})(),correlationId:c.correlationId,tokenType:a.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...a.extraQueryParameters,...a.tokenQueryParameters},extendedExpiryToken:!1};if(c.handleExtraBrokerParams(k),k.extraParameters=k.extraParameters||{},k.extraParameters.telemetry=R.BD.MATS_TELEMETRY,a.authenticationScheme===y.hO.POP){const K={resourceRequestUri:a.resourceRequestUri,resourceRequestMethod:a.resourceRequestMethod,shrClaims:a.shrClaims,shrNonce:a.shrNonce},le=new Vr(c.browserCrypto),be=yield Y(le.generateCnf.bind(le),A.Ak.PopTokenGenerateCnf,c.logger,c.performanceClient,c.correlationId)(K,c.logger);k.reqCnf=be.reqCnfHash,k.keyId=be.kid}return k})()}handleExtraBrokerParams(a){if(a.extraParameters&&a.extraParameters.hasOwnProperty("brk_client_id")&&a.extraParameters.hasOwnProperty("brk_redirect_uri")&&a.extraParameters.hasOwnProperty(y.Fo.CLIENT_ID)){const f=a.extraParameters.brk_redirect_uri;a.extraParameters={child_client_id:a.extraParameters[y.Fo.CLIENT_ID],child_redirect_uri:a.redirectUri},a.redirectUri=f}}}class Dn{constructor(a,c,d,f){this.logger=a,this.handshakeTimeoutMs=c,this.extensionId=f,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=d,this.handshakeEvent=d.startMeasurement(A.Ak.NativeMessageHandlerHandshake)}sendMessage(a){var c=this;return(0,C.Z)(function*(){c.logger.trace("NativeMessageHandler - sendMessage called.");const d={channel:R.BD.CHANNEL_ID,extensionId:c.extensionId,responseId:(0,Zn.nn)(),body:a};return c.logger.trace("NativeMessageHandler - Sending request to browser extension"),c.logger.tracePii(`NativeMessageHandler - Sending request to browser extension: ${JSON.stringify(d)}`),c.messageChannel.port1.postMessage(d),new Promise((f,g)=>{c.resolvers.set(d.responseId,{resolve:f,reject:g})})})()}static createProvider(a,c,d){return(0,C.Z)(function*(){a.trace("NativeMessageHandler - createProvider called.");try{const f=new Dn(a,c,d,R.BD.PREFERRED_EXTENSION_ID);return yield f.sendHandshakeRequest(),f}catch{const g=new Dn(a,c,d);return yield g.sendHandshakeRequest(),g}})()}sendHandshakeRequest(){var a=this;return(0,C.Z)(function*(){a.logger.trace("NativeMessageHandler - sendHandshakeRequest called."),window.addEventListener("message",a.windowListener,!1);const c={channel:R.BD.CHANNEL_ID,extensionId:a.extensionId,responseId:(0,Zn.nn)(),body:{method:R.Ky.HandshakeRequest}};return a.handshakeEvent.add({extensionId:a.extensionId,extensionHandshakeTimeoutMs:a.handshakeTimeoutMs}),a.messageChannel.port1.onmessage=d=>{a.onChannelMessage(d)},window.postMessage(c,window.origin,[a.messageChannel.port2]),new Promise((d,f)=>{a.handshakeResolvers.set(c.responseId,{resolve:d,reject:f}),a.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",a.windowListener,!1),a.messageChannel.port1.close(),a.messageChannel.port2.close(),a.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),f((0,pe.Z_)(ye.hR)),a.handshakeResolvers.delete(c.responseId)},a.handshakeTimeoutMs)})})()}onWindowMessage(a){if(this.logger.trace("NativeMessageHandler - onWindowMessage called"),a.source!==window)return;const c=a.data;if(c.channel&&c.channel===R.BD.CHANNEL_ID&&(!c.extensionId||c.extensionId===this.extensionId)&&c.body.method===R.Ky.HandshakeRequest){const d=this.handshakeResolvers.get(c.responseId);if(!d)return void this.logger.trace(`NativeMessageHandler.onWindowMessage - resolver can't be found for request ${c.responseId}`);this.logger.verbose(c.extensionId?`Extension with id: ${c.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),d.reject((0,pe.Z_)(ye.Wb))}}onChannelMessage(a){this.logger.trace("NativeMessageHandler - onChannelMessage called.");const c=a.data,d=this.resolvers.get(c.responseId),f=this.handshakeResolvers.get(c.responseId);try{const g=c.body.method;if(g===R.Ky.Response){if(!d)return;const _=c.body.response;if(this.logger.trace("NativeMessageHandler - Received response from browser extension"),this.logger.tracePii(`NativeMessageHandler - Received response from browser extension: ${JSON.stringify(_)}`),"Success"!==_.status)d.reject(os(_.code,_.description,_.ext));else{if(!_.result)throw(0,De.MD)(Ja.g,"Event does not contain result.");_.result.code&&_.result.description?d.reject(os(_.result.code,_.result.description,_.result.ext)):d.resolve(_.result)}this.resolvers.delete(c.responseId)}else if(g===R.Ky.HandshakeResponse){if(!f)return void this.logger.trace(`NativeMessageHandler.onChannelMessage - resolver can't be found for request ${c.responseId}`);clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=c.extensionId,this.extensionVersion=c.body.version,this.logger.verbose(`NativeMessageHandler - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),f.resolve(),this.handshakeResolvers.delete(c.responseId)}}catch(g){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${g}`),this.logger.errorPii(`Unable to parse ${a}`),d?d.reject(g):f&&f.reject(g)}}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}static isNativeAvailable(a,c,d,f){if(c.trace("isNativeAvailable called"),!a.system.allowNativeBroker)return c.trace("isNativeAvailable: allowNativeBroker is not enabled, returning false"),!1;if(!d)return c.trace("isNativeAvailable: WAM extension provider is not initialized, returning false"),!1;if(f)switch(f){case y.hO.BEARER:case y.hO.POP:return c.trace("isNativeAvailable: authenticationScheme is supported, returning true"),!0;default:return c.trace("isNativeAvailable: authenticationScheme is not supported, returning false"),!1}return!0}}class Gr{constructor(a,c,d,f,g){this.authModule=a,this.browserStorage=c,this.authCodeRequest=d,this.logger=f,this.performanceClient=g}handleCodeResponseFromHash(a,c,d,f){var g=this;return(0,C.Z)(function*(){if(g.performanceClient.addQueueMeasurement(A.Ak.HandleCodeResponseFromHash,g.authCodeRequest.correlationId),!a)throw(0,pe.Z_)(ye.nF);const _=g.browserStorage.generateStateKey(c),w=g.browserStorage.getTemporaryCache(_);if(!w)throw(0,F.zP)(se.LV,"Cached State");let N;try{N=g.authModule.handleFragmentResponse(a,w)}catch(k){throw k instanceof Ce.n&&k.subError===ye.h7?(0,pe.Z_)(ye.h7):k}return Y(g.handleCodeResponseFromServer.bind(g),A.Ak.HandleCodeResponseFromServer,g.logger,g.performanceClient,g.authCodeRequest.correlationId)(N,c,d,f)})()}handleCodeResponseFromServer(a,c,d,f,g=!0){var _=this;return(0,C.Z)(function*(){_.performanceClient.addQueueMeasurement(A.Ak.HandleCodeResponseFromServer,_.authCodeRequest.correlationId),_.logger.trace("InteractionHandler.handleCodeResponseFromServer called");const w=_.browserStorage.generateStateKey(c),N=_.browserStorage.getTemporaryCache(w);if(!N)throw(0,F.zP)(se.LV,"Cached State");const k=_.browserStorage.generateNonceKey(N),K=_.browserStorage.getTemporaryCache(k);if(_.authCodeRequest.code=a.code,a.cloud_instance_host_name&&(yield Y(_.updateTokenEndpointAuthority.bind(_),A.Ak.UpdateTokenEndpointAuthority,_.logger,_.performanceClient,_.authCodeRequest.correlationId)(a.cloud_instance_host_name,d,f)),g&&(a.nonce=K||void 0),a.state=N,a.client_info)_.authCodeRequest.clientInfo=a.client_info;else{const be=_.checkCcsCredentials();be&&(_.authCodeRequest.ccsCredential=be)}const le=yield Y(_.authModule.acquireToken.bind(_.authModule),A.Ak.AuthClientAcquireToken,_.logger,_.performanceClient,_.authCodeRequest.correlationId)(_.authCodeRequest,a);return _.browserStorage.cleanRequestByState(c),le})()}updateTokenEndpointAuthority(a,c,d){var f=this;return(0,C.Z)(function*(){f.performanceClient.addQueueMeasurement(A.Ak.UpdateTokenEndpointAuthority,f.authCodeRequest.correlationId);const g=`https://${a}/${c.tenant}/`,_=yield mr.createDiscoveredInstance(g,d,f.browserStorage,c.options,f.logger,f.performanceClient,f.authCodeRequest.correlationId);f.authModule.updateAuthority(_)})()}checkCcsCredentials(){const a=this.browserStorage.getTemporaryCache(R.c4.CCS_CREDENTIAL,!0);if(a)try{return JSON.parse(a)}catch{this.authModule.logger.error("Cache credential could not be parsed"),this.authModule.logger.errorPii(`Cache credential could not be parsed: ${a}`)}return null}}class rc extends yr{constructor(a,c,d,f,g,_,w,N,k,K){super(a,c,d,f,g,_,w,k,K),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=N}acquireToken(a){try{const c=this.generatePopupName(a.scopes||y.f_,a.authority||this.config.auth.authority),d=a.popupWindowAttributes||{};if(this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(a,c,d);{this.logger.verbose("asyncPopup set to false, opening popup before acquiring token");const f=this.openSizedPopup("about:blank",c,d);return this.acquireTokenPopupAsync(a,c,d,f)}}catch(c){return Promise.reject(c)}}logout(a){try{this.logger.verbose("logoutPopup called");const c=this.initializeLogoutRequest(a),d=this.generateLogoutPopupName(c),f=a&&a.authority,g=a&&a.mainWindowRedirectUri,_=a?.popupWindowAttributes||{};if(this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(c,d,_,f,void 0,g);{this.logger.verbose("asyncPopup set to false, opening popup");const w=this.openSizedPopup("about:blank",d,_);return this.logoutPopupAsync(c,d,_,f,w,g)}}catch(c){return Promise.reject(c)}}acquireTokenPopupAsync(a,c,d,f){var g=this;return(0,C.Z)(function*(){g.logger.verbose("acquireTokenPopupAsync called");const _=g.initializeServerTelemetryManager(R.WN.acquireTokenPopup);g.performanceClient.setPreQueueTime(A.Ak.StandardInteractionClientInitializeAuthorizationRequest,a.correlationId);const w=yield g.initializeAuthorizationRequest(a,R.s_.Popup);(0,st.$P)(w.authority),g.browserStorage.updateCacheEntries(w.state,w.nonce,w.authority,w.loginHint||y.gT.EMPTY_STRING,w.account||null);try{g.performanceClient.setPreQueueTime(A.Ak.StandardInteractionClientInitializeAuthorizationCodeRequest,a.correlationId);const N=yield g.initializeAuthorizationCodeRequest(w);g.performanceClient.setPreQueueTime(A.Ak.StandardInteractionClientCreateAuthCodeClient,a.correlationId);const k=yield g.createAuthCodeClient(_,w.authority,w.azureCloudOptions);g.logger.verbose("Auth code client created");const K=Dn.isNativeAvailable(g.config,g.logger,g.nativeMessageHandler,a.authenticationScheme);let le;K&&(le=g.performanceClient.startMeasurement(A.Ak.FetchAccountIdWithNativeBroker,a.correlationId));const be=yield k.getAuthCodeUrl({...w,nativeBroker:K}),Qe=new Gr(k,g.browserStorage,N,g.logger,g.performanceClient),yt=g.initiateAuthRequest(be,{popup:f,popupName:c,popupWindowAttributes:d});g.eventHandler.emitEvent(Ie.t.POPUP_OPENED,R.s_.Popup,{popupWindow:yt},null);const oe=yield g.monitorPopupForHash(yt),Oe=H.G.getDeserializedHash(oe),mn=g.validateAndExtractStateFromHash(Oe,R.s_.Popup,w.correlationId);if(nn.removeThrottle(g.browserStorage,g.config.auth.clientId,N),Oe.accountId){if(g.logger.verbose("Account id found in hash, calling WAM for token"),le&&le.end({success:!0,isNativeBroker:!0}),!g.nativeMessageHandler)throw(0,pe.Z_)(ye.V7);const vo=new $r(g.config,g.browserStorage,g.browserCrypto,g.logger,g.eventHandler,g.navigationClient,R.WN.acquireTokenPopup,g.performanceClient,g.nativeMessageHandler,Oe.accountId,g.nativeStorage,w.correlationId),{userRequestState:Kr}=wt.parseRequestState(g.browserCrypto,mn);return vo.acquireToken({...w,state:Kr,prompt:void 0}).finally(()=>{g.browserStorage.cleanRequestByState(mn)})}return yield Qe.handleCodeResponseFromHash(oe,mn,k.authority,g.networkClient)}catch(N){throw f&&f.close(),N instanceof De.l4&&(N.setCorrelationId(g.correlationId),_.cacheFailedRequest(N)),g.browserStorage.cleanRequestByState(w.state),N}})()}logoutPopupAsync(a,c,d,f,g,_){var w=this;return(0,C.Z)(function*(){w.logger.verbose("logoutPopupAsync called"),w.eventHandler.emitEvent(Ie.t.LOGOUT_START,R.s_.Popup,a);const N=w.initializeServerTelemetryManager(R.WN.logoutPopup);try{yield w.clearCacheOnLogout(a.account),w.performanceClient.setPreQueueTime(A.Ak.StandardInteractionClientCreateAuthCodeClient,a.correlationId);const k=yield w.createAuthCodeClient(N,f);w.logger.verbose("Auth code client created");const K=k.getLogoutUri(a);w.eventHandler.emitEvent(Ie.t.LOGOUT_SUCCESS,R.s_.Popup,a);const le=w.openPopup(K,{popupName:c,popupWindowAttributes:d,popup:g});if(w.eventHandler.emitEvent(Ie.t.POPUP_OPENED,R.s_.Popup,{popupWindow:le},null),yield w.waitForLogoutPopup(le),_){const be={apiId:R.WN.logoutPopup,timeout:w.config.system.redirectNavigationTimeout,noHistory:!1},Qe=H.G.getAbsoluteUrl(_,(0,st.Re)());w.logger.verbose("Redirecting main window to url specified in the request"),w.logger.verbosePii(`Redirecting main window to: ${Qe}`),yield w.navigationClient.navigateInternal(Qe,be)}else w.logger.verbose("No main window navigation requested")}catch(k){throw g&&g.close(),k instanceof De.l4&&(k.setCorrelationId(w.correlationId),N.cacheFailedRequest(k)),w.browserStorage.setInteractionInProgress(!1),w.eventHandler.emitEvent(Ie.t.LOGOUT_FAILURE,R.s_.Popup,null,k),w.eventHandler.emitEvent(Ie.t.LOGOUT_END,R.s_.Popup),k}w.eventHandler.emitEvent(Ie.t.LOGOUT_END,R.s_.Popup)})()}initiateAuthRequest(a,c){if(a)return this.logger.infoPii(`Navigate to: ${a}`),this.openPopup(a,c);throw this.logger.error("Navigate url is empty"),(0,pe.Z_)(ye._c)}monitorPopupForHash(a){return new Promise((c,d)=>{const f=this.config.system.windowHashTimeout/this.config.system.pollIntervalMilliseconds;let g=0;this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const _=setInterval(()=>{if(a.closed)return this.logger.error("PopupHandler.monitorPopupForHash - window closed"),this.cleanPopup(),clearInterval(_),void d((0,pe.Z_)(ye.h7));let w=y.gT.EMPTY_STRING,N=y.gT.EMPTY_STRING;try{w=a.location.href,N=this.extractServerResponseStringFromPopup(a,w)}catch{}!w||"about:blank"===w||(this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),g++,N?(this.logger.verbose("PopupHandler.monitorPopupForHash - found hash in url"),clearInterval(_),this.cleanPopup(a),H.G.hashContainsKnownProperties(N)?(this.logger.verbose("PopupHandler.monitorPopupForHash - hash contains known properties, returning."),c(N)):(this.logger.error("PopupHandler.monitorPopupForHash - found hash in url but it does not contain known properties. Check that your router is not changing the hash prematurely."),this.logger.errorPii(`PopupHandler.monitorPopupForHash - hash found: ${N}`),d((0,pe.Z_)(ye.S_)))):g>f&&(this.logger.error("PopupHandler.monitorPopupForHash - unable to find hash in url, timing out"),clearInterval(_),d((0,pe.Z_)(ye.ZT))))},this.config.system.pollIntervalMilliseconds)})}waitForLogoutPopup(a){return new Promise(c=>{this.logger.verbose("PopupHandler.waitForLogoutPopup - polling started");const d=setInterval(()=>{a.closed&&(this.logger.error("PopupHandler.waitForLogoutPopup - window closed"),this.cleanPopup(),clearInterval(d),c());let f=y.gT.EMPTY_STRING;try{f=a.location.href}catch{}!f||"about:blank"===f||(this.logger.verbose("PopupHandler.waitForLogoutPopup - popup window is on same origin as caller, closing."),clearInterval(d),this.cleanPopup(a),c())},this.config.system.pollIntervalMilliseconds)})}openPopup(a,c){try{let d;if(c.popup?(d=c.popup,this.logger.verbosePii(`Navigating popup window to: ${a}`),d.location.assign(a)):typeof c.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${a}`),d=this.openSizedPopup(a,c.popupName,c.popupWindowAttributes)),!d)throw(0,pe.Z_)(ye.H);return d.focus&&d.focus(),this.currentWindow=d,window.addEventListener("beforeunload",this.unloadWindow),d}catch(d){throw this.logger.error("error opening popup "+d.message),this.browserStorage.setInteractionInProgress(!1),(0,pe.Z_)(ye.E)}}openSizedPopup(a,c,d){const f=window.screenLeft?window.screenLeft:window.screenX,g=window.screenTop?window.screenTop:window.screenY,_=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,w=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let N=d.popupSize?.width,k=d.popupSize?.height,K=d.popupPosition?.top,le=d.popupPosition?.left;return(!N||N<0||N>_)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),N=R.qx.POPUP_WIDTH),(!k||k<0||k>w)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),k=R.qx.POPUP_HEIGHT),(!K||K<0||K>w)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),K=Math.max(0,w/2-R.qx.POPUP_HEIGHT/2+g)),(!le||le<0||le>_)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),le=Math.max(0,_/2-R.qx.POPUP_WIDTH/2+f)),window.open(a,c,`width=${N}, height=${k}, top=${K}, left=${le}, scrollbars=yes`)}unloadWindow(a){this.browserStorage.cleanRequestByInteractionType(R.s_.Popup),this.currentWindow&&this.currentWindow.close(),a.preventDefault()}cleanPopup(a){a&&a.close(),window.removeEventListener("beforeunload",this.unloadWindow),this.browserStorage.setInteractionInProgress(!1)}generatePopupName(a,c){return`${R.qx.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${a.join("-")}.${c}.${this.correlationId}`}generateLogoutPopupName(a){return`${R.qx.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${a.account&&a.account.homeAccountId}.${this.correlationId}`}extractServerResponseStringFromPopup(a,c){let d;return d=this.config.auth.OIDCOptions?.serverResponseType===y.rg.QUERY?H.G.parseQueryServerResponse(c):a.location.hash,d}}class zr extends Gr{constructor(a,c,d,f,g,_){super(a,c,d,f,_),this.browserCrypto=g}initiateAuthRequest(a,c){var d=this;return(0,C.Z)(function*(){if(d.logger.verbose("RedirectHandler.initiateAuthRequest called"),a){c.redirectStartPage&&(d.logger.verbose("RedirectHandler.initiateAuthRequest: redirectStartPage set, caching start page"),d.browserStorage.setTemporaryCache(R.c4.ORIGIN_URI,c.redirectStartPage,!0)),d.browserStorage.setTemporaryCache(R.c4.CORRELATION_ID,d.authCodeRequest.correlationId,!0),d.browserStorage.cacheCodeRequest(d.authCodeRequest),d.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${a}`);const f={apiId:R.WN.acquireTokenRedirect,timeout:c.redirectTimeout,noHistory:!1};return"function"==typeof c.onRedirectNavigate?(d.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),!1!==c.onRedirectNavigate(a)?(d.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),void(yield c.navigationClient.navigateExternal(a,f))):void d.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation")):(d.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),void(yield c.navigationClient.navigateExternal(a,f)))}throw d.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),(0,pe.Z_)(ye._c)})()}handleCodeResponseFromHash(a,c,d,f){var g=this;return(0,C.Z)(function*(){if(g.logger.verbose("RedirectHandler.handleCodeResponse called"),!a)throw(0,pe.Z_)(ye.nF);g.browserStorage.setInteractionInProgress(!1);const _=g.browserStorage.generateStateKey(c),w=g.browserStorage.getTemporaryCache(_);if(!w)throw(0,F.zP)(se.LV,"Cached State");let N;try{N=g.authModule.handleFragmentResponse(a,w)}catch(be){throw be instanceof Ce.n&&be.subError===ye.h7?(0,pe.Z_)(ye.h7):be}const k=g.browserStorage.generateNonceKey(w),K=g.browserStorage.getTemporaryCache(k);if(g.authCodeRequest.code=N.code,N.cloud_instance_host_name&&(yield g.updateTokenEndpointAuthority(N.cloud_instance_host_name,d,f)),N.nonce=K||void 0,N.state=w,N.client_info)g.authCodeRequest.clientInfo=N.client_info;else{const be=g.checkCcsCredentials();be&&(g.authCodeRequest.ccsCredential=be)}const le=yield g.authModule.acquireToken(g.authCodeRequest,N);return g.browserStorage.cleanRequestByState(c),le})()}}class Bu extends yr{constructor(a,c,d,f,g,_,w,N,k,K){super(a,c,d,f,g,_,w,k,K),this.nativeStorage=N}acquireToken(a){var c=this;return(0,C.Z)(function*(){c.performanceClient.setPreQueueTime(A.Ak.StandardInteractionClientInitializeAuthorizationRequest,a.correlationId);const d=yield c.initializeAuthorizationRequest(a,R.s_.Redirect);c.browserStorage.updateCacheEntries(d.state,d.nonce,d.authority,d.loginHint||y.gT.EMPTY_STRING,d.account||null);const f=c.initializeServerTelemetryManager(R.WN.acquireTokenRedirect),g=_=>{_.persisted&&(c.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),c.browserStorage.cleanRequestByState(d.state),c.eventHandler.emitEvent(Ie.t.RESTORE_FROM_BFCACHE,R.s_.Redirect))};try{c.performanceClient.setPreQueueTime(A.Ak.StandardInteractionClientInitializeAuthorizationCodeRequest,a.correlationId);const _=yield c.initializeAuthorizationCodeRequest(d);c.performanceClient.setPreQueueTime(A.Ak.StandardInteractionClientCreateAuthCodeClient,a.correlationId);const w=yield c.createAuthCodeClient(f,d.authority,d.azureCloudOptions);c.logger.verbose("Auth code client created");const N=new zr(w,c.browserStorage,_,c.logger,c.browserCrypto,c.performanceClient),k=yield w.getAuthCodeUrl({...d,nativeBroker:Dn.isNativeAvailable(c.config,c.logger,c.nativeMessageHandler,a.authenticationScheme)}),K=c.getRedirectStartPage(a.redirectStartPage);return c.logger.verbosePii(`Redirect start page: ${K}`),window.addEventListener("pageshow",g),yield N.initiateAuthRequest(k,{navigationClient:c.navigationClient,redirectTimeout:c.config.system.redirectNavigationTimeout,redirectStartPage:K,onRedirectNavigate:a.onRedirectNavigate})}catch(_){throw _ instanceof De.l4&&(_.setCorrelationId(c.correlationId),f.cacheFailedRequest(_)),window.removeEventListener("pageshow",g),c.browserStorage.cleanRequestByState(d.state),_}})()}handleRedirectPromise(a){var c=this;return(0,C.Z)(function*(){const d=c.initializeServerTelemetryManager(R.WN.handleRedirectPromise);try{if(!c.browserStorage.isInteractionInProgress(!0))return c.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const f=c.getRedirectResponseHash(a||window.location.hash);if(!f)return c.logger.info("handleRedirectPromise did not detect a response hash as a result of a redirect. Cleaning temporary cache."),c.browserStorage.cleanRequestByInteractionType(R.s_.Redirect),null;let g;try{const k=H.G.getDeserializedHash(f);g=c.validateAndExtractStateFromHash(k,R.s_.Redirect),c.logger.verbose("State extracted from hash")}catch(k){return c.logger.info(`handleRedirectPromise was unable to extract state due to: ${k}`),c.browserStorage.cleanRequestByInteractionType(R.s_.Redirect),null}const _=c.browserStorage.getTemporaryCache(R.c4.ORIGIN_URI,!0)||y.gT.EMPTY_STRING;if(H.G.removeHashFromUrl(_)===H.G.removeHashFromUrl(window.location.href)&&c.config.auth.navigateToLoginRequestUrl){c.logger.verbose("Current page is loginRequestUrl, handling hash");const k=yield c.handleHash(f,g,d);return _.indexOf("#")>-1&&(0,st.tT)(_),k}if(!c.config.auth.navigateToLoginRequestUrl)return c.logger.verbose("NavigateToLoginRequestUrl set to false, handling hash"),c.handleHash(f,g,d);if(!(0,st.zd)()||c.config.system.allowRedirectInIframe){c.browserStorage.setTemporaryCache(R.c4.URL_HASH,f,!0);const k={apiId:R.WN.handleRedirectPromise,timeout:c.config.system.redirectNavigationTimeout,noHistory:!0};let K=!0;if(_&&"null"!==_)c.logger.verbose(`Navigating to loginRequestUrl: ${_}`),K=yield c.navigationClient.navigateInternal(_,k);else{const le=(0,st.fl)();c.browserStorage.setTemporaryCache(R.c4.ORIGIN_URI,le,!0),c.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),K=yield c.navigationClient.navigateInternal(le,k)}if(!K)return c.handleHash(f,g,d)}return null}catch(f){throw f instanceof De.l4&&(f.setCorrelationId(c.correlationId),d.cacheFailedRequest(f)),c.browserStorage.cleanRequestByInteractionType(R.s_.Redirect),f}})()}getRedirectResponseHash(a){if(this.logger.verbose("getRedirectResponseHash called"),H.G.hashContainsKnownProperties(a))return(0,st.hH)(window),this.logger.verbose("Hash contains known properties, returning response hash"),a;const d=this.browserStorage.getTemporaryCache(R.c4.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(R.c4.URL_HASH)),this.logger.verbose("Hash does not contain known properties, returning cached hash"),d}handleHash(a,c,d){var f=this;return(0,C.Z)(function*(){const g=f.browserStorage.getCachedRequest(c);f.logger.verbose("handleHash called, retrieved cached request");const _=H.G.getDeserializedHash(a);if(_.accountId){if(f.logger.verbose("Account id found in hash, calling WAM for token"),!f.nativeMessageHandler)throw(0,pe.Z_)(ye.V7);const K=new $r(f.config,f.browserStorage,f.browserCrypto,f.logger,f.eventHandler,f.navigationClient,R.WN.acquireTokenPopup,f.performanceClient,f.nativeMessageHandler,_.accountId,f.nativeStorage,g.correlationId),{userRequestState:le}=wt.parseRequestState(f.browserCrypto,c);return K.acquireToken({...g,state:le,prompt:void 0}).finally(()=>{f.browserStorage.cleanRequestByState(c)})}const w=f.browserStorage.getCachedAuthority(c);if(!w)throw(0,pe.Z_)(ye.dT);f.performanceClient.setPreQueueTime(A.Ak.StandardInteractionClientCreateAuthCodeClient,g.correlationId);const N=yield f.createAuthCodeClient(d,w);return f.logger.verbose("Auth code client created"),nn.removeThrottle(f.browserStorage,f.config.auth.clientId,g),yield new zr(N,f.browserStorage,g,f.logger,f.browserCrypto,f.performanceClient).handleCodeResponseFromHash(a,c,N.authority,f.networkClient)})()}logout(a){var c=this;return(0,C.Z)(function*(){c.logger.verbose("logoutRedirect called");const d=c.initializeLogoutRequest(a),f=c.initializeServerTelemetryManager(R.WN.logout);try{c.eventHandler.emitEvent(Ie.t.LOGOUT_START,R.s_.Redirect,a),yield c.clearCacheOnLogout(d.account);const g={apiId:R.WN.logout,timeout:c.config.system.redirectNavigationTimeout,noHistory:!1};c.performanceClient.setPreQueueTime(A.Ak.StandardInteractionClientCreateAuthCodeClient,d.correlationId);const _=yield c.createAuthCodeClient(f,a&&a.authority);c.logger.verbose("Auth code client created");const w=_.getLogoutUri(d);if(c.eventHandler.emitEvent(Ie.t.LOGOUT_SUCCESS,R.s_.Redirect,d),!a||"function"!=typeof a.onRedirectNavigate)return c.browserStorage.getInteractionInProgress()||c.browserStorage.setInteractionInProgress(!0),void(yield c.navigationClient.navigateExternal(w,g));if(!1!==a.onRedirectNavigate(w))return c.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),c.browserStorage.getInteractionInProgress()||c.browserStorage.setInteractionInProgress(!0),void(yield c.navigationClient.navigateExternal(w,g));c.browserStorage.setInteractionInProgress(!1),c.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation")}catch(g){throw g instanceof De.l4&&(g.setCorrelationId(c.correlationId),f.cacheFailedRequest(g)),c.eventHandler.emitEvent(Ie.t.LOGOUT_FAILURE,R.s_.Redirect,null,g),c.eventHandler.emitEvent(Ie.t.LOGOUT_END,R.s_.Redirect),g}c.eventHandler.emitEvent(Ie.t.LOGOUT_END,R.s_.Redirect)})()}getRedirectStartPage(a){const c=a||window.location.href;return H.G.getAbsoluteUrl(c,(0,st.Re)())}}var is=S(803);function oc(G,a,c,d,f){return ss.apply(this,arguments)}function ss(){return(ss=(0,C.Z)(function*(G,a,c,d,f){if(a.addQueueMeasurement(A.Ak.SilentHandlerInitiateAuthRequest,d),!G)throw c.info("Navigate url is empty"),(0,pe.Z_)(ye._c);return f?yield Y(ju,A.Ak.SilentHandlerLoadFrame,c,a,d)(G,f,a,d):re(ic,A.Ak.SilentHandlerLoadFrameSync,c,a,d)(G)})).apply(this,arguments)}function Vu(G,a,c,d,f,g){return as.apply(this,arguments)}function as(){return(as=(0,C.Z)(function*(G,a,c,d,f,g){return d.addQueueMeasurement(A.Ak.SilentHandlerMonitorIframeForHash,g),new Promise((_,w)=>{a<is.Is&&f.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${a}ms) than the default (${is.Is}ms). This may result in timeouts.`);const N=window.setTimeout(()=>{window.clearInterval(k),w((0,pe.Z_)(ye.JA))},a),k=window.setInterval(()=>{let K="";const le=G.contentWindow;try{K=le?le.location.href:""}catch{}if(!K||"about:blank"===K)return;const be=le?le.location.hash:"";window.clearTimeout(N),window.clearInterval(k),_(be)},c)}).finally(()=>{re($u,A.Ak.RemoveHiddenIframe,f,d,g)(G)})})).apply(this,arguments)}function ju(G,a,c,d){return c.addQueueMeasurement(A.Ak.SilentHandlerLoadFrame,d),new Promise((f,g)=>{const _=sc();window.setTimeout(()=>{_?(_.src=G,f(_)):g("Unable to load iframe")},a)})}function ic(G){const a=sc();return a.src=G,a}function sc(){const G=document.createElement("iframe");return G.style.visibility="hidden",G.style.position="absolute",G.style.width=G.style.height="0",G.style.border="0",G.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.getElementsByTagName("body")[0].appendChild(G),G}function $u(G){document.body===G.parentNode&&document.body.removeChild(G)}class Ke extends yr{constructor(a,c,d,f,g,_,w,N,k,K,le){super(a,c,d,f,g,_,N,K,le),this.apiId=w,this.nativeStorage=k}acquireToken(a){var c=this;return(0,C.Z)(function*(){if(c.performanceClient.addQueueMeasurement(A.Ak.SilentIframeClientAcquireToken,a.correlationId),!a.loginHint&&!a.sid&&(!a.account||!a.account.username)&&c.logger.warning("No user hint provided. The authorization server may need more information to complete this request."),a.prompt&&a.prompt!==y.NJ.NONE&&a.prompt!==y.NJ.NO_SESSION)throw(0,pe.Z_)(ye.WQ);const d=yield Y(c.initializeAuthorizationRequest.bind(c),A.Ak.StandardInteractionClientInitializeAuthorizationRequest,c.logger,c.performanceClient,a.correlationId)({...a,prompt:a.prompt||y.NJ.NONE},R.s_.Silent);(0,st.$P)(d.authority),c.browserStorage.updateCacheEntries(d.state,d.nonce,d.authority,d.loginHint||y.gT.EMPTY_STRING,d.account||null);const f=c.initializeServerTelemetryManager(c.apiId);try{const g=yield Y(c.createAuthCodeClient.bind(c),A.Ak.StandardInteractionClientCreateAuthCodeClient,c.logger,c.performanceClient,a.correlationId)(f,d.authority,d.azureCloudOptions);return yield Y(c.silentTokenHelper.bind(c),A.Ak.SilentIframeClientTokenHelper,c.logger,c.performanceClient,a.correlationId)(g,d)}catch(g){throw g instanceof De.l4&&(g.setCorrelationId(c.correlationId),f.cacheFailedRequest(g)),c.browserStorage.cleanRequestByState(d.state),g}})()}logout(){return Promise.reject((0,pe.Z_)(ye.I9))}silentTokenHelper(a,c){var d=this;return(0,C.Z)(function*(){const f=c.correlationId;d.performanceClient.addQueueMeasurement(A.Ak.SilentIframeClientTokenHelper,f);const g=yield Y(d.initializeAuthorizationCodeRequest.bind(d),A.Ak.StandardInteractionClientInitializeAuthorizationCodeRequest,d.logger,d.performanceClient,f)(c),_=yield Y(a.getAuthCodeUrl.bind(a),A.Ak.GetAuthCodeUrl,d.logger,d.performanceClient,f)({...c,nativeBroker:Dn.isNativeAvailable(d.config,d.logger,d.nativeMessageHandler,c.authenticationScheme)}),w=new Gr(a,d.browserStorage,g,d.logger,d.performanceClient),N=yield Y(oc,A.Ak.SilentHandlerInitiateAuthRequest,d.logger,d.performanceClient,f)(_,d.performanceClient,d.logger,f,d.config.system.navigateFrameWait),k=yield Y(Vu,A.Ak.SilentHandlerMonitorIframeForHash,d.logger,d.performanceClient,f)(N,d.config.system.iframeHashTimeout,d.config.system.pollIntervalMilliseconds,d.performanceClient,d.logger,f);if(!k)throw d.logger.error("The request has returned to the redirectUri but a hash is not present in the iframe. It's likely that the hash has been removed or the page has been redirected by code running on the redirectUri page."),(0,pe.Z_)(ye.nF);if(!H.G.hashContainsKnownProperties(k))throw d.logger.error("A hash is present in the iframe but it does not contain known properties. It's likely that the hash has been replaced by code running on the redirectUri page."),d.logger.errorPii(`The hash detected in the iframe is: ${k}`),(0,pe.Z_)(ye.S_);const K=H.G.getDeserializedHash(k),le=d.validateAndExtractStateFromHash(K,R.s_.Silent,f);if(K.accountId){if(d.logger.verbose("Account id found in hash, calling WAM for token"),!d.nativeMessageHandler)throw(0,pe.Z_)(ye.V7);const be=new $r(d.config,d.browserStorage,d.browserCrypto,d.logger,d.eventHandler,d.navigationClient,d.apiId,d.performanceClient,d.nativeMessageHandler,K.accountId,d.browserStorage,f),{userRequestState:Qe}=wt.parseRequestState(d.browserCrypto,le);return Y(be.acquireToken.bind(be),A.Ak.NativeInteractionClientAcquireToken,d.logger,d.performanceClient,f)({...c,state:Qe,prompt:c.prompt||y.NJ.NONE}).finally(()=>{d.browserStorage.cleanRequestByState(le)})}return Y(w.handleCodeResponseFromHash.bind(w),A.Ak.HandleCodeResponseFromHash,d.logger,d.performanceClient,f)(k,le,a.authority,d.networkClient)})()}}class Gu extends yr{acquireToken(a){var c=this;return(0,C.Z)(function*(){c.performanceClient.addQueueMeasurement(A.Ak.SilentRefreshClientAcquireToken,a.correlationId);const d=yield Y(c.initializeBaseRequest.bind(c),A.Ak.InitializeBaseRequest,c.logger,c.performanceClient,a.correlationId)(a,a.account),f={...a,...d},g=c.initializeServerTelemetryManager(R.WN.acquireTokenSilent_silentFlow),_=yield c.createRefreshTokenClient(g,f.authority,f.azureCloudOptions);return c.logger.verbose("Refresh token client created"),Y(_.acquireTokenByRefreshToken.bind(_),A.Ak.RefreshTokenClientAcquireTokenByRefreshToken,c.logger,c.performanceClient,a.correlationId)(f).then(w=>w).then(w=>(c.performanceClient.addFields({fromCache:w.fromCache,requestId:w.requestId},a.correlationId),w)).catch(w=>{throw w.setCorrelationId(c.correlationId),g.cacheFailedRequest(w),w})})()}logout(){return Promise.reject((0,pe.Z_)(ye.I9))}createRefreshTokenClient(a,c,d){var f=this;return(0,C.Z)(function*(){const g=yield Y(f.getClientConfiguration.bind(f),A.Ak.StandardInteractionClientGetClientConfiguration,f.logger,f.performanceClient,f.correlationId)(a,c,d);return new mt(g,f.performanceClient)})()}}class $t{constructor(a,c,d,f){this.isBrowserEnvironment=typeof window<"u",this.config=a,this.storage=c,this.logger=d,this.cryptoObj=f}loadExternalTokens(a,c,d){if(this.logger.info("TokenCache - loadExternalTokens called"),!c.id_token)throw(0,pe.Z_)(ye.Jd);const f=Ee.Z_(c.id_token,Vo.t);let g,_,w;if(a.account)w=ie.r.createFromAccountInfo(a.account),g=new Ge(w,this.loadIdToken(c.id_token,w.homeAccountId,a.account.environment,a.account.tenantId),this.loadAccessToken(a,c,w.homeAccountId,a.account.environment,a.account.tenantId,d),this.loadRefreshToken(a,c,w.homeAccountId,a.account.environment));else{if(!a.authority)throw(0,pe.Z_)(ye.Jd);{const N=ce.generateAuthority(a.authority,a.azureCloudOptions);if(_=new ce(N,this.config.system.networkClient,this.storage,{protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},this.logger),d.clientInfo)this.logger.trace("TokenCache - homeAccountId from options"),w=this.loadAccount(f,_,d.clientInfo),g=new Ge(w,this.loadIdToken(c.id_token,w.homeAccountId,_.hostnameAndPort,_.tenant),this.loadAccessToken(a,c,w.homeAccountId,_.hostnameAndPort,_.tenant,d),this.loadRefreshToken(a,c,w.homeAccountId,_.hostnameAndPort));else{if(!c.client_info)throw(0,pe.Z_)(ye.Jd);this.logger.trace("TokenCache - homeAccountId from response"),w=this.loadAccount(f,_,c.client_info),g=new Ge(w,this.loadIdToken(c.id_token,w.homeAccountId,_.hostnameAndPort,_.tenant),this.loadAccessToken(a,c,w.homeAccountId,_.hostnameAndPort,_.tenant,d),this.loadRefreshToken(a,c,w.homeAccountId,_.hostnameAndPort))}}}return this.generateAuthenticationResult(a,f,g,w,_)}loadAccount(a,c,d,f){let g;if(f?g=f:void 0!==c.authorityType&&d&&(g=ie.r.generateHomeAccountId(d,c.authorityType,this.logger,this.cryptoObj,a)),!g)throw(0,pe.Z_)(ye.Jd);const _=ie.r.createAccount({homeAccountId:g,idTokenClaims:a,clientInfo:d,environment:c.hostnameAndPort},c);if(this.isBrowserEnvironment)return this.logger.verbose("TokenCache - loading account"),this.storage.setAccount(_),_;throw(0,pe.Z_)(ye.Jd)}loadIdToken(a,c,d,f){const g=ke.createIdTokenEntity(c,d,a,this.config.auth.clientId,f);if(this.isBrowserEnvironment)return this.logger.verbose("TokenCache - loading id token"),this.storage.setIdTokenCredential(g),g;throw(0,pe.Z_)(ye.Jd)}loadAccessToken(a,c,d,f,g,_){if(!c.access_token)return this.logger.verbose("TokenCache - No access token provided for caching"),null;if(!c.expires_in||!_.extendedExpiresOn)throw(0,pe.Z_)(ye.Jd);const w=new rn.i(a.scopes).printScopes(),N=_.expiresOn||c.expires_in+(new Date).getTime()/1e3,K=Ye.createAccessTokenEntity(d,f,c.access_token,this.config.auth.clientId,g,w,N,_.extendedExpiresOn,this.cryptoObj);if(this.isBrowserEnvironment)return this.logger.verbose("TokenCache - loading access token"),this.storage.setAccessTokenCredential(K),K;throw(0,pe.Z_)(ye.Jd)}loadRefreshToken(a,c,d,f){if(!c.refresh_token)return this.logger.verbose("TokenCache - No refresh token provided for caching"),null;const g=ut.createRefreshTokenEntity(d,f,c.refresh_token,this.config.auth.clientId);if(this.isBrowserEnvironment)return this.logger.verbose("TokenCache - loading refresh token"),this.storage.setRefreshTokenCredential(g),g;throw(0,pe.Z_)(ye.Jd)}generateAuthenticationResult(a,c,d,f,g){let k,_=y.gT.EMPTY_STRING,w=[],N=null;return d?.accessToken&&(_=d.accessToken.secret,w=rn.i.fromString(d.accessToken.target).asArray(),N=new Date(1e3*Number(d.accessToken.expiresOn)),k=new Date(1e3*Number(d.accessToken.extendedExpiresOn))),{authority:g?g.canonicalAuthority:y.gT.EMPTY_STRING,uniqueId:c.oid||c.sub||y.gT.EMPTY_STRING,tenantId:c.tid||y.gT.EMPTY_STRING,scopes:w,account:f.getAccountInfo(),idToken:d.idToken?.secret||"",idTokenClaims:c||{},accessToken:_,fromCache:!0,expiresOn:N,correlationId:a.correlationId||y.gT.EMPTY_STRING,requestId:y.gT.EMPTY_STRING,extExpiresOn:k,familyId:y.gT.EMPTY_STRING,tokenType:d?.accessToken?.tokenType||y.gT.EMPTY_STRING,state:y.gT.EMPTY_STRING,cloudGraphHostName:f.cloudGraphHostName||y.gT.EMPTY_STRING,msGraphHost:f.msGraphHost||y.gT.EMPTY_STRING,code:void 0,fromNativeBroker:!1}}}class ge extends qa{constructor(a){super(a),this.includeRedirectUri=!1}}class ac extends yr{constructor(a,c,d,f,g,_,w,N,k,K){super(a,c,d,f,g,_,N,k,K),this.apiId=w}acquireToken(a){var c=this;return(0,C.Z)(function*(){if(!a.code)throw(0,pe.Z_)(ye.Aj);const d=yield Y(c.initializeAuthorizationRequest.bind(c),A.Ak.StandardInteractionClientInitializeAuthorizationRequest,c.logger,c.performanceClient,a.correlationId)(a,R.s_.Silent);c.browserStorage.updateCacheEntries(d.state,d.nonce,d.authority,d.loginHint||y.gT.EMPTY_STRING,d.account||null);const f=c.initializeServerTelemetryManager(c.apiId);try{const g={...d,code:a.code},_=yield Y(c.getClientConfiguration.bind(c),A.Ak.StandardInteractionClientGetClientConfiguration,c.logger,c.performanceClient,a.correlationId)(f,d.authority),w=new ge(_);c.logger.verbose("Auth code client created");const N=new Gr(w,c.browserStorage,g,c.logger,c.performanceClient);return Y(N.handleCodeResponseFromServer.bind(N),A.Ak.HandleCodeResponseFromServer,c.logger,c.performanceClient,a.correlationId)({code:a.code,msgraph_host:a.msGraphHost,cloud_graph_host_name:a.cloudGraphHostName,cloud_instance_host_name:a.cloudInstanceHostName},d.state,w.authority,c.networkClient,!1)}catch(g){throw g instanceof De.l4&&(g.setCorrelationId(c.correlationId),f.cacheFailedRequest(g)),c.browserStorage.cleanRequestByState(d.state),g}})()}logout(){return Promise.reject((0,pe.Z_)(ye.I9))}}class yo{constructor(a){this.atsAsyncMeasurement=void 0,this.operatingContext=a,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=a.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new m.Q(this.logger,this.performanceClient):M.d,this.eventHandler=new Nu.b(this.logger,this.browserCrypto),this.browserStorage=this.isBrowserEnvironment?new $a(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,function j(G){const a=G.cloudDiscoveryMetadata;let c;if(a)try{c=JSON.parse(a).metadata}catch{throw(0,P.ei)(we.E)}return{canonicalAuthority:G.authority?W(G.authority):void 0,knownAuthorities:G.knownAuthorities,cloudDiscoveryMetadata:c}}(this.config.auth)):((G,a)=>new $a(this.config.auth.clientId,{cacheLocation:R.Ix.MemoryStorage,temporaryCacheLocation:R.Ix.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1},M.d,this.logger))(),this.nativeInternalStorage=new $a(this.config.auth.clientId,{cacheLocation:R.Ix.MemoryStorage,temporaryCacheLocation:R.Ix.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1},this.browserCrypto,this.logger),this.tokenCache=new $t(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static createController(a){return(0,C.Z)(function*(){const c=new yo(a);return yield c.initialize(),c})()}trackPageVisibility(){this.atsAsyncMeasurement&&(this.logger.info("Perf: Visibility change detected"),this.atsAsyncMeasurement.increment({visibilityChangeCount:1}))}initialize(){var a=this;return(0,C.Z)(function*(){if(a.logger.trace("initialize called"),a.initialized)return void a.logger.info("initialize has already been called, exiting early.");const c=a.config.system.allowNativeBroker,d=a.performanceClient.startMeasurement(A.Ak.InitializeClientApplication);if(a.eventHandler.emitEvent(Ie.t.INITIALIZE_START),c)try{a.nativeExtensionProvider=yield Dn.createProvider(a.logger,a.config.system.nativeBrokerHandshakeTimeout,a.performanceClient)}catch(f){a.logger.verbose(f)}a.config.cache.claimsBasedCachingEnabled||(a.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),yield Y(a.browserStorage.clearTokensAndKeysWithClaims.bind(a.browserStorage),A.Ak.ClearTokensAndKeysWithClaims,a.logger,a.performanceClient)(a.performanceClient)),a.initialized=!0,a.eventHandler.emitEvent(Ie.t.INITIALIZE_END),d.end({allowNativeBroker:c,success:!0})})()}handleRedirectPromise(a){var c=this;return(0,C.Z)(function*(){c.logger.verbose("handleRedirectPromise called"),(0,st.eQ)(c.initialized);let d=a;if(c.config.auth.OIDCOptions?.serverResponseType===y.rg.QUERY){const g=window.location.href;d=H.G.parseQueryServerResponse(g)}const f=c.getAllAccounts();if(c.isBrowserEnvironment){const g=d||y.gT.EMPTY_STRING;let _=c.redirectResponse.get(g);if(typeof _>"u"){c.eventHandler.emitEvent(Ie.t.HANDLE_REDIRECT_START,R.s_.Redirect),c.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise");const w=c.browserStorage.getCachedNativeRequest();let N;if(w&&Dn.isNativeAvailable(c.config,c.logger,c.nativeExtensionProvider)&&c.nativeExtensionProvider&&!d)c.logger.trace("handleRedirectPromise - acquiring token from native platform"),N=new $r(c.config,c.browserStorage,c.browserCrypto,c.logger,c.eventHandler,c.navigationClient,R.WN.handleRedirectPromise,c.performanceClient,c.nativeExtensionProvider,w.accountId,c.nativeInternalStorage,w.correlationId).handleRedirectPromise();else{c.logger.trace("handleRedirectPromise - acquiring token from web flow");const k=c.browserStorage.getTemporaryCache(R.c4.CORRELATION_ID,!0)||y.gT.EMPTY_STRING;N=c.createRedirectClient(k).handleRedirectPromise(d)}_=N.then(k=>(k&&(f.length<c.getAllAccounts().length?(c.eventHandler.emitEvent(Ie.t.LOGIN_SUCCESS,R.s_.Redirect,k),c.logger.verbose("handleRedirectResponse returned result, login success")):(c.eventHandler.emitEvent(Ie.t.ACQUIRE_TOKEN_SUCCESS,R.s_.Redirect,k),c.logger.verbose("handleRedirectResponse returned result, acquire token success"))),c.eventHandler.emitEvent(Ie.t.HANDLE_REDIRECT_END,R.s_.Redirect),k)).catch(k=>{throw c.eventHandler.emitEvent(f.length>0?Ie.t.ACQUIRE_TOKEN_FAILURE:Ie.t.LOGIN_FAILURE,R.s_.Redirect,null,k),c.eventHandler.emitEvent(Ie.t.HANDLE_REDIRECT_END,R.s_.Redirect),k}),c.redirectResponse.set(g,_)}else c.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call");return _}return c.logger.verbose("handleRedirectPromise returns null, not browser environment"),null})()}acquireTokenRedirect(a){var c=this;return(0,C.Z)(function*(){const d=c.getRequestCorrelationId(a);c.logger.verbose("acquireTokenRedirect called",d),c.preflightBrowserEnvironmentCheck(R.s_.Redirect);const f=c.getAllAccounts().length>0;let g;return c.eventHandler.emitEvent(f?Ie.t.ACQUIRE_TOKEN_START:Ie.t.LOGIN_START,R.s_.Redirect,a),g=c.nativeExtensionProvider&&c.canUseNative(a)?new $r(c.config,c.browserStorage,c.browserCrypto,c.logger,c.eventHandler,c.navigationClient,R.WN.acquireTokenRedirect,c.performanceClient,c.nativeExtensionProvider,c.getNativeAccountId(a),c.nativeInternalStorage,a.correlationId).acquireTokenRedirect(a).catch(w=>{if(w instanceof Fn&&Ft(w))return c.nativeExtensionProvider=void 0,c.createRedirectClient(a.correlationId).acquireToken(a);if(w instanceof X.Yo)return c.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),c.createRedirectClient(a.correlationId).acquireToken(a);throw c.getBrowserStorage().setInteractionInProgress(!1),w}):c.createRedirectClient(a.correlationId).acquireToken(a),g.catch(_=>{throw c.eventHandler.emitEvent(f?Ie.t.ACQUIRE_TOKEN_FAILURE:Ie.t.LOGIN_FAILURE,R.s_.Redirect,null,_),_})})()}acquireTokenPopup(a){const c=this.getRequestCorrelationId(a),d=this.performanceClient.startMeasurement(A.Ak.AcquireTokenPopup,c);try{this.logger.verbose("acquireTokenPopup called",c),this.preflightBrowserEnvironmentCheck(R.s_.Popup)}catch(_){return Promise.reject(_)}const f=this.getAllAccounts();let g;return this.eventHandler.emitEvent(f.length>0?Ie.t.ACQUIRE_TOKEN_START:Ie.t.LOGIN_START,R.s_.Popup,a),g=this.canUseNative(a)?this.acquireTokenNative(a,R.WN.acquireTokenPopup).then(_=>(this.getBrowserStorage().setInteractionInProgress(!1),d.end({success:!0,isNativeBroker:!0,requestId:_.requestId}),_)).catch(_=>{if(_ instanceof Fn&&Ft(_))return this.nativeExtensionProvider=void 0,this.createPopupClient(a.correlationId).acquireToken(a);if(_ instanceof X.Yo)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(a.correlationId).acquireToken(a);throw this.getBrowserStorage().setInteractionInProgress(!1),_}):this.createPopupClient(a.correlationId).acquireToken(a),g.then(_=>(f.length<this.getAllAccounts().length?this.eventHandler.emitEvent(Ie.t.LOGIN_SUCCESS,R.s_.Popup,_):this.eventHandler.emitEvent(Ie.t.ACQUIRE_TOKEN_SUCCESS,R.s_.Popup,_),d.add({accessTokenSize:_.accessToken.length,idTokenSize:_.idToken.length}),d.end({success:!0,requestId:_.requestId}),_)).catch(_=>(this.eventHandler.emitEvent(f.length>0?Ie.t.ACQUIRE_TOKEN_FAILURE:Ie.t.LOGIN_FAILURE,R.s_.Popup,null,_),d.end({errorCode:_.errorCode,subErrorCode:_.subError,success:!1}),Promise.reject(_)))}trackPageVisibilityWithMeasurement(){const a=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;a&&(this.logger.info("Perf: Visibility change detected in ",a.event.name),a.increment({visibilityChangeCount:1}))}ssoSilent(a){var c=this;return(0,C.Z)(function*(){const d=c.getRequestCorrelationId(a),f={...a,prompt:a.prompt,correlationId:d};let g;return c.preflightBrowserEnvironmentCheck(R.s_.Silent),c.ssoSilentMeasurement=c.performanceClient.startMeasurement(A.Ak.SsoSilent,d),c.ssoSilentMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",c.trackPageVisibilityWithMeasurement),c.logger.verbose("ssoSilent called",d),c.eventHandler.emitEvent(Ie.t.SSO_SILENT_START,R.s_.Silent,f),g=c.canUseNative(f)?c.acquireTokenNative(f,R.WN.ssoSilent).catch(_=>{if(_ instanceof Fn&&Ft(_))return c.nativeExtensionProvider=void 0,c.createSilentIframeClient(f.correlationId).acquireToken(f);throw _}):c.createSilentIframeClient(f.correlationId).acquireToken(f),g.then(_=>(c.eventHandler.emitEvent(Ie.t.SSO_SILENT_SUCCESS,R.s_.Silent,_),c.ssoSilentMeasurement?.add({accessTokenSize:_.accessToken.length,idTokenSize:_.idToken.length}),c.ssoSilentMeasurement?.end({success:!0,isNativeBroker:_.fromNativeBroker,requestId:_.requestId}),_)).catch(_=>{throw c.eventHandler.emitEvent(Ie.t.SSO_SILENT_FAILURE,R.s_.Silent,null,_),c.ssoSilentMeasurement?.end({errorCode:_.errorCode,subErrorCode:_.subError,success:!1}),_}).finally(()=>{document.removeEventListener("visibilitychange",c.trackPageVisibilityWithMeasurement)})})()}acquireTokenByCode(a){var c=this;return(0,C.Z)(function*(){const d=c.getRequestCorrelationId(a);c.preflightBrowserEnvironmentCheck(R.s_.Silent),c.logger.trace("acquireTokenByCode called",d),c.eventHandler.emitEvent(Ie.t.ACQUIRE_TOKEN_BY_CODE_START,R.s_.Silent,a);const f=c.performanceClient.startMeasurement(A.Ak.AcquireTokenByCode,a.correlationId);try{if(a.code&&a.nativeAccountId)throw(0,pe.Z_)(ye.LL);if(a.code){const g=a.code;let _=c.hybridAuthCodeResponses.get(g);return _?(c.logger.verbose("Existing acquireTokenByCode request found",a.correlationId),f.discard()):(c.logger.verbose("Initiating new acquireTokenByCode request",d),_=c.acquireTokenByCodeAsync({...a,correlationId:d}).then(w=>(c.eventHandler.emitEvent(Ie.t.ACQUIRE_TOKEN_BY_CODE_SUCCESS,R.s_.Silent,w),c.hybridAuthCodeResponses.delete(g),f.add({accessTokenSize:w.accessToken.length,idTokenSize:w.idToken.length}),f.end({success:!0,isNativeBroker:w.fromNativeBroker,requestId:w.requestId}),w)).catch(w=>{throw c.hybridAuthCodeResponses.delete(g),c.eventHandler.emitEvent(Ie.t.ACQUIRE_TOKEN_BY_CODE_FAILURE,R.s_.Silent,null,w),f.end({errorCode:w.errorCode,subErrorCode:w.subError,success:!1}),w}),c.hybridAuthCodeResponses.set(g,_)),_}if(a.nativeAccountId){if(c.canUseNative(a,a.nativeAccountId))return c.acquireTokenNative(a,R.WN.acquireTokenByCode,a.nativeAccountId).catch(g=>{throw g instanceof Fn&&Ft(g)&&(c.nativeExtensionProvider=void 0),g});throw(0,pe.Z_)(ye.KA)}throw(0,pe.Z_)(ye.Dy)}catch(g){throw c.eventHandler.emitEvent(Ie.t.ACQUIRE_TOKEN_BY_CODE_FAILURE,R.s_.Silent,null,g),f.end({errorCode:g instanceof De.l4&&g.errorCode||void 0,subErrorCode:g instanceof De.l4&&g.subError||void 0,success:!1}),g}})()}acquireTokenByCodeAsync(a){var c=this;return(0,C.Z)(function*(){return c.logger.trace("acquireTokenByCodeAsync called",a.correlationId),c.acquireTokenByCodeAsyncMeasurement=c.performanceClient.startMeasurement(A.Ak.AcquireTokenByCodeAsync,a.correlationId),c.acquireTokenByCodeAsyncMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",c.trackPageVisibilityWithMeasurement),yield c.createSilentAuthCodeClient(a.correlationId).acquireToken(a).then(g=>(c.acquireTokenByCodeAsyncMeasurement?.end({success:!0,fromCache:g.fromCache,isNativeBroker:g.fromNativeBroker,requestId:g.requestId}),g)).catch(g=>{throw c.acquireTokenByCodeAsyncMeasurement?.end({errorCode:g.errorCode,subErrorCode:g.subError,success:!1}),g}).finally(()=>{document.removeEventListener("visibilitychange",c.trackPageVisibilityWithMeasurement)})})()}acquireTokenFromCache(a,c,d){var f=this;return(0,C.Z)(function*(){switch(f.performanceClient.addQueueMeasurement(A.Ak.AcquireTokenFromCache,c.correlationId),d.cacheLookupPolicy){case R.lu.Default:case R.lu.AccessToken:case R.lu.AccessTokenAndRefreshToken:return Y(a.acquireToken.bind(a),A.Ak.SilentCacheClientAcquireToken,f.logger,f.performanceClient,c.correlationId)(c);default:throw(0,F.zP)(se.s$)}})()}acquireTokenByRefreshToken(a,c){var d=this;return(0,C.Z)(function*(){switch(d.performanceClient.addQueueMeasurement(A.Ak.AcquireTokenByRefreshToken,a.correlationId),c.cacheLookupPolicy){case R.lu.Default:case R.lu.AccessTokenAndRefreshToken:case R.lu.RefreshToken:case R.lu.RefreshTokenAndNetwork:const f=d.createSilentRefreshClient(a.correlationId);return Y(f.acquireToken.bind(f),A.Ak.SilentRefreshClientAcquireToken,d.logger,d.performanceClient,a.correlationId)(a);default:throw(0,F.zP)(se.s$)}})()}acquireTokenBySilentIframe(a){var c=this;return(0,C.Z)(function*(){c.performanceClient.addQueueMeasurement(A.Ak.AcquireTokenBySilentIframe,a.correlationId);const d=c.createSilentIframeClient(a.correlationId);return Y(d.acquireToken.bind(d),A.Ak.SilentIframeClientAcquireToken,c.logger,c.performanceClient,a.correlationId)(a)})()}logout(a){var c=this;return(0,C.Z)(function*(){const d=c.getRequestCorrelationId(a);return c.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",d),c.logoutRedirect({correlationId:d,...a})})()}logoutRedirect(a){var c=this;return(0,C.Z)(function*(){const d=c.getRequestCorrelationId(a);return c.preflightBrowserEnvironmentCheck(R.s_.Redirect),c.createRedirectClient(d).logout(a)})()}logoutPopup(a){try{const c=this.getRequestCorrelationId(a);return this.preflightBrowserEnvironmentCheck(R.s_.Popup),this.createPopupClient(c).logout(a)}catch(c){return Promise.reject(c)}}clearCache(a){var c=this;return(0,C.Z)(function*(){const d=c.getRequestCorrelationId(a);return c.createSilentCacheClient(d).logout(a)})()}getAllAccounts(a){return this.logger.verbose("getAllAccounts called"),this.isBrowserEnvironment?this.browserStorage.getAllAccounts(a):[]}getAccount(a){if(this.logger.trace("getAccount called"),0===Object.keys(a).length)return this.logger.warning("getAccount: No accountFilter provided"),null;const c=this.browserStorage.getAccountInfoFilteredBy(a);return c?(this.logger.verbose("getAccount: Account matching provided filter found, returning"),c):(this.logger.verbose("getAccount: No matching account found, returning null"),null)}getAccountByUsername(a){if(this.logger.trace("getAccountByUsername called"),!a)return this.logger.warning("getAccountByUsername: No username provided"),null;const c=this.browserStorage.getAccountInfoFilteredBy({username:a});return c?(this.logger.verbose("getAccountByUsername: Account matching username found, returning"),this.logger.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${a}`),c):(this.logger.verbose("getAccountByUsername: No matching account found, returning null"),null)}getAccountByHomeId(a){if(this.logger.trace("getAccountByHomeId called"),!a)return this.logger.warning("getAccountByHomeId: No homeAccountId provided"),null;const c=this.browserStorage.getAccountInfoFilteredBy({homeAccountId:a});return c?(this.logger.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),this.logger.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${a}`),c):(this.logger.verbose("getAccountByHomeId: No matching account found, returning null"),null)}getAccountByLocalId(a){if(this.logger.trace("getAccountByLocalId called"),!a)return this.logger.warning("getAccountByLocalId: No localAccountId provided"),null;const c=this.browserStorage.getAccountInfoFilteredBy({localAccountId:a});return c?(this.logger.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),this.logger.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${a}`),c):(this.logger.verbose("getAccountByLocalId: No matching account found, returning null"),null)}setActiveAccount(a){this.browserStorage.setActiveAccount(a)}getActiveAccount(){return this.browserStorage.getActiveAccount()}hydrateCache(a,c){var d=this;return(0,C.Z)(function*(){d.logger.verbose("hydrateCache called");const f=ie.r.createFromAccountInfo(a.account,a.cloudGraphHostName,a.msGraphHost);return d.browserStorage.setAccount(f),a.fromNativeBroker?(d.logger.verbose("Response was from native broker, storing in-memory"),d.nativeInternalStorage.hydrateCache(a,c)):d.browserStorage.hydrateCache(a,c)})()}preflightBrowserEnvironmentCheck(a,c=!1){if(this.logger.verbose("preflightBrowserEnvironmentCheck started"),(0,st.$S)(this.isBrowserEnvironment),(0,st.$V)(a,this.config.system.allowRedirectInIframe),(0,st.ET)(),(0,st.L7)(),(0,st.eQ)(this.initialized),a===R.s_.Redirect&&this.config.cache.cacheLocation===R.Ix.MemoryStorage&&!this.config.cache.storeAuthStateInCookie)throw(0,Hr.Z1)(Ha.xC);(a===R.s_.Redirect||a===R.s_.Popup)&&this.preflightInteractiveRequest(!c)}preflightInteractiveRequest(a){this.logger.verbose("preflightInteractiveRequest called, validating app environment"),(0,st.ET)(),a&&this.getBrowserStorage().setInteractionInProgress(!0)}acquireTokenNative(a,c,d){var f=this;return(0,C.Z)(function*(){if(f.logger.trace("acquireTokenNative called"),!f.nativeExtensionProvider)throw(0,pe.Z_)(ye.V7);return new $r(f.config,f.browserStorage,f.browserCrypto,f.logger,f.eventHandler,f.navigationClient,c,f.performanceClient,f.nativeExtensionProvider,d||f.getNativeAccountId(a),f.nativeInternalStorage,a.correlationId).acquireToken(a)})()}canUseNative(a,c){if(this.logger.trace("canUseNative called"),!Dn.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,a.authenticationScheme))return this.logger.trace("canUseNative: isNativeAvailable returned false, returning false"),!1;if(a.prompt)switch(a.prompt){case y.NJ.NONE:case y.NJ.CONSENT:case y.NJ.LOGIN:this.logger.trace("canUseNative: prompt is compatible with native flow");break;default:return this.logger.trace(`canUseNative: prompt = ${a.prompt} is not compatible with native flow, returning false`),!1}return!(!c&&!this.getNativeAccountId(a)&&(this.logger.trace("canUseNative: nativeAccountId is not available, returning false"),1))}getNativeAccountId(a){const c=a.account||this.browserStorage.getAccountInfoFilteredBy({loginHint:a.loginHint,sid:a.sid})||this.getActiveAccount();return c&&c.nativeAccountId||""}createPopupClient(a){return new rc(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,a)}createRedirectClient(a){return new Bu(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,a)}createSilentIframeClient(a){return new Ke(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,R.WN.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,a)}createSilentCacheClient(a){return new on(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,a)}createSilentRefreshClient(a){return new Gu(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,a)}createSilentAuthCodeClient(a){return new ac(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,R.WN.acquireTokenByCode,this.performanceClient,this.nativeExtensionProvider,a)}addEventCallback(a){return this.eventHandler.addEventCallback(a)}removeEventCallback(a){this.eventHandler.removeEventCallback(a)}addPerformanceCallback(a){return this.performanceClient.addPerformanceCallback(a)}removePerformanceCallback(a){return this.performanceClient.removePerformanceCallback(a)}enableAccountStorageEvents(){this.eventHandler.enableAccountStorageEvents()}disableAccountStorageEvents(){this.eventHandler.disableAccountStorageEvents()}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(a){this.logger=a}initializeWrapperLibrary(a,c){this.browserStorage.setWrapperMetadata(a,c)}setNavigationClient(a){this.navigationClient=a}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}getBrowserStorage(){return this.browserStorage}isBrowserEnv(){return this.isBrowserEnvironment}getEventHandler(){return this.eventHandler}getRequestCorrelationId(a){return a?.correlationId?a.correlationId:this.isBrowserEnvironment?(0,Zn.nn)():y.gT.EMPTY_STRING}loginRedirect(a){var c=this;return(0,C.Z)(function*(){const d=c.getRequestCorrelationId(a);return c.logger.verbose("loginRedirect called",d),c.acquireTokenRedirect({correlationId:d,...a||R.yo})})()}loginPopup(a){const c=this.getRequestCorrelationId(a);return this.logger.verbose("loginPopup called",c),this.acquireTokenPopup({correlationId:c,...a||R.yo})}acquireTokenSilent(a){var c=this;return(0,C.Z)(function*(){const d=c.getRequestCorrelationId(a),f=c.performanceClient.startMeasurement(A.Ak.AcquireTokenSilent,d);f.add({cacheLookupPolicy:a.cacheLookupPolicy}),c.preflightBrowserEnvironmentCheck(R.s_.Silent),c.logger.verbose("acquireTokenSilent called",d);const g=a.account||c.getActiveAccount();if(!g)throw(0,pe.Z_)(ye.wH);const w=JSON.stringify({clientId:c.config.auth.clientId,authority:a.authority||y.gT.EMPTY_STRING,scopes:a.scopes,homeAccountIdentifier:g.homeAccountId,claims:a.claims,authenticationScheme:a.authenticationScheme,resourceRequestMethod:a.resourceRequestMethod,resourceRequestUri:a.resourceRequestUri,shrClaims:a.shrClaims,sshKid:a.sshKid}),N=c.activeSilentTokenRequests.get(w);if(typeof N>"u"){c.logger.verbose("acquireTokenSilent called for the first time, storing active request",d);const k=Y(c.acquireTokenSilentAsync.bind(c),A.Ak.AcquireTokenSilentAsync,c.logger,c.performanceClient,d)({...a,correlationId:d},g).then(K=>(c.activeSilentTokenRequests.delete(w),f.add({accessTokenSize:K.accessToken.length,idTokenSize:K.idToken.length}),f.end({success:!0,fromCache:K.fromCache,isNativeBroker:K.fromNativeBroker,cacheLookupPolicy:a.cacheLookupPolicy,requestId:K.requestId}),K)).catch(K=>{throw c.activeSilentTokenRequests.delete(w),f.end({errorCode:K.errorCode,subErrorCode:K.subError,success:!1}),K});return c.activeSilentTokenRequests.set(w,k),k}return c.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",d),f.discard(),N})()}acquireTokenSilentAsync(a,c){var d=this;return(0,C.Z)(function*(){let f;if(d.performanceClient.addQueueMeasurement(A.Ak.AcquireTokenSilentAsync,a.correlationId),d.eventHandler.emitEvent(Ie.t.ACQUIRE_TOKEN_START,R.s_.Silent,a),d.atsAsyncMeasurement=d.performanceClient.startMeasurement(A.Ak.AcquireTokenSilentAsync,a.correlationId),d.atsAsyncMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",d.trackPageVisibility),Dn.isNativeAvailable(d.config,d.logger,d.nativeExtensionProvider,a.authenticationScheme)&&c.nativeAccountId){d.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform");const g={...a,account:c};f=d.acquireTokenNative(g,R.WN.acquireTokenSilent_silentFlow).catch(function(){var _=(0,C.Z)(function*(w){if(w instanceof Fn&&Ft(w))return d.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),d.nativeExtensionProvider=void 0,d.createSilentIframeClient(a.correlationId).acquireToken(a);throw w});return function(w){return _.apply(this,arguments)}}())}else{d.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow");const g=d.createSilentCacheClient(a.correlationId),_=yield Y(g.initializeSilentRequest.bind(g),A.Ak.InitializeSilentRequest,d.logger,d.performanceClient,a.correlationId)(a,c),w={...a,cacheLookupPolicy:a.cacheLookupPolicy||R.lu.Default};f=Y(d.acquireTokenFromCache.bind(d),A.Ak.AcquireTokenFromCache,d.logger,d.performanceClient,_.correlationId)(g,_,w).catch(N=>{if(w.cacheLookupPolicy===R.lu.AccessToken)throw N;return(0,st.ET)(),d.eventHandler.emitEvent(Ie.t.ACQUIRE_TOKEN_NETWORK_START,R.s_.Silent,_),Y(d.acquireTokenByRefreshToken.bind(d),A.Ak.AcquireTokenByRefreshToken,d.logger,d.performanceClient,_.correlationId)(_,w).catch(k=>{if((!(k instanceof Ce.n)||k.errorCode!==R.qx.INVALID_GRANT_ERROR||k instanceof X.Yo||w.cacheLookupPolicy===R.lu.AccessTokenAndRefreshToken||w.cacheLookupPolicy===R.lu.RefreshToken)&&w.cacheLookupPolicy!==R.lu.Skip)throw k;return d.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",a.correlationId),Y(d.acquireTokenBySilentIframe.bind(d),A.Ak.AcquireTokenBySilentIframe,d.logger,d.performanceClient,_.correlationId)(_)})})}return f.then(g=>(d.eventHandler.emitEvent(Ie.t.ACQUIRE_TOKEN_SUCCESS,R.s_.Silent,g),d.atsAsyncMeasurement?.end({success:!0,fromCache:g.fromCache,isNativeBroker:g.fromNativeBroker,requestId:g.requestId}),g)).catch(g=>{throw d.eventHandler.emitEvent(Ie.t.ACQUIRE_TOKEN_FAILURE,R.s_.Silent,null,g),d.atsAsyncMeasurement?.end({errorCode:g.errorCode,subErrorCode:g.subError,success:!1}),g}).finally(()=>{document.removeEventListener("visibilitychange",d.trackPageVisibility)})})()}}},690:(Se,ne,S)=>{S.d(ne,{$5:()=>Ue,Au:()=>J,Fv:()=>te,Mg:()=>re,PP:()=>b,Xx:()=>se,nn:()=>z,qz:()=>B});var C=S(861),m=S(293),M=S(979),O=S(593),L=S(377);const F="SHA-256",I=new Uint8Array([1,0,1]),P={name:"RSASSA-PKCS1-v1_5",hash:F,modulusLength:2048,publicExponent:I};function B(ce){if(!("crypto"in window))throw ce.error("BrowserCrypto: crypto interface is unavailable"),(0,m.Z_)(L.TR);ce.verbose("BrowserCrypto: modern crypto interface available")}function te(ce,W,j){return T.apply(this,arguments)}function T(){return(T=(0,C.Z)(function*(ce,W,j){W?.addQueueMeasurement(M.Ak.Sha256Digest,j);const ie=(new TextEncoder).encode(ce);return window.crypto.subtle.digest(F,ie)})).apply(this,arguments)}function b(ce){return window.crypto.getRandomValues(ce)}function z(){return window.crypto.randomUUID()}function J(ce,W){return A.apply(this,arguments)}function A(){return(A=(0,C.Z)(function*(ce,W){return window.crypto.subtle.generateKey(P,ce,W)})).apply(this,arguments)}function re(ce){return Y.apply(this,arguments)}function Y(){return(Y=(0,C.Z)(function*(ce){return window.crypto.subtle.exportKey(O.Mm,ce)})).apply(this,arguments)}function Ue(ce,W,j){return De.apply(this,arguments)}function De(){return(De=(0,C.Z)(function*(ce,W,j){return window.crypto.subtle.importKey(O.Mm,ce,P,W,j)})).apply(this,arguments)}function se(ce,W){return we.apply(this,arguments)}function we(){return(we=(0,C.Z)(function*(ce,W){return window.crypto.subtle.sign(P,ce,W)})).apply(this,arguments)}},341:(Se,ne,S)=>{S.d(ne,{Q:()=>se});var C=S(861),m=S(979),M=S(481);const O="missing_kid_error",L="missing_alg_error",H={[O]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[L]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class F extends M.l4{constructor(W,j){super(W,j),this.name="JoseHeaderError",Object.setPrototypeOf(this,F.prototype)}}function y(ce){return new F(ce,H[ce])}var I=S(500);class P{constructor(W){this.typ=W.typ,this.alg=W.alg,this.kid=W.kid}static getShrHeaderString(W){if(!W.kid)throw y(O);if(!W.alg)throw y(L);const j=new P({typ:W.typ||I.L.Pop,kid:W.kid,alg:W.alg});return JSON.stringify(j)}}var B=S(173),te=S(787),T=S(690),b=S(293),z=S(593),J=S(377);class A{constructor(){this.dbName=z.H4,this.version=z.kd,this.tableName=z.Gv,this.dbOpen=!1}open(){var W=this;return(0,C.Z)(function*(){return new Promise((j,X)=>{const ie=window.indexedDB.open(W.dbName,W.version);ie.addEventListener("upgradeneeded",Ce=>{Ce.target.result.createObjectStore(W.tableName)}),ie.addEventListener("success",Ce=>{W.db=Ce.target.result,W.dbOpen=!0,j()}),ie.addEventListener("error",()=>X((0,b.Z_)(J.Pi)))})})()}closeConnection(){const W=this.db;W&&this.dbOpen&&(W.close(),this.dbOpen=!1)}validateDbIsOpen(){var W=this;return(0,C.Z)(function*(){if(!W.dbOpen)return yield W.open()})()}getItem(W){var j=this;return(0,C.Z)(function*(){return yield j.validateDbIsOpen(),new Promise((X,ie)=>{if(!j.db)return ie((0,b.Z_)(J.IL));const xe=j.db.transaction([j.tableName],"readonly").objectStore(j.tableName).get(W);xe.addEventListener("success",ke=>{const Ee=ke;j.closeConnection(),X(Ee.target.result)}),xe.addEventListener("error",ke=>{j.closeConnection(),ie(ke)})})})()}setItem(W,j){var X=this;return(0,C.Z)(function*(){return yield X.validateDbIsOpen(),new Promise((ie,Ce)=>{if(!X.db)return Ce((0,b.Z_)(J.IL));const ke=X.db.transaction([X.tableName],"readwrite").objectStore(X.tableName).put(j,W);ke.addEventListener("success",()=>{X.closeConnection(),ie()}),ke.addEventListener("error",Ee=>{X.closeConnection(),Ce(Ee)})})})()}removeItem(W){var j=this;return(0,C.Z)(function*(){return yield j.validateDbIsOpen(),new Promise((X,ie)=>{if(!j.db)return ie((0,b.Z_)(J.IL));const xe=j.db.transaction([j.tableName],"readwrite").objectStore(j.tableName).delete(W);xe.addEventListener("success",()=>{j.closeConnection(),X()}),xe.addEventListener("error",ke=>{j.closeConnection(),ie(ke)})})})()}getKeys(){var W=this;return(0,C.Z)(function*(){return yield W.validateDbIsOpen(),new Promise((j,X)=>{if(!W.db)return X((0,b.Z_)(J.IL));const ve=W.db.transaction([W.tableName],"readonly").objectStore(W.tableName).getAllKeys();ve.addEventListener("success",xe=>{const ke=xe;W.closeConnection(),j(ke.target.result)}),ve.addEventListener("error",xe=>{W.closeConnection(),X(xe)})})})()}containsKey(W){var j=this;return(0,C.Z)(function*(){return yield j.validateDbIsOpen(),new Promise((X,ie)=>{if(!j.db)return ie((0,b.Z_)(J.IL));const xe=j.db.transaction([j.tableName],"readonly").objectStore(j.tableName).count(W);xe.addEventListener("success",ke=>{const Ee=ke;j.closeConnection(),X(1===Ee.target.result)}),xe.addEventListener("error",ke=>{j.closeConnection(),ie(ke)})})})()}deleteDatabase(){var W=this;return(0,C.Z)(function*(){return W.db&&W.dbOpen&&W.closeConnection(),new Promise((j,X)=>{const ie=window.indexedDB.deleteDatabase(z.H4);ie.addEventListener("success",()=>j(!0)),ie.addEventListener("blocked",()=>j(!0)),ie.addEventListener("error",()=>X(!1))})})()}}var re=S(475);class Y{constructor(W,j){this.inMemoryCache=new re.k,this.indexedDBCache=new A,this.logger=W,this.storeName=j}handleDatabaseAccessError(W){if(!(W instanceof b.Ut&&W.errorCode===J.Pi))throw W;this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.")}getItem(W){var j=this;return(0,C.Z)(function*(){const X=j.inMemoryCache.getItem(W);if(!X)try{return j.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),yield j.indexedDBCache.getItem(W)}catch(ie){j.handleDatabaseAccessError(ie)}return X})()}setItem(W,j){var X=this;return(0,C.Z)(function*(){X.inMemoryCache.setItem(W,j);try{yield X.indexedDBCache.setItem(W,j)}catch(ie){X.handleDatabaseAccessError(ie)}})()}removeItem(W){var j=this;return(0,C.Z)(function*(){j.inMemoryCache.removeItem(W);try{yield j.indexedDBCache.removeItem(W)}catch(X){j.handleDatabaseAccessError(X)}})()}getKeys(){var W=this;return(0,C.Z)(function*(){const j=W.inMemoryCache.getKeys();if(0===j.length)try{return W.logger.verbose("In-memory cache is empty, now querying persistent storage."),yield W.indexedDBCache.getKeys()}catch(X){W.handleDatabaseAccessError(X)}return j})()}containsKey(W){var j=this;return(0,C.Z)(function*(){const X=j.inMemoryCache.containsKey(W);if(!X)try{return j.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),yield j.indexedDBCache.containsKey(W)}catch(ie){j.handleDatabaseAccessError(ie)}return X})()}clearInMemory(){this.logger.verbose(`Deleting in-memory keystore ${this.storeName}`),this.inMemoryCache.clear(),this.logger.verbose(`In-memory keystore ${this.storeName} deleted`)}clearPersistent(){var W=this;return(0,C.Z)(function*(){try{W.logger.verbose("Deleting persistent keystore");const j=yield W.indexedDBCache.deleteDatabase();return j&&W.logger.verbose("Persistent keystore deleted"),j}catch(j){return W.handleDatabaseAccessError(j),!1}})()}}class De{constructor(W){this.logger=W,this.asymmetricKeys=new Y(this.logger,"asymmetricKeys"),this.symmetricKeys=new Y(this.logger,"symmetricKeys")}clear(){var W=this;return(0,C.Z)(function*(){W.asymmetricKeys.clearInMemory(),W.symmetricKeys.clearInMemory();try{return yield W.asymmetricKeys.clearPersistent(),!0}catch(j){return j instanceof Error?W.logger.error(`Clearing keystore failed with error: ${j.message}`):W.logger.error("Clearing keystore failed with unknown error"),!1}})()}}let se=(()=>{class ce{constructor(j,X){this.logger=j,(0,T.qz)(j),this.cache=new De(this.logger),this.performanceClient=X}createNewGuid(){return(0,T.nn)()}base64Encode(j){return(0,B.h$)(j)}base64Decode(j){return(0,te.t)(j)}getPublicKeyThumbprint(j){var X=this;return(0,C.Z)(function*(){const ie=X.performanceClient?.startMeasurement(m.Ak.CryptoOptsGetPublicKeyThumbprint,j.correlationId),Ce=yield(0,T.Au)(ce.EXTRACTABLE,ce.POP_KEY_USAGES),ve=yield(0,T.Mg)(Ce.publicKey),ke=we({e:ve.e,kty:ve.kty,n:ve.n}),Ee=yield X.hashString(ke),Ye=yield(0,T.Mg)(Ce.privateKey),ut=yield(0,T.$5)(Ye,!1,["sign"]);return yield X.cache.asymmetricKeys.setItem(Ee,{privateKey:ut,publicKey:Ce.publicKey,requestMethod:j.resourceRequestMethod,requestUri:j.resourceRequestUri}),ie&&ie.end({success:!0}),Ee})()}removeTokenBindingKey(j){var X=this;return(0,C.Z)(function*(){return yield X.cache.asymmetricKeys.removeItem(j),!(yield X.cache.asymmetricKeys.containsKey(j))})()}clearKeystore(){var j=this;return(0,C.Z)(function*(){return yield j.cache.clear()})()}signJwt(j,X,ie){var Ce=this;return(0,C.Z)(function*(){const ve=Ce.performanceClient?.startMeasurement(m.Ak.CryptoOptsSignJwt,ie),xe=yield Ce.cache.asymmetricKeys.getItem(X);if(!xe)throw(0,b.Z_)(J.XM);const ke=yield(0,T.Mg)(xe.publicKey),Ee=we(ke),Ye=(0,B._j)(JSON.stringify({kid:X})),ut=P.getShrHeaderString({kid:Ye,alg:ke.alg}),bt=(0,B._j)(ut);j.cnf={jwk:JSON.parse(Ee)};const at=`${bt}.${(0,B._j)(JSON.stringify(j))}`,wt=(new TextEncoder).encode(at),He=yield(0,T.Xx)(xe.privateKey,wt),pe=`${at}.${(0,B.Wy)(new Uint8Array(He))}`;return ve&&ve.end({success:!0}),pe})()}hashString(j){return(0,C.Z)(function*(){const X=yield(0,T.Fv)(j),ie=new Uint8Array(X);return(0,B.Wy)(ie)})()}}return ce.POP_KEY_USAGES=["sign","verify"],ce.EXTRACTABLE=!0,ce})();function we(ce){return JSON.stringify(ce,Object.keys(ce).sort())}},787:(Se,ne,S)=>{S.d(ne,{t:()=>M});var C=S(293),m=S(377);function M(L){return(new TextDecoder).decode(function O(L){let H=L.replace(/-/g,"+").replace(/_/g,"/");switch(H.length%4){case 0:break;case 2:H+="==";break;case 3:H+="=";break;default:throw(0,C.Z_)(m.lZ)}const F=atob(H);return Uint8Array.from(F,y=>y.codePointAt(0)||0)}(L))}},173:(Se,ne,S)=>{function C(L){return encodeURIComponent(M(L).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function m(L){return O(L).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function M(L){return O((new TextEncoder).encode(L))}function O(L){const H=Array.from(L,F=>String.fromCodePoint(F)).join("");return btoa(H)}S.d(ne,{Wy:()=>m,_j:()=>C,h$:()=>M})},293:(Se,ne,S)=>{S.d(ne,{Ut:()=>H,Z_:()=>F});var C=S(481),m=S(377);const M="For more visit: aka.ms/msaljs/browser-errors",O={[m.vD]:"The PKCE code challenge and verifier could not be generated.",[m.TR]:"The crypto object or function is not available.",[m._c]:"Navigation URI is empty. Please check stack trace for more info.",[m.nF]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${M}`,[m.Xk]:"Hash does not contain state. Please verify that the request originated from msal.",[m.S_]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${M}`,[m.$P]:"Unable to parse state. Please verify that the request originated from msal.",[m.yK]:"Hash contains state but the interaction type does not match the caller.",[m.Ck]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${M}`,[m.E]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[m.H]:"window.open returned null or undefined window object.",[m.h7]:"User cancelled the flow.",[m.ZT]:`Token acquisition in popup failed due to timeout.  ${M}`,[m.JA]:`Token acquisition in iframe failed due to timeout.  ${M}`,[m.b_]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[m.xO]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${M}`,[m.bj]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[m.h8]:"The iframe being monitored was closed prematurely.",[m.I9]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[m.wH]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[m.WQ]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[m.QO]:"No token request found in cache.",[m.e$]:"The cached token request could not be parsed.",[m.dT]:"No cached authority found.",[m.BO]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[m.Ut]:"Invalid cache type",[m.Dx]:"Login and token requests are not supported in non-browser environments.",[m.IL]:"Database is not open!",[m.Mq]:"No network connectivity. Check your internet connection.",[m.Dc]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[m.C8]:"Network request failed. Please check the network trace to determine root cause.",[m.w6]:"Failed to parse network response. Check network trace.",[m.Jd]:"Error loading token to cache.",[m.XM]:"Cryptographic Key or Keypair not found in browser storage.",[m.Aj]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[m.Dy]:"An authorization code or nativeAccountId must be provided to this flow.",[m.LL]:"Request cannot contain both spa code and native account id.",[m.Pi]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[m.KA]:`Unable to acquire token from native platform.  ${M}`,[m.hR]:"Timed out while attempting to establish connection to browser extension",[m.Wb]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[m.V7]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${M}`,[m.al]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${M}`,[m.o9]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[m.lZ]:"Invalid base64 encoded string."};class H extends C.l4{constructor(I){super(I,O[I]),Object.setPrototypeOf(this,H.prototype),this.name="BrowserAuthError"}}function F(y){return new H(y)}},377:(Se,ne,S)=>{S.d(ne,{$P:()=>F,Aj:()=>ut,BO:()=>W,C8:()=>xe,Ck:()=>I,Dc:()=>ve,Dx:()=>X,Dy:()=>bt,E:()=>P,H:()=>B,I9:()=>Y,IL:()=>ie,JA:()=>b,Jd:()=>Ee,KA:()=>tn,LL:()=>gn,Mq:()=>Ce,Pi:()=>at,QO:()=>se,S_:()=>H,TR:()=>m,Ut:()=>j,V7:()=>Ge,WQ:()=>De,Wb:()=>He,XM:()=>Ye,Xk:()=>L,ZT:()=>T,_c:()=>M,al:()=>pe,b_:()=>z,bj:()=>A,dT:()=>ce,e$:()=>we,h7:()=>te,h8:()=>re,hR:()=>wt,lZ:()=>Hr,nF:()=>O,o9:()=>R,vD:()=>C,w6:()=>ke,wH:()=>Ue,xO:()=>J,yK:()=>y});const C="pkce_not_created",m="crypto_nonexistent",M="empty_navigate_uri",O="hash_empty_error",L="no_state_in_hash",H="hash_does_not_contain_known_properties",F="unable_to_parse_state",y="state_interaction_type_mismatch",I="interaction_in_progress",P="popup_window_error",B="empty_window_error",te="user_cancelled",T="monitor_popup_timeout",b="monitor_window_timeout",z="redirect_in_iframe",J="block_iframe_reload",A="block_nested_popups",re="iframe_closed_prematurely",Y="silent_logout_unsupported",Ue="no_account_error",De="silent_prompt_value_error",se="no_token_request_cache_error",we="unable_to_parse_token_request_cache_error",ce="no_cached_authority_error",W="auth_request_not_set_error",j="invalid_cache_type",X="non_browser_environment",ie="database_not_open",Ce="no_network_connectivity",ve="post_request_failed",xe="get_request_failed",ke="failed_to_parse_response",Ee="unable_to_load_token",Ye="crypto_key_not_found",ut="auth_code_required",bt="auth_code_or_nativeAccountId_required",gn="spa_code_and_nativeAccountId_present",at="database_unavailable",tn="unable_to_acquire_token_from_native_platform",wt="native_handshake_timeout",He="native_extension_not_installed",Ge="native_connection_not_established",pe="uninitialized_public_client_application",R="native_prompt_not_supported",Hr="invalid_base64_string"},325:(Se,ne,S)=>{S.d(ne,{WK:()=>L,Z1:()=>H});var C=S(481),m=S(94);const M={[m.m4]:"Given storage configuration option was not supported.",[m.hJ]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[m.xC]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};class L extends C.l4{constructor(y,I){super(y,I),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,L.prototype)}}function H(F){return new L(F,M[F])}},94:(Se,ne,S)=>{S.d(ne,{hJ:()=>m,m4:()=>C,xC:()=>M});const C="storage_not_supported",m="stubbed_public_client_application_called",M="in_mem_redirect_unavailable"},76:(Se,ne,S)=>{S.d(ne,{b:()=>L});var C=S(603),m=S(723),M=S(97),O=S(690);class L{constructor(F,y){this.eventCallbacks=new Map,this.logger=F,this.browserCrypto=y,this.listeningToStorageEvents=!1,this.handleAccountCacheChange=this.handleAccountCacheChange.bind(this)}addEventCallback(F){if(typeof window<"u"){const y=(0,O.nn)();return this.eventCallbacks.set(y,F),this.logger.verbose(`Event callback registered with id: ${y}`),y}return null}removeEventCallback(F){this.eventCallbacks.delete(F),this.logger.verbose(`Event callback ${F} removed.`)}enableAccountStorageEvents(){typeof window>"u"||(this.listeningToStorageEvents?this.logger.verbose("Account storage listener already registered."):(this.logger.verbose("Adding account storage listener."),this.listeningToStorageEvents=!0,window.addEventListener("storage",this.handleAccountCacheChange)))}disableAccountStorageEvents(){typeof window>"u"||(this.listeningToStorageEvents?(this.logger.verbose("Removing account storage listener."),window.removeEventListener("storage",this.handleAccountCacheChange),this.listeningToStorageEvents=!1):this.logger.verbose("No account storage listener registered."))}emitEvent(F,y,I,P){if(typeof window<"u"){const B={eventType:F,interactionType:y||null,payload:I||null,error:P||null,timestamp:Date.now()};this.logger.info(`Emitting event: ${F}`),this.eventCallbacks.forEach((te,T)=>{this.logger.verbose(`Emitting event to callback ${T}: ${F}`),te.apply(null,[B])})}}handleAccountCacheChange(F){try{const y=F.newValue||F.oldValue;if(!y)return;const I=JSON.parse(y);if("object"!=typeof I||!C.r.isAccountEntity(I))return;const B=m.L.toObject(new C.r,I).getAccountInfo();!F.oldValue&&F.newValue?(this.logger.info("Account was added to cache in a different window"),this.emitEvent(M.t.ACCOUNT_ADDED,void 0,B)):!F.newValue&&F.oldValue&&(this.logger.info("Account was removed from cache in a different window"),this.emitEvent(M.t.ACCOUNT_REMOVED,void 0,B))}catch{return}}}},97:(Se,ne,S)=>{S.d(ne,{t:()=>C});const C={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACCOUNT_ADDED:"msal:accountAdded",ACCOUNT_REMOVED:"msal:accountRemoved",LOGIN_START:"msal:loginStart",LOGIN_SUCCESS:"msal:loginSuccess",LOGIN_FAILURE:"msal:loginFailure",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",SSO_SILENT_START:"msal:ssoSilentStart",SSO_SILENT_SUCCESS:"msal:ssoSilentSuccess",SSO_SILENT_FAILURE:"msal:ssoSilentFailure",ACQUIRE_TOKEN_BY_CODE_START:"msal:acquireTokenByCodeStart",ACQUIRE_TOKEN_BY_CODE_SUCCESS:"msal:acquireTokenByCodeSuccess",ACQUIRE_TOKEN_BY_CODE_FAILURE:"msal:acquireTokenByCodeFailure",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache"}},580:(Se,ne,S)=>{S.d(ne,{i:()=>m,u:()=>C});const C="@azure/msal-browser",m="3.3.0"},593:(Se,ne,S)=>{S.d(ne,{$H:()=>te,BD:()=>M,Bs:()=>I,EC:()=>H,Gv:()=>re,H4:()=>J,Ix:()=>L,Ky:()=>O,Mm:()=>b,Oq:()=>y,WN:()=>P,c4:()=>F,kd:()=>A,lA:()=>z,lu:()=>Y,qx:()=>m,s_:()=>B,yo:()=>T});var C=S(500);const m={INTERACTION_IN_PROGRESS_VALUE:"interaction_in_progress",INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},M={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS"},O={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},L={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},H={GET:"GET",POST:"POST"},F={AUTHORITY:"authority",ACQUIRE_TOKEN_ACCOUNT:"acquireToken.account",SESSION_STATE:"session.state",REQUEST_STATE:"request.state",NONCE_IDTOKEN:"nonce.id_token",ORIGIN_URI:"request.origin",RENEW_STATUS:"token.renew.status",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",SCOPES:"scopes",INTERACTION_STATUS_KEY:"interaction.status",CCS_CREDENTIAL:"ccs.credential",CORRELATION_ID:"request.correlationId",NATIVE_REQUEST:"request.native",REDIRECT_CONTEXT:"request.redirect.context"},y={ACCOUNT_KEYS:"msal.account.keys",TOKEN_KEYS:"msal.token.keys"},I={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},P={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962};var B=function(Ue){return Ue.Redirect="redirect",Ue.Popup="popup",Ue.Silent="silent",Ue.None="none",Ue}(B||{});const te={Startup:"startup",Login:"login",Logout:"logout",AcquireToken:"acquireToken",SsoSilent:"ssoSilent",HandleRedirect:"handleRedirect",None:"none"},T={scopes:C.f_},b="jwk",z={React:"@azure/msal-react",Angular:"@azure/msal-angular"},J="msal.db",A=1,re=`${J}.keys`,Y={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5}},484:(Se,ne,S)=>{S.d(ne,{$P:()=>J,$S:()=>b,$V:()=>te,ET:()=>B,L7:()=>T,Re:()=>I,eQ:()=>z,fl:()=>P,hH:()=>L,tT:()=>H,zd:()=>F});var C=S(581),m=S(293),M=S(593),O=S(377);function L(A){A.location.hash="","function"==typeof A.history.replaceState&&A.history.replaceState(null,"",`${A.location.origin}${A.location.pathname}${A.location.search}`)}function H(A){const re=A.split("#");re.shift(),window.location.hash=re.length>0?re.join("#"):""}function F(){return window.parent!==window}function I(){return window.location.href.split("?")[0].split("#")[0]}function P(){const re=new C.G(window.location.href).getUrlComponents();return`${re.Protocol}//${re.HostNameAndPort}/`}function B(){if(C.G.hashContainsKnownProperties(window.location.hash)&&F())throw(0,m.Z_)(O.xO)}function te(A,re){const Y=F();if(A===M.s_.Redirect&&Y&&!re)throw(0,m.Z_)(O.b_)}function T(){if(function y(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&"string"==typeof window.name&&0===window.name.indexOf(`${M.qx.POPUP_NAME_PREFIX}.`)}())throw(0,m.Z_)(O.bj)}function b(A){if(!A)throw(0,m.Z_)(O.Dx)}function z(A){if(!A)throw(0,m.Z_)(O.al)}function J(A){const re=document.createElement("link");re.rel="preconnect",re.href=new URL(A).origin,re.crossOrigin="anonymous",document.head.appendChild(re),window.setTimeout(()=>{try{document.head.removeChild(re)}catch{}},1e4)}},82:(Se,ne,S)=>{S.d(ne,{Z_:()=>M,ky:()=>L});var C=S(140),m=S(841);function M(H,F){const y=function O(H){if(!H)throw(0,C.zP)(m.PM);const y=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(H);if(!y||y.length<4)throw(0,C.zP)(m.GH);return y[2]}(H);try{const I=F(y);return JSON.parse(I)}catch{throw(0,C.zP)(m.GH)}}function L(H,F){if(0===F||Date.now()-3e5>H+F)throw(0,C.zP)(m.Ao)}},758:(Se,ne,S)=>{S.d(ne,{B:()=>O,j:()=>L});var C=S(140),m=S(500),M=S(841);function O(H,F){if(!H)throw(0,C.zP)(M.S7);try{const y=F.base64Decode(H);return JSON.parse(y)}catch{throw(0,C.zP)(M.ZE)}}function L(H){if(!H)throw(0,C.zP)(M.ZE);const F=H.split(m.Bv.CLIENT_INFO_SEPARATOR,2);return{uid:F[0],utid:F.length<2?m.gT.EMPTY_STRING:F[1]}}},322:(Se,ne,S)=>{S.d(ne,{Qh:()=>M,UD:()=>H,eM:()=>y,ix:()=>I,tJ:()=>F,wn:()=>L});var C=S(581);const M={"https://login.microsoftonline.com/common/":{token_endpoint:"https://login.microsoftonline.com/common/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.com/common/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.com/common/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.com/common/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.com/common/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.com/common/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.com",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pas.windows.net"},"https://login.chinacloudapi.cn/common/":{token_endpoint:"https://login.chinacloudapi.cn/common/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.chinacloudapi.cn/common/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://microsoftgraph.chinacloudapi.cn/oidc/userinfo",authorization_endpoint:"https://login.chinacloudapi.cn/common/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.chinacloudapi.cn/common/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.chinacloudapi.cn/common/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.chinacloudapi.cn/common/kerberos",tenant_region_scope:null,cloud_instance_name:"partner.microsoftonline.cn",cloud_graph_host_name:"graph.chinacloudapi.cn",msgraph_host:"microsoftgraph.chinacloudapi.cn",rbac_url:"https://pas.chinacloudapi.cn"},"https://login.microsoftonline.us/common/":{token_endpoint:"https://login.microsoftonline.us/common/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.us/common/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.us/common/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.us/common/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.us/common/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.us/common/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.us",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pasff.usgovcloudapi.net"},"https://login.microsoftonline.com/consumers/":{token_endpoint:"https://login.microsoftonline.com/consumers/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.com/consumers/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.com/9188040d-6c67-4c5b-b112-36a304b66dad/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.com/consumers/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.com/consumers/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.com/consumers/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.com/consumers/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.com",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pas.windows.net"},"https://login.chinacloudapi.cn/consumers/":{token_endpoint:"https://login.chinacloudapi.cn/consumers/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.chinacloudapi.cn/consumers/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.partner.microsoftonline.cn/9188040d-6c67-4c5b-b112-36a304b66dad/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://microsoftgraph.chinacloudapi.cn/oidc/userinfo",authorization_endpoint:"https://login.chinacloudapi.cn/consumers/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.chinacloudapi.cn/consumers/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.chinacloudapi.cn/consumers/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.chinacloudapi.cn/consumers/kerberos",tenant_region_scope:null,cloud_instance_name:"partner.microsoftonline.cn",cloud_graph_host_name:"graph.chinacloudapi.cn",msgraph_host:"microsoftgraph.chinacloudapi.cn",rbac_url:"https://pas.chinacloudapi.cn"},"https://login.microsoftonline.us/consumers/":{token_endpoint:"https://login.microsoftonline.us/consumers/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.us/consumers/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.us/9188040d-6c67-4c5b-b112-36a304b66dad/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.us/consumers/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.us/consumers/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.us/consumers/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.us/consumers/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.us",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pasff.usgovcloudapi.net"},"https://login.microsoftonline.com/organizations/":{token_endpoint:"https://login.microsoftonline.com/organizations/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.com/organizations/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.com/organizations/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.com/organizations/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.com/organizations/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.com/organizations/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.com",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pas.windows.net"},"https://login.chinacloudapi.cn/organizations/":{token_endpoint:"https://login.chinacloudapi.cn/organizations/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.chinacloudapi.cn/organizations/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://microsoftgraph.chinacloudapi.cn/oidc/userinfo",authorization_endpoint:"https://login.chinacloudapi.cn/organizations/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.chinacloudapi.cn/organizations/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.chinacloudapi.cn/organizations/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.chinacloudapi.cn/organizations/kerberos",tenant_region_scope:null,cloud_instance_name:"partner.microsoftonline.cn",cloud_graph_host_name:"graph.chinacloudapi.cn",msgraph_host:"microsoftgraph.chinacloudapi.cn",rbac_url:"https://pas.chinacloudapi.cn"},"https://login.microsoftonline.us/organizations/":{token_endpoint:"https://login.microsoftonline.us/organizations/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.us/organizations/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.us/organizations/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.us/organizations/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.us/organizations/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.us/organizations/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.us",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pasff.usgovcloudapi.net"}},O={"https://login.microsoftonline.com/common/":{tenant_discovery_endpoint:"https://login.microsoftonline.com/common/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.chinacloudapi.cn/common/":{tenant_discovery_endpoint:"https://login.chinacloudapi.cn/common/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.microsoftonline.us/common/":{tenant_discovery_endpoint:"https://login.microsoftonline.us/common/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.microsoftonline.com/consumers/":{tenant_discovery_endpoint:"https://login.microsoftonline.com/consumers/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.chinacloudapi.cn/consumers/":{tenant_discovery_endpoint:"https://login.chinacloudapi.cn/consumers/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.microsoftonline.us/consumers/":{tenant_discovery_endpoint:"https://login.microsoftonline.us/consumers/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.microsoftonline.com/organizations/":{tenant_discovery_endpoint:"https://login.microsoftonline.com/organizations/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.chinacloudapi.cn/organizations/":{tenant_discovery_endpoint:"https://login.chinacloudapi.cn/organizations/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.microsoftonline.us/organizations/":{tenant_discovery_endpoint:"https://login.microsoftonline.us/organizations/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},L=new Set;for(const P in O)for(const B of O[P].metadata)for(const te of B.aliases)L.add(te);function H(P){if(P){const B=I(P);if(B)return B.aliases}return null}function F(P,B){if(P&&B){const T=y(B,new C.G(P).getUrlComponents().HostNameAndPort);if(T)return T.aliases}return null}function y(P,B){for(let te=0;te<P.length;te++){const T=P[te];if(T.aliases.includes(B))return T}return null}function I(P){const B=new C.G(P).getUrlComponents();return P in O?y(O[P].metadata,B.HostNameAndPort):null}},286:(Se,ne,S)=>{S.d(ne,{z:()=>C});const C={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"}},63:(Se,ne,S)=>{S.d(ne,{a:()=>C});const C={Default:0,Adfs:1,Dsts:2,Ciam:3}},132:(Se,ne,S)=>{S.d(ne,{A:()=>C});const C={AAD:"AAD",OIDC:"OIDC"}},723:(Se,ne,S)=>{S.d(ne,{L:()=>P,w:()=>B});var C=S(861),m=S(500),M=S(795),O=S(603),L=S(140),H=S(82),F=S(667),y=S(322),I=S(841);class P{constructor(T,b,z,J){this.clientId=T,this.cryptoImpl=b,this.commonLogger=z.clone(F.u,F.i),this.staticAuthorityOptions=J}getAllAccounts(T){const b=[];return this.getAccountsFilteredBy(T||{}).forEach(z=>{const J=this.getAccountInfoFromEntity(z,T);J&&b.push(J)}),b}getAccountInfoFilteredBy(T){const b=this.getAllAccounts(T);return b.length>0?b[0]:null}getBaseAccountInfo(T){const b=this.getAccountsFilteredBy(T);return b.length>0?b[0].getAccountInfo():null}getAccountInfoFromEntity(T,b){const z=T.getAccountInfo(),J=this.getIdToken(z);if(J){const A=(0,H.Z_)(J.secret,this.cryptoImpl.base64Decode);if(this.idTokenClaimsMatchAccountFilter(A,b))return z.idToken=J.secret,z.idTokenClaims=A,z}return null}idTokenClaimsMatchAccountFilter(T,b){return!(b&&(b.loginHint&&!this.matchLoginHint(T,b.loginHint)||b.sid&&!this.matchSid(T,b.sid)))}saveCacheRecord(T,b){var z=this;return(0,C.Z)(function*(){if(!T)throw(0,L.zP)(I.mj);T.account&&z.setAccount(T.account),T.idToken&&!1!==b?.idToken&&z.setIdTokenCredential(T.idToken),T.accessToken&&!1!==b?.accessToken&&(yield z.saveAccessToken(T.accessToken)),T.refreshToken&&!1!==b?.refreshToken&&z.setRefreshTokenCredential(T.refreshToken),T.appMetadata&&z.setAppMetadata(T.appMetadata)})()}saveAccessToken(T){var b=this;return(0,C.Z)(function*(){const z={clientId:T.clientId,credentialType:T.credentialType,environment:T.environment,homeAccountId:T.homeAccountId,realm:T.realm,tokenType:T.tokenType,requestedClaimsHash:T.requestedClaimsHash},J=b.getTokenKeys(),A=M.i.fromString(T.target),re=[];J.accessToken.forEach(Y=>{if(!b.accessTokenKeyMatchesFilter(Y,z,!1))return;const Ue=b.getAccessTokenCredential(Y);Ue&&b.credentialMatchesFilter(Ue,z)&&M.i.fromString(Ue.target).intersectingScopeSets(A)&&re.push(b.removeAccessToken(Y))}),yield Promise.all(re),b.setAccessTokenCredential(T)})()}getAccountsFilteredBy(T){const b=this.getAccountKeys(),z=[];return b.forEach(J=>{if(!this.isAccountKey(J,T.homeAccountId,T.tenantId))return;const A=this.getAccount(J);A&&(T.homeAccountId&&!this.matchHomeAccountId(A,T.homeAccountId)||T.localAccountId&&!this.matchLocalAccountId(A,T.localAccountId)||T.username&&!this.matchUsername(A,T.username)||T.environment&&!this.matchEnvironment(A,T.environment)||T.realm&&!this.matchRealm(A,T.realm)||T.tenantId&&!this.matchRealm(A,T.tenantId)||T.nativeAccountId&&!this.matchNativeAccountId(A,T.nativeAccountId)||T.authorityType&&!this.matchAuthorityType(A,T.authorityType)||T.name&&!this.matchName(A,T.name)||z.push(A))}),z}isAccountKey(T,b,z){return!(T.split(m.Bv.CACHE_KEY_SEPARATOR).length<3||b&&!T.toLowerCase().includes(b.toLowerCase())||z&&!T.toLowerCase().includes(z.toLowerCase()))}isCredentialKey(T){if(T.split(m.Bv.CACHE_KEY_SEPARATOR).length<6)return!1;const b=T.toLowerCase();if(-1===b.indexOf(m.d3.ID_TOKEN.toLowerCase())&&-1===b.indexOf(m.d3.ACCESS_TOKEN.toLowerCase())&&-1===b.indexOf(m.d3.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())&&-1===b.indexOf(m.d3.REFRESH_TOKEN.toLowerCase()))return!1;if(b.indexOf(m.d3.REFRESH_TOKEN.toLowerCase())>-1){const J=`${m.d3.REFRESH_TOKEN}${m.Bv.CACHE_KEY_SEPARATOR}${m.ch}${m.Bv.CACHE_KEY_SEPARATOR}`;if(-1===b.indexOf(`${m.d3.REFRESH_TOKEN}${m.Bv.CACHE_KEY_SEPARATOR}${this.clientId}${m.Bv.CACHE_KEY_SEPARATOR}`.toLowerCase())&&-1===b.indexOf(J.toLowerCase()))return!1}else if(-1===b.indexOf(this.clientId.toLowerCase()))return!1;return!0}credentialMatchesFilter(T,b){return!(b.clientId&&!this.matchClientId(T,b.clientId)||b.userAssertionHash&&!this.matchUserAssertionHash(T,b.userAssertionHash)||"string"==typeof b.homeAccountId&&!this.matchHomeAccountId(T,b.homeAccountId)||b.environment&&!this.matchEnvironment(T,b.environment)||b.realm&&!this.matchRealm(T,b.realm)||b.credentialType&&!this.matchCredentialType(T,b.credentialType)||b.familyId&&!this.matchFamilyId(T,b.familyId)||b.target&&!this.matchTarget(T,b.target)||(b.requestedClaimsHash||T.requestedClaimsHash)&&T.requestedClaimsHash!==b.requestedClaimsHash||T.credentialType===m.d3.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(b.tokenType&&!this.matchTokenType(T,b.tokenType)||b.tokenType===m.hO.SSH&&b.keyId&&!this.matchKeyId(T,b.keyId)))}getAppMetadataFilteredBy(T){return this.getAppMetadataFilteredByInternal(T.environment,T.clientId)}getAppMetadataFilteredByInternal(T,b){const z=this.getKeys(),J={};return z.forEach(A=>{if(!this.isAppMetadata(A))return;const re=this.getAppMetadata(A);re&&(T&&!this.matchEnvironment(re,T)||b&&!this.matchClientId(re,b)||(J[A]=re))}),J}getAuthorityMetadataByAlias(T){const b=this.getAuthorityMetadataKeys();let z=null;return b.forEach(J=>{if(!this.isAuthorityMetadata(J)||-1===J.indexOf(this.clientId))return;const A=this.getAuthorityMetadata(J);A&&-1!==A.aliases.indexOf(T)&&(z=A)}),z}removeAllAccounts(){var T=this;return(0,C.Z)(function*(){const b=T.getAccountKeys(),z=[];b.forEach(J=>{z.push(T.removeAccount(J))}),yield Promise.all(z)})()}removeAccount(T){var b=this;return(0,C.Z)(function*(){const z=b.getAccount(T);z&&(yield b.removeAccountContext(z),b.removeItem(T))})()}removeAccountContext(T){var b=this;return(0,C.Z)(function*(){const z=b.getTokenKeys(),J=T.generateAccountId(),A=[];z.idToken.forEach(re=>{0===re.indexOf(J)&&b.removeIdToken(re)}),z.accessToken.forEach(re=>{0===re.indexOf(J)&&A.push(b.removeAccessToken(re))}),z.refreshToken.forEach(re=>{0===re.indexOf(J)&&b.removeRefreshToken(re)}),yield Promise.all(A)})()}removeAccessToken(T){var b=this;return(0,C.Z)(function*(){const z=b.getAccessTokenCredential(T);if(z){if(z.credentialType.toLowerCase()===m.d3.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()&&z.tokenType===m.hO.POP){const A=z.keyId;if(A)try{yield b.cryptoImpl.removeTokenBindingKey(A)}catch{throw(0,L.zP)(I.ol)}}return b.removeItem(T)}})()}removeAppMetadata(){return this.getKeys().forEach(b=>{this.isAppMetadata(b)&&this.removeItem(b)}),!0}readCacheRecord(T,b,z){const J=this.getTokenKeys(),A=this.readAccountFromCache(T),re=this.getIdToken(T,J),Y=this.getAccessToken(T,b,J),Ue=this.getRefreshToken(T,!1,J),De=this.readAppMetadataFromCache(z);return A&&re&&(A.idTokenClaims=(0,H.Z_)(re.secret,this.cryptoImpl.base64Decode)),{account:A,idToken:re,accessToken:Y,refreshToken:Ue,appMetadata:De}}readAccountFromCache(T){const b=O.r.generateAccountCacheKey(T);return this.getAccount(b)}getIdToken(T,b){this.commonLogger.trace("CacheManager - getIdToken called");const J=this.getIdTokensByFilter({homeAccountId:T.homeAccountId,environment:T.environment,credentialType:m.d3.ID_TOKEN,clientId:this.clientId,realm:T.tenantId},b),A=J.length;return A<1?(this.commonLogger.info("CacheManager:getIdToken - No token found"),null):A>1?(this.commonLogger.info("CacheManager:getIdToken - Multiple id tokens found, clearing them"),J.forEach(re=>{this.removeIdToken(re.generateCredentialKey())}),null):(this.commonLogger.info("CacheManager:getIdToken - Returning id token"),J[0])}getIdTokensByFilter(T,b){const z=b&&b.idToken||this.getTokenKeys().idToken,J=[];return z.forEach(A=>{if(!this.idTokenKeyMatchesFilter(A,{clientId:this.clientId,...T}))return;const re=this.getIdTokenCredential(A);re&&this.credentialMatchesFilter(re,T)&&J.push(re)}),J}idTokenKeyMatchesFilter(T,b){const z=T.toLowerCase();return!(b.clientId&&-1===z.indexOf(b.clientId.toLowerCase())||b.homeAccountId&&-1===z.indexOf(b.homeAccountId.toLowerCase()))}removeIdToken(T){this.removeItem(T)}removeRefreshToken(T){this.removeItem(T)}getAccessToken(T,b,z){this.commonLogger.trace("CacheManager - getAccessToken called");const J=M.i.createSearchScopes(b.scopes),A=b.authenticationScheme||m.hO.BEARER,re=A&&A.toLowerCase()!==m.hO.BEARER.toLowerCase()?m.d3.ACCESS_TOKEN_WITH_AUTH_SCHEME:m.d3.ACCESS_TOKEN,Y={homeAccountId:T.homeAccountId,environment:T.environment,credentialType:re,clientId:this.clientId,realm:T.tenantId,target:J,tokenType:A,keyId:b.sshKid,requestedClaimsHash:b.requestedClaimsHash},Ue=z&&z.accessToken||this.getTokenKeys().accessToken,De=[];Ue.forEach(we=>{if(this.accessTokenKeyMatchesFilter(we,Y,!0)){const ce=this.getAccessTokenCredential(we);ce&&this.credentialMatchesFilter(ce,Y)&&De.push(ce)}});const se=De.length;return se<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found"),null):se>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them"),De.forEach(we=>{this.removeAccessToken(we.generateCredentialKey())}),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token"),De[0])}accessTokenKeyMatchesFilter(T,b,z){const J=T.toLowerCase();if(b.clientId&&-1===J.indexOf(b.clientId.toLowerCase())||b.homeAccountId&&-1===J.indexOf(b.homeAccountId.toLowerCase())||b.realm&&-1===J.indexOf(b.realm.toLowerCase())||b.requestedClaimsHash&&-1===J.indexOf(b.requestedClaimsHash.toLowerCase()))return!1;if(b.target){const A=b.target.asArray();for(let re=0;re<A.length;re++){if(z&&!J.includes(A[re].toLowerCase()))return!1;if(!z&&J.includes(A[re].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(T){const b=this.getTokenKeys(),z=[];return b.accessToken.forEach(J=>{if(!this.accessTokenKeyMatchesFilter(J,T,!0))return;const A=this.getAccessTokenCredential(J);A&&this.credentialMatchesFilter(A,T)&&z.push(A)}),z}getRefreshToken(T,b,z){this.commonLogger.trace("CacheManager - getRefreshToken called");const A={homeAccountId:T.homeAccountId,environment:T.environment,credentialType:m.d3.REFRESH_TOKEN,clientId:this.clientId,familyId:b?m.ch:void 0},re=z&&z.refreshToken||this.getTokenKeys().refreshToken,Y=[];return re.forEach(De=>{if(this.refreshTokenKeyMatchesFilter(De,A)){const se=this.getRefreshTokenCredential(De);se&&this.credentialMatchesFilter(se,A)&&Y.push(se)}}),Y.length<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),Y[0])}refreshTokenKeyMatchesFilter(T,b){const z=T.toLowerCase();return!(b.familyId&&-1===z.indexOf(b.familyId.toLowerCase())||!b.familyId&&b.clientId&&-1===z.indexOf(b.clientId.toLowerCase())||b.homeAccountId&&-1===z.indexOf(b.homeAccountId.toLowerCase()))}readAppMetadataFromCache(T){const z=this.getAppMetadataFilteredBy({environment:T,clientId:this.clientId}),J=Object.keys(z).map(re=>z[re]),A=J.length;if(A<1)return null;if(A>1)throw(0,L.zP)(I.EC);return J[0]}isAppMetadataFOCI(T){const b=this.readAppMetadataFromCache(T);return!(!b||b.familyId!==m.ch)}matchHomeAccountId(T,b){return"string"==typeof T.homeAccountId&&b===T.homeAccountId}matchLocalAccountId(T,b){return"string"==typeof T.localAccountId&&b===T.localAccountId}matchUsername(T,b){return"string"==typeof T.username&&b.toLowerCase()===T.username.toLowerCase()}matchName(T,b){return b.toLowerCase()===T.name?.toLowerCase()}matchUserAssertionHash(T,b){return!(!T.userAssertionHash||b!==T.userAssertionHash)}matchEnvironment(T,b){if(this.staticAuthorityOptions){const J=(0,y.tJ)(this.staticAuthorityOptions.canonicalAuthority,this.staticAuthorityOptions.cloudDiscoveryMetadata)||(0,y.UD)(this.staticAuthorityOptions.canonicalAuthority)||this.staticAuthorityOptions.knownAuthorities;if(J&&J.includes(b)&&J.includes(T.environment))return!0}const z=this.getAuthorityMetadataByAlias(b);return!!(z&&z.aliases.indexOf(T.environment)>-1)}matchCredentialType(T,b){return T.credentialType&&b.toLowerCase()===T.credentialType.toLowerCase()}matchClientId(T,b){return!(!T.clientId||b!==T.clientId)}matchFamilyId(T,b){return!(!T.familyId||b!==T.familyId)}matchRealm(T,b){return!(!T.realm||b!==T.realm)}matchNativeAccountId(T,b){return!(!T.nativeAccountId||b!==T.nativeAccountId)}matchLoginHint(T,b){return T?.login_hint===b||T.preferred_username===b||T?.upn===b}matchSid(T,b){return!(!T?.sid||T.sid!==b)}matchAuthorityType(T,b){return!(!T.authorityType||b.toLowerCase()!==T.authorityType.toLowerCase())}matchTarget(T,b){return!(T.credentialType!==m.d3.ACCESS_TOKEN&&T.credentialType!==m.d3.ACCESS_TOKEN_WITH_AUTH_SCHEME||!T.target)&&M.i.fromString(T.target).containsScopeSet(b)}matchTokenType(T,b){return!(!T.tokenType||T.tokenType!==b)}matchKeyId(T,b){return!(!T.keyId||T.keyId!==b)}isAppMetadata(T){return-1!==T.indexOf(m.dg)}isAuthorityMetadata(T){return-1!==T.indexOf(m.QU.CACHE_KEY)}generateAuthorityMetadataCacheKey(T){return`${m.QU.CACHE_KEY}-${this.clientId}-${T}`}static toObject(T,b){for(const z in b)T[z]=b[z];return T}}class B extends P{setAccount(){throw(0,L.zP)(I.M2)}getAccount(){throw(0,L.zP)(I.M2)}setIdTokenCredential(){throw(0,L.zP)(I.M2)}getIdTokenCredential(){throw(0,L.zP)(I.M2)}setAccessTokenCredential(){throw(0,L.zP)(I.M2)}getAccessTokenCredential(){throw(0,L.zP)(I.M2)}setRefreshTokenCredential(){throw(0,L.zP)(I.M2)}getRefreshTokenCredential(){throw(0,L.zP)(I.M2)}setAppMetadata(){throw(0,L.zP)(I.M2)}getAppMetadata(){throw(0,L.zP)(I.M2)}setServerTelemetry(){throw(0,L.zP)(I.M2)}getServerTelemetry(){throw(0,L.zP)(I.M2)}setAuthorityMetadata(){throw(0,L.zP)(I.M2)}getAuthorityMetadata(){throw(0,L.zP)(I.M2)}getAuthorityMetadataKeys(){throw(0,L.zP)(I.M2)}setThrottlingCache(){throw(0,L.zP)(I.M2)}getThrottlingCache(){throw(0,L.zP)(I.M2)}removeItem(){throw(0,L.zP)(I.M2)}containsKey(){throw(0,L.zP)(I.M2)}getKeys(){throw(0,L.zP)(I.M2)}getAccountKeys(){throw(0,L.zP)(I.M2)}getTokenKeys(){throw(0,L.zP)(I.M2)}clear(){return(0,C.Z)(function*(){throw(0,L.zP)(I.M2)})()}updateCredentialCacheKey(){throw(0,L.zP)(I.M2)}}},603:(Se,ne,S)=>{S.d(ne,{r:()=>F});var C=S(500),m=S(758),M=S(140),O=S(63),L=S(132),H=S(841);class F{generateAccountId(){return[this.homeAccountId,this.environment].join(C.Bv.CACHE_KEY_SEPARATOR).toLowerCase()}generateAccountKey(){return F.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,idTokenClaims:this.idTokenClaims,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType}}static generateAccountCacheKey(I){return[I.homeAccountId,I.environment||C.gT.EMPTY_STRING,I.tenantId||C.gT.EMPTY_STRING].join(C.Bv.CACHE_KEY_SEPARATOR).toLowerCase()}static createAccount(I,P){const B=new F;B.authorityType=P.authorityType===O.a.Adfs?C.iR.ADFS_ACCOUNT_TYPE:P.protocolMode===L.A.AAD?C.iR.MSSTS_ACCOUNT_TYPE:C.iR.GENERIC_ACCOUNT_TYPE,B.clientInfo=I.clientInfo,B.homeAccountId=I.homeAccountId,B.nativeAccountId=I.nativeAccountId;const te=I.environment||P&&P.getPreferredCache();if(!te)throw(0,M.zP)(H.Q9);return B.environment=te,B.realm=I.idTokenClaims.tid||C.gT.EMPTY_STRING,B.localAccountId=I.idTokenClaims.oid||I.idTokenClaims.sub||C.gT.EMPTY_STRING,B.username=I.idTokenClaims.preferred_username||I.idTokenClaims.upn||(I.idTokenClaims.emails?I.idTokenClaims.emails[0]:null)||C.gT.EMPTY_STRING,B.name=I.idTokenClaims.name,B.cloudGraphHostName=I.cloudGraphHostName,B.msGraphHost=I.msGraphHost,B}static createFromAccountInfo(I,P,B){const te=new F;return te.authorityType=I.authorityType||C.iR.GENERIC_ACCOUNT_TYPE,te.homeAccountId=I.homeAccountId,te.localAccountId=I.localAccountId,te.nativeAccountId=I.nativeAccountId,te.realm=I.tenantId,te.environment=I.environment,te.username=I.username,te.name=I.name,te.cloudGraphHostName=P,te.msGraphHost=B,te}static generateHomeAccountId(I,P,B,te,T){const b=T?.sub?T.sub:C.gT.EMPTY_STRING;if(P===O.a.Adfs||P===O.a.Dsts)return b;if(I)try{const z=(0,m.B)(I,te);if(z.uid&&z.utid)return`${z.uid}${C.Bv.CLIENT_INFO_SEPARATOR}${z.utid}`}catch{}return B.verbose("No client info in response"),b}static isAccountEntity(I){return!!I&&I.hasOwnProperty("homeAccountId")&&I.hasOwnProperty("environment")&&I.hasOwnProperty("realm")&&I.hasOwnProperty("localAccountId")&&I.hasOwnProperty("username")&&I.hasOwnProperty("authorityType")}static accountInfoIsEqual(I,P,B){if(!I||!P)return!1;let te=!0;if(B){const T=I.idTokenClaims||{},b=P.idTokenClaims||{};te=T.iat===b.iat&&T.nonce===b.nonce}return I.homeAccountId===P.homeAccountId&&I.localAccountId===P.localAccountId&&I.username===P.username&&I.tenantId===P.tenantId&&I.environment===P.environment&&I.nativeAccountId===P.nativeAccountId&&te}}},703:(Se,ne,S)=>{S.d(ne,{j6:()=>Ue,lh:()=>se,z:()=>te});var C=S(861),m=S(214),M=S(630),O=S(500),L=S(667),H=S(286),F=S(723),y=S(132),I=S(140),P=S(841);const te={tokenRenewalOffsetSeconds:300,preventCorsPreflight:!1},T={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:M.i.Info,correlationId:O.gT.EMPTY_STRING},b={claimsBasedCachingEnabled:!1},z={sendGetRequestAsync:()=>(0,C.Z)(function*(){throw(0,I.zP)(P.M2)})(),sendPostRequestAsync:()=>(0,C.Z)(function*(){throw(0,I.zP)(P.M2)})()},J={sku:O.gT.SKU,version:L.i,cpu:O.gT.EMPTY_STRING,os:O.gT.EMPTY_STRING},A={clientSecret:O.gT.EMPTY_STRING,clientAssertion:void 0},re={azureCloudInstance:H.z.None,tenant:`${O.gT.DEFAULT_COMMON_TENANT}`},Y={application:{appName:"",appVersion:""}};function Ue({authOptions:we,systemOptions:ce,loggerOptions:W,cacheOptions:j,storageInterface:X,networkInterface:ie,cryptoInterface:Ce,clientCredentials:ve,libraryInfo:xe,telemetry:ke,serverTelemetryManager:Ee,persistencePlugin:Ye,serializableCache:ut}){const bt={...T,...W};return{authOptions:De(we),systemOptions:{...te,...ce},loggerOptions:bt,cacheOptions:{...b,...j},storageInterface:X||new F.w(we.clientId,m.d,new M.Y(bt)),networkInterface:ie||z,cryptoInterface:Ce||m.d,clientCredentials:ve||A,libraryInfo:{...J,...xe},telemetry:{...Y,...ke},serverTelemetryManager:Ee||null,persistencePlugin:Ye||null,serializableCache:ut||null}}function De(we){return{clientCapabilities:[],azureCloudOptions:re,skipAuthorityMetadataCache:!1,...we}}function se(we){return we.authOptions.authority.options.protocolMode===y.A.OIDC}},214:(Se,ne,S)=>{S.d(ne,{d:()=>O});var C=S(861),m=S(140),M=S(841);const O={createNewGuid:()=>{throw(0,m.zP)(M.M2)},base64Decode:()=>{throw(0,m.zP)(M.M2)},base64Encode:()=>{throw(0,m.zP)(M.M2)},getPublicKeyThumbprint:()=>(0,C.Z)(function*(){throw(0,m.zP)(M.M2)})(),removeTokenBindingKey:()=>(0,C.Z)(function*(){throw(0,m.zP)(M.M2)})(),clearKeystore:()=>(0,C.Z)(function*(){throw(0,m.zP)(M.M2)})(),signJwt:()=>(0,C.Z)(function*(){throw(0,m.zP)(M.M2)})(),hashString:()=>(0,C.Z)(function*(){throw(0,m.zP)(M.M2)})()}},481:(Se,ne,S)=>{S.d(ne,{MD:()=>H,l4:()=>L});var C=S(500),m=S(12);const M={[m.g]:"Unexpected error in authentication.",[m.D]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};class L extends Error{constructor(y,I,P){super(I?`${y}: ${I}`:y),Object.setPrototypeOf(this,L.prototype),this.errorCode=y||C.gT.EMPTY_STRING,this.errorMessage=I||C.gT.EMPTY_STRING,this.subError=P||C.gT.EMPTY_STRING,this.name="AuthError"}setCorrelationId(y){this.correlationId=y}}function H(F,y){return new L(F,y?`${M[F]} ${y}`:M[F])}},12:(Se,ne,S)=>{S.d(ne,{D:()=>m,g:()=>C});const C="unexpected_error",m="post_request_failed"},140:(Se,ne,S)=>{S.d(ne,{er:()=>L,zP:()=>H});var C=S(481),m=S(841);const M={[m.ZE]:"The client info could not be parsed/decoded correctly",[m.S7]:"The client info was empty",[m.GH]:"Token cannot be parsed",[m.PM]:"The token is null or empty",[m.HO]:"Endpoints cannot be resolved",[m.EF]:"Network request failed",[m.Ce]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[m.b4]:"The hash parameters could not be deserialized",[m.r8]:"State was not the expected format",[m.Tu]:"State mismatch error",[m.LV]:"State not found",[m.vR]:"Nonce mismatch error",[m.w7]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[m.Ao]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[m.MU]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[m.RH]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[m.EC]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[m.FU]:"Token request cannot be made without authorization code or refresh token.",[m.v1]:"Cannot remove null or empty scope from ScopeSet",[m.f4]:"Cannot append ScopeSet",[m.S]:"Empty input ScopeSet cannot be processed",[m.Jk]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[m.tS]:"Device code is expired.",[m.ZT]:"Device code stopped polling for unknown reasons.",[m.D7]:"Please pass an account object, silent flow is not supported without account information",[m.mj]:"Cache record object was null or undefined.",[m.Q9]:"Invalid environment when attempting to create cache entry",[m.cX]:"No account found in cache for given key.",[m.QL]:"No crypto object detected.",[m.cy]:"Unexpected credential type.",[m.aE]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[m.SX]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[m.s$]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[m.nQ]:"User defined timeout for device code polling reached",[m.P_]:"Cannot generate a POP jwt if the token_claims are not populated",[m.Zv]:"Server response does not contain an authorization code to proceed",[m.ol]:"Could not remove the credential's binding key from storage.",[m.ig]:"The provided authority does not support logout",[m.Of]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[m.Mq]:"No network connectivity. Check your internet connection.",[m.$R]:"User cancelled the flow.",[m.k7]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[m.M2]:"This method has not been implemented",[m.Ls]:"The nested app auth bridge is disabled"};class L extends C.l4{constructor(y,I){super(y,I?`${M[y]}: ${I}`:M[y]),this.name="ClientAuthError",Object.setPrototypeOf(this,L.prototype)}}function H(F,y){return new L(F,y)}},841:(Se,ne,S)=>{S.d(ne,{$R:()=>He,Ao:()=>b,Ce:()=>F,D7:()=>W,EC:()=>A,EF:()=>H,FU:()=>re,GH:()=>M,HO:()=>L,Jk:()=>se,LV:()=>B,Ls:()=>R,M2:()=>pe,MU:()=>z,Mq:()=>wt,Of:()=>tn,PM:()=>O,P_:()=>ut,Q9:()=>X,QL:()=>Ce,RH:()=>J,S:()=>De,S7:()=>m,SX:()=>ke,Tu:()=>P,ZE:()=>C,ZT:()=>ce,Zv:()=>bt,aE:()=>xe,b4:()=>y,cX:()=>ie,cy:()=>ve,f4:()=>Ue,ig:()=>at,k7:()=>Ge,mj:()=>j,nQ:()=>Ye,ol:()=>gn,r8:()=>I,s$:()=>Ee,tS:()=>we,v1:()=>Y,vR:()=>te,w7:()=>T});const C="client_info_decoding_error",m="client_info_empty_error",M="token_parsing_error",O="null_or_empty_token",L="endpoints_resolution_error",H="network_error",F="openid_config_error",y="hash_not_deserialized",I="invalid_state",P="state_mismatch",B="state_not_found",te="nonce_mismatch",T="auth_time_not_found",b="max_age_transpired",z="multiple_matching_tokens",J="multiple_matching_accounts",A="multiple_matching_appMetadata",re="request_cannot_be_made",Y="cannot_remove_empty_scope",Ue="cannot_append_scopeset",De="empty_input_scopeset",se="device_code_polling_cancelled",we="device_code_expired",ce="device_code_unknown_error",W="no_account_in_silent_request",j="invalid_cache_record",X="invalid_cache_environment",ie="no_account_found",Ce="no_crypto_object",ve="unexpected_credential_type",xe="invalid_assertion",ke="invalid_client_credential",Ee="token_refresh_required",Ye="user_timeout_reached",ut="token_claims_cnf_required_for_signedjwt",bt="authorization_code_missing_from_server_response",gn="binding_key_not_removed",at="end_session_endpoint_not_supported",tn="key_id_missing",wt="no_network_connectivity",He="user_canceled",Ge="missing_tenant_id_error",pe="method_not_implemented",R="nested_app_auth_bridge_disabled"},680:(Se,ne,S)=>{S.d(ne,{ei:()=>H});var C=S(481),m=S(299);const M={[m.RV]:"A redirect URI is required for all calls, and none has been set.",[m.LB]:"Could not parse the given claims request object.",[m.Oz]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[m.yH]:"URL could not be parsed into appropriate segments.",[m.To]:"URL was empty or null.",[m.vE]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[m.z_]:"Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",[m.nm]:"Given claims parameter must be a stringified JSON object.",[m.dL]:"Token request was empty and not found in cache.",[m.$h]:"The logout request was null or undefined.",[m.d6]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[m.TU]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[m.E]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[m.zx]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[m.o_]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[m.dK]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[m.hI]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[m.U9]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[m.i1]:"Invalid authentication header provided",[m.qz]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[m.Ol]:"Cannot set allowNativeBroker parameter to true when not in AAD protocol mode.",[m.Hv]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."};class L extends C.l4{constructor(y){super(y,M[y]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,L.prototype)}}function H(F){return new L(F)}},299:(Se,ne,S)=>{S.d(ne,{$h:()=>P,E:()=>T,Hv:()=>se,LB:()=>m,Ol:()=>De,Oz:()=>M,RV:()=>C,TU:()=>te,To:()=>L,U9:()=>re,d6:()=>B,dK:()=>J,dL:()=>I,hI:()=>A,i1:()=>Y,nm:()=>y,o_:()=>z,qz:()=>Ue,vE:()=>H,yH:()=>O,z_:()=>F,zx:()=>b});const C="redirect_uri_empty",m="claims_request_parsing_error",M="authority_uri_insecure",O="url_parse_error",L="empty_url_error",H="empty_input_scopes_error",F="invalid_prompt_value",y="invalid_claims",I="token_request_empty",P="logout_request_empty",B="invalid_code_challenge_method",te="pkce_params_missing",T="invalid_cloud_discovery_metadata",b="invalid_authority_metadata",z="untrusted_authority",J="missing_ssh_jwk",A="missing_ssh_kid",re="missing_nonce_authentication_header",Y="invalid_authentication_header",Ue="cannot_set_OIDCOptions",De="cannot_allow_native_broker",se="authority_mismatch"},544:(Se,ne,S)=>{S.d(ne,{Cf:()=>I,Yo:()=>y,ip:()=>P});var C=S(500),m=S(481),M=S(490);const O=[M.tZ,M.Mo,M.kk],L=["message_only","additional_action","basic_action","user_password_expired","consent_required"],H={[M.I2]:"No refresh token found in the cache. Please sign-in.",[M.QP]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API."};class y extends m.l4{constructor(te,T,b,z,J,A,re){super(te,T,b),Object.setPrototypeOf(this,y.prototype),this.timestamp=z||C.gT.EMPTY_STRING,this.traceId=J||C.gT.EMPTY_STRING,this.correlationId=A||C.gT.EMPTY_STRING,this.claims=re||C.gT.EMPTY_STRING,this.name="InteractionRequiredAuthError"}}function I(B,te,T){const b=!!B&&O.indexOf(B)>-1,z=!!T&&L.indexOf(T)>-1,J=!!te&&O.some(A=>te.indexOf(A)>-1);return b||J||z}function P(B){return new y(B,H[B])}},490:(Se,ne,S)=>{S.d(ne,{I2:()=>C,Mo:()=>O,QP:()=>m,kk:()=>L,tZ:()=>M});const C="no_tokens_found",m="native_account_unavailable",M="interaction_required",O="consent_required",L="login_required"},498:(Se,ne,S)=>{S.d(ne,{n:()=>m});var C=S(481);class m extends C.l4{constructor(O,L,H){super(O,L,H),this.name="ServerError",Object.setPrototypeOf(this,m.prototype)}}},630:(Se,ne,S)=>{S.d(ne,{Y:()=>M,i:()=>m});var C=S(500),m=function(O){return O[O.Error=0]="Error",O[O.Warning=1]="Warning",O[O.Info=2]="Info",O[O.Verbose=3]="Verbose",O[O.Trace=4]="Trace",O}(m||{});class M{constructor(L,H,F){this.level=m.Info;const I=L||M.createDefaultLoggerOptions();this.localCallback=I.loggerCallback||(()=>{}),this.piiLoggingEnabled=I.piiLoggingEnabled||!1,this.level="number"==typeof I.logLevel?I.logLevel:m.Info,this.correlationId=I.correlationId||C.gT.EMPTY_STRING,this.packageName=H||C.gT.EMPTY_STRING,this.packageVersion=F||C.gT.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:m.Info}}clone(L,H,F){return new M({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:F||this.correlationId},L,H)}logMessage(L,H){if(H.logLevel>this.level||!this.piiLoggingEnabled&&H.containsPii)return;const I=`[${(new Date).toUTCString()}] : [${H.correlationId||this.correlationId||""}] : ${this.packageName}@${this.packageVersion} : ${m[H.logLevel]} - ${L}`;this.executeCallback(H.logLevel,I,H.containsPii||!1)}executeCallback(L,H,F){this.localCallback&&this.localCallback(L,H,F)}error(L,H){this.logMessage(L,{logLevel:m.Error,containsPii:!1,correlationId:H||C.gT.EMPTY_STRING})}errorPii(L,H){this.logMessage(L,{logLevel:m.Error,containsPii:!0,correlationId:H||C.gT.EMPTY_STRING})}warning(L,H){this.logMessage(L,{logLevel:m.Warning,containsPii:!1,correlationId:H||C.gT.EMPTY_STRING})}warningPii(L,H){this.logMessage(L,{logLevel:m.Warning,containsPii:!0,correlationId:H||C.gT.EMPTY_STRING})}info(L,H){this.logMessage(L,{logLevel:m.Info,containsPii:!1,correlationId:H||C.gT.EMPTY_STRING})}infoPii(L,H){this.logMessage(L,{logLevel:m.Info,containsPii:!0,correlationId:H||C.gT.EMPTY_STRING})}verbose(L,H){this.logMessage(L,{logLevel:m.Verbose,containsPii:!1,correlationId:H||C.gT.EMPTY_STRING})}verbosePii(L,H){this.logMessage(L,{logLevel:m.Verbose,containsPii:!0,correlationId:H||C.gT.EMPTY_STRING})}trace(L,H){this.logMessage(L,{logLevel:m.Trace,containsPii:!1,correlationId:H||C.gT.EMPTY_STRING})}tracePii(L,H){this.logMessage(L,{logLevel:m.Trace,containsPii:!0,correlationId:H||C.gT.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}},667:(Se,ne,S)=>{S.d(ne,{i:()=>m,u:()=>C});const C="@azure/msal-common",m="14.2.0"},795:(Se,ne,S)=>{S.d(ne,{i:()=>F});var C=S(680),m=S(92),M=S(140),O=S(500),L=S(299),H=S(841);class F{constructor(I){const P=I?m.x.trimArrayEntries([...I]):[],B=P?m.x.removeEmptyStringsFromArray(P):[];this.validateInputScopes(B),this.scopes=new Set,B.forEach(te=>this.scopes.add(te))}static fromString(I){const B=(I||O.gT.EMPTY_STRING).split(" ");return new F(B)}static createSearchScopes(I){const P=new F(I);return P.containsOnlyOIDCScopes()?P.removeScope(O.gT.OFFLINE_ACCESS_SCOPE):P.removeOIDCScopes(),P}validateInputScopes(I){if(!I||I.length<1)throw(0,C.ei)(L.vE)}containsScope(I){const P=this.printScopesLowerCase().split(" "),B=new F(P);return!!I&&B.scopes.has(I.toLowerCase())}containsScopeSet(I){return!(!I||I.scopes.size<=0)&&this.scopes.size>=I.scopes.size&&I.asArray().every(P=>this.containsScope(P))}containsOnlyOIDCScopes(){let I=0;return O.$f.forEach(P=>{this.containsScope(P)&&(I+=1)}),this.scopes.size===I}appendScope(I){I&&this.scopes.add(I.trim())}appendScopes(I){try{I.forEach(P=>this.appendScope(P))}catch{throw(0,M.zP)(H.f4)}}removeScope(I){if(!I)throw(0,M.zP)(H.v1);this.scopes.delete(I.trim())}removeOIDCScopes(){O.$f.forEach(I=>{this.scopes.delete(I)})}unionScopeSets(I){if(!I)throw(0,M.zP)(H.S);const P=new Set;return I.scopes.forEach(B=>P.add(B.toLowerCase())),this.scopes.forEach(B=>P.add(B.toLowerCase())),P}intersectingScopeSets(I){if(!I)throw(0,M.zP)(H.S);I.containsOnlyOIDCScopes()||I.removeOIDCScopes();const P=this.unionScopeSets(I),B=I.getScopeCount(),te=this.getScopeCount();return P.size<te+B}getScopeCount(){return this.scopes.size}asArray(){const I=[];return this.scopes.forEach(P=>I.push(P)),I}printScopes(){return this.scopes?this.asArray().join(" "):O.gT.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}},979:(Se,ne,S)=>{S.d(ne,{$L:()=>m,Ak:()=>C});const C={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",StandardInteractionClientInitializeAuthorizationCodeRequest:"standardInteractionClientInitializeAuthorizationCodeRequest",GetAuthCodeUrl:"getAuthCodeUrl",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponseFromHash:"handleCodeResponseFromHash",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",AuthClientCreateQueryString:"authClientCreateQueryString",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromiseMeasurement",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues"},m={NotStarted:0,InProgress:1,Completed:2}},581:(Se,ne,S)=>{S.d(ne,{G:()=>F});var C=S(680),m=S(140),M=S(92),O=S(500),L=S(299),H=S(841);class F{get urlString(){return this._urlString}constructor(I){if(this._urlString=I,!this._urlString)throw(0,C.ei)(L.To);this.getHash()||(this._urlString=F.canonicalizeUri(I))}static canonicalizeUri(I){if(I){let P=I.toLowerCase();return M.x.endsWith(P,"?")?P=P.slice(0,-1):M.x.endsWith(P,"?/")&&(P=P.slice(0,-2)),M.x.endsWith(P,"/")||(P+="/"),P}return I}validateAsUri(){let I;try{I=this.getUrlComponents()}catch{throw(0,C.ei)(L.yH)}if(!I.HostNameAndPort||!I.PathSegments)throw(0,C.ei)(L.yH);if(!I.Protocol||"https:"!==I.Protocol.toLowerCase())throw(0,C.ei)(L.Oz)}static appendQueryString(I,P){return P?I.indexOf("?")<0?`${I}?${P}`:`${I}&${P}`:I}static removeHashFromUrl(I){return F.canonicalizeUri(I.split("#")[0])}replaceTenantPath(I){const P=this.getUrlComponents(),B=P.PathSegments;return I&&0!==B.length&&(B[0]===O.Nb.COMMON||B[0]===O.Nb.ORGANIZATIONS)&&(B[0]=I),F.constructAuthorityUriFromObject(P)}getHash(){return F.parseHash(this.urlString)}getUrlComponents(){const I=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),P=this.urlString.match(I);if(!P)throw(0,C.ei)(L.yH);const B={Protocol:P[1],HostNameAndPort:P[4],AbsolutePath:P[5],QueryString:P[7]};let te=B.AbsolutePath.split("/");return te=te.filter(T=>T&&T.length>0),B.PathSegments=te,B.QueryString&&B.QueryString.endsWith("/")&&(B.QueryString=B.QueryString.substring(0,B.QueryString.length-1)),B}static getDomainFromUrl(I){const P=RegExp("^([^:/?#]+://)?([^/?#]*)"),B=I.match(P);if(!B)throw(0,C.ei)(L.yH);return B[2]}static getAbsoluteUrl(I,P){if(I[0]===O.gT.FORWARD_SLASH){const te=new F(P).getUrlComponents();return te.Protocol+"//"+te.HostNameAndPort+I}return I}static parseHash(I){const P=I.indexOf("#"),B=I.indexOf("#/");return B>-1?I.substring(B+2):P>-1?I.substring(P+1):O.gT.EMPTY_STRING}static parseQueryString(I){const P=I.indexOf("?"),B=I.indexOf("/?");return B>-1?I.substring(B+2):P>-1?I.substring(P+1):O.gT.EMPTY_STRING}static parseQueryServerResponse(I){const P=I.indexOf("?code"),B=I.indexOf("/?code"),te=I.indexOf("#");return B>-1&&te>-1?I.substring(B+2,te):B>-1?I.substring(B+2):P>-1&&te>-1?I.substring(P+1,te):P>-1?I.substring(P+1):O.gT.EMPTY_STRING}static constructAuthorityUriFromObject(I){return new F(I.Protocol+"//"+I.HostNameAndPort+"/"+I.PathSegments.join("/"))}static getDeserializedHash(I){if(!I)return{};const P=F.parseHash(I),B=M.x.queryStringToObject(P||I);if(!B)throw(0,m.zP)(H.b4);return B}static getDeserializedQueryString(I){if(!I)return{};const P=F.parseQueryString(I),B=M.x.queryStringToObject(P||I);if(!B)throw(0,m.zP)(H.b4);return B}static getDeserializedCodeResponse(I,P){const B=new F(P);let te;return te=I===O.rg.QUERY?F.getDeserializedQueryString(P):F.getDeserializedHash(B.getHash()),te}static hashContainsKnownProperties(I){if(!I||I.indexOf("=")<0)return!1;const P=F.getDeserializedHash(I);return!!(P.code||P.error_description||P.error||P.state)}}},500:(Se,ne,S)=>{S.d(ne,{$f:()=>O,As:()=>I,Bv:()=>A,D1:()=>ie,Fo:()=>y,Ge:()=>Ce,HN:()=>W,L:()=>Ye,LL:()=>Y,NJ:()=>P,Nb:()=>F,QU:()=>we,SZ:()=>L,To:()=>Ee,VO:()=>B,VX:()=>te,Vi:()=>H,W:()=>xe,YY:()=>ve,bb:()=>X,ch:()=>se,d3:()=>re,dg:()=>Ue,f_:()=>M,gT:()=>C,hO:()=>j,iR:()=>J,ki:()=>ke,oj:()=>m,pQ:()=>ce,qJ:()=>z,rg:()=>T,sR:()=>De,vw:()=>b});const C={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_RESPONSE_TYPE:"code",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",FRAGMENT_RESPONSE_MODE:"fragment",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",REGIONAL_AUTH_NON_MSI_QUERY_STRING:"allowestsrnonmsi=true",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],TOKEN_RESPONSE_TYPE:"token",ID_TOKEN_RESPONSE_TYPE:"id_token",SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},m={SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR_RANGE_START:400,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR_RANGE_START:500,SERVER_ERROR_RANGE_END:599},M=[C.OPENID_SCOPE,C.PROFILE_SCOPE,C.OFFLINE_ACCESS_SCOPE],O=[...M,C.EMAIL_SCOPE],L={CONTENT_TYPE:"Content-Type",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},H={ID_TOKEN:"idtoken",CLIENT_INFO:"client.info",ADAL_ID_TOKEN:"adal.idtoken",ERROR:"error",ERROR_DESC:"error.description",ACTIVE_ACCOUNT:"active-account",ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},F={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},y={CLIENT_ID:"client_id",REDIRECT_URI:"redirect_uri",RESPONSE_TYPE:"response_type",RESPONSE_MODE:"response_mode",GRANT_TYPE:"grant_type",CLAIMS:"claims",SCOPE:"scope",ERROR:"error",ERROR_DESCRIPTION:"error_description",ACCESS_TOKEN:"access_token",ID_TOKEN:"id_token",REFRESH_TOKEN:"refresh_token",EXPIRES_IN:"expires_in",STATE:"state",NONCE:"nonce",PROMPT:"prompt",SESSION_STATE:"session_state",CLIENT_INFO:"client_info",CODE:"code",CODE_CHALLENGE:"code_challenge",CODE_CHALLENGE_METHOD:"code_challenge_method",CODE_VERIFIER:"code_verifier",CLIENT_REQUEST_ID:"client-request-id",X_CLIENT_SKU:"x-client-SKU",X_CLIENT_VER:"x-client-VER",X_CLIENT_OS:"x-client-OS",X_CLIENT_CPU:"x-client-CPU",X_CLIENT_CURR_TELEM:"x-client-current-telemetry",X_CLIENT_LAST_TELEM:"x-client-last-telemetry",X_MS_LIB_CAPABILITY:"x-ms-lib-capability",X_APP_NAME:"x-app-name",X_APP_VER:"x-app-ver",POST_LOGOUT_URI:"post_logout_redirect_uri",ID_TOKEN_HINT:"id_token_hint",DEVICE_CODE:"device_code",CLIENT_SECRET:"client_secret",CLIENT_ASSERTION:"client_assertion",CLIENT_ASSERTION_TYPE:"client_assertion_type",TOKEN_TYPE:"token_type",REQ_CNF:"req_cnf",OBO_ASSERTION:"assertion",REQUESTED_TOKEN_USE:"requested_token_use",ON_BEHALF_OF:"on_behalf_of",FOCI:"foci",CCS_HEADER:"X-AnchorMailbox",RETURN_SPA_CODE:"return_spa_code",NATIVE_BROKER:"nativebroker",LOGOUT_HINT:"logout_hint"},I={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},P={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},B={ACCOUNT:"account",SID:"sid",LOGIN_HINT:"login_hint",ID_TOKEN:"id_token",DOMAIN_HINT:"domain_hint",ORGANIZATIONS:"organizations",CONSUMERS:"consumers",ACCOUNT_ID:"accountIdentifier",HOMEACCOUNT_ID:"homeAccountIdentifier"},te={PLAIN:"plain",S256:"S256"},T={QUERY:"query",FRAGMENT:"fragment"},b={...T,FORM_POST:"form_post"},z={IMPLICIT_GRANT:"implicit",AUTHORIZATION_CODE_GRANT:"authorization_code",CLIENT_CREDENTIALS_GRANT:"client_credentials",RESOURCE_OWNER_PASSWORD_GRANT:"password",REFRESH_TOKEN_GRANT:"refresh_token",DEVICE_CODE_GRANT:"device_code",JWT_BEARER:"urn:ietf:params:oauth:grant-type:jwt-bearer"},J={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",MSAV1_ACCOUNT_TYPE:"MSA",GENERIC_ACCOUNT_TYPE:"Generic"},A={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},re={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},Y={ADFS:1001,MSA:1002,MSSTS:1003,GENERIC:1004,ACCESS_TOKEN:2001,REFRESH_TOKEN:2002,ID_TOKEN:2003,APP_METADATA:3001,UNDEFINED:9999},Ue="appmetadata",De="client_info",se="1",we={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:86400},ce={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},W={SCHEMA_VERSION:5,MAX_CUR_HEADER_BYTES:80,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},j={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},X={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},ie={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},Ce={username:"username",password:"password"},ve={httpSuccess:200,httpBadRequest:400},xe={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},ke={CONFIGURED_MATCHES_DETECTED:"1",CONFIGURED_NO_AUTO_DETECTION:"2",CONFIGURED_NOT_DETECTED:"3",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},Ee={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},Ye={Jwt:"JWT",Jwk:"JWK",Pop:"pop"}},92:(Se,ne,S)=>{S.d(ne,{x:()=>C});class C{static isEmptyObj(M){if(M)try{const O=JSON.parse(M);return 0===Object.keys(O).length}catch{}return!0}static startsWith(M,O){return 0===M.indexOf(O)}static endsWith(M,O){return M.length>=O.length&&M.lastIndexOf(O)===M.length-O.length}static queryStringToObject(M){const O={},L=M.split("&"),H=F=>decodeURIComponent(F.replace(/\+/g," "));return L.forEach(F=>{if(F.trim()){const[y,I]=F.split(/=(.+)/g,2);y&&I&&(O[H(y)]=H(I))}}),O}static trimArrayEntries(M){return M.map(O=>O.trim())}static removeEmptyStringsFromArray(M){return M.filter(O=>!!O)}static jsonParseHelper(M){try{return JSON.parse(M)}catch{return null}}static matchPattern(M,O){return new RegExp(M.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(O)}}},441:(Se,ne,S)=>{S.d(ne,{I:()=>C});class C{static nowSeconds(){return Math.round((new Date).getTime()/1e3)}static isTokenExpired(M,O){const L=Number(M)||0;return C.nowSeconds()+O>L}static wasClockTurnedBack(M){return Number(M)>C.nowSeconds()}static delay(M,O){return new Promise(L=>setTimeout(()=>L(O),M))}}},861:(Se,ne,S)=>{function C(M,O,L,H,F,y,I){try{var P=M[y](I),B=P.value}catch(te){return void L(te)}P.done?O(B):Promise.resolve(B).then(H,F)}function m(M){return function(){var O=this,L=arguments;return new Promise(function(H,F){var y=M.apply(O,L);function I(B){C(y,H,F,I,P,"next",B)}function P(B){C(y,H,F,I,P,"throw",B)}I(void 0)})}}S.d(ne,{Z:()=>m})}},Se=>{Se(Se.s=804)}]);